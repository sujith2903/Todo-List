(()=>{"use strict";function e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(n){e(1,arguments);var r=Object.prototype.toString.call(n);return n instanceof Date||"object"===t(n)&&"[object Date]"===r?new Date(n.getTime()):"number"==typeof n||"[object Number]"===r?new Date(n):("string"!=typeof n&&"[object String]"!==r||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function r(t){e(1,arguments);var r=n(t);return r.setHours(0,0,0,0),r}function o(t){return e(1,arguments),function(t,n){e(2,arguments);var o=r(t),c=r(n);return o.getTime()===c.getTime()}(t,Date.now())}var c={};function i(){return c}function s(t,r){var o,c,s,l,a,d,u,y;e(1,arguments);var p=i(),m=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}(null!==(o=null!==(c=null!==(s=null!==(l=null==r?void 0:r.weekStartsOn)&&void 0!==l?l:null==r||null===(a=r.locale)||void 0===a||null===(d=a.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==s?s:p.weekStartsOn)&&void 0!==c?c:null===(u=p.locale)||void 0===u||null===(y=u.options)||void 0===y?void 0:y.weekStartsOn)&&void 0!==o?o:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=n(t),f=v.getDay(),g=(f<m?7:0)+f-m;return v.setDate(v.getDate()-g),v.setHours(0,0,0,0),v}function l(t,n){return e(1,arguments),function(t,n,r){e(2,arguments);var o=s(t,r),c=s(n,r);return o.getTime()===c.getTime()}(t,Date.now(),n)}const a=function(){if(localStorage.getItem("project")){let e=JSON.parse(localStorage.getItem("project"));for(let t=0;t<e.length;t++)p.myProjectArray.push(e[t]),console.log(e[t])}},d=function(){let e=p.myProjectArray;localStorage.setItem("project",JSON.stringify(e)),console.log(JSON.parse(localStorage.getItem("project")))},u=function(){let e,t,n,r=0,c=0;const i=document.querySelector(".projects-lists"),s=document.querySelector(".main-content"),a=document.querySelector(".due-content"),u=document.querySelector(".project-title"),y=document.querySelector(".project-description"),m=document.querySelector(".project-due"),v=document.querySelector(".priority"),f=document.querySelector(".task-button"),g=document.querySelector(".all-tasks"),h=document.querySelector(".due-today"),k=document.querySelector(".due-this-week"),j=document.querySelector(".due-title"),L=document.querySelector(".due-projects-lists"),S=document.querySelector(".priority-tab"),C=function(t){p.myProjectArray[t]===e&&(s.style.display="none"),p.myProjectArray.splice(t,1)},w=function(){const e=document.createElement("div");e.classList.add("individual-task"),g.appendChild(e);const t=document.createElement("div");t.classList.add("task-checkbox-div"),e.appendChild(t),t.innerHTML='<label for="task1-checkbox"></label><input type="checkbox" class = "task-checkbox" id="task1-checkbox" name="checkbox">';const n=document.createElement("div");n.classList.add("task-input-div"),e.appendChild(n),n.innerHTML='<label for="task1-input"></label><input type="text" class="task-input" id="task1-input" name="task" required>';const r=document.createElement("div");r.classList.add("task-delete-button"),e.appendChild(r),r.innerHTML='<svg class="deleteSVG" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path class="deleteSVG" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>'},b=function(e,t){return null==t&&(t=!1),{taskName:e,isCompleted:t}},x=function(e){for(s.style.display="none",a.style.display="flex";L.hasChildNodes();)L.removeChild(L.firstChild);for(let t=0;t<p.myProjectArray.length;t++){let n=new Date(`${p.myProjectArray[t].date}CDT`);if("isToday"==e){if(j.textContent="Due Today",o(new Date(n))){const e=document.createElement("div");e.classList.add("due-project"),L.appendChild(e),e.textContent=p.myProjectArray[t].title}}else if("isThisWeek"==e&&(j.textContent="Due This Week",l(new Date(n)))){const e=document.createElement("div");e.classList.add("due-project"),L.appendChild(e),e.textContent=p.myProjectArray[t].title}}},E=function(e){for(s.style.display="none",a.style.display="flex";L.hasChildNodes();)L.removeChild(L.firstChild);if("low"==e){j.textContent="Low Priority Projects";for(let e=0;e<p.myProjectArray.length;e++)if("Low"==p.myProjectArray[e].priority){const t=document.createElement("div");t.classList.add("due-project"),L.appendChild(t),t.textContent=p.myProjectArray[e].title}}else if("med"==e){j.textContent="Medium Priority Projects";for(let e=0;e<p.myProjectArray.length;e++)if("Medium"==p.myProjectArray[e].priority){const t=document.createElement("div");t.classList.add("due-project"),L.appendChild(t),t.textContent=p.myProjectArray[e].title}}else if("high"==e){j.textContent="High Priority Projects";for(let e=0;e<p.myProjectArray.length;e++)if("High"==p.myProjectArray[e].priority){const t=document.createElement("div");t.classList.add("due-project"),L.appendChild(t),t.textContent=p.myProjectArray[e].title}}};return i.addEventListener("click",(n=>{(n.target.classList.contains("project")||n.target.classList.contains("deleteSVG")||n.target.classList.contains("editSVG"))&&(t=n.target.closest(".project-display"),r=Array.from(t.parentNode.children).indexOf(t),e=p.myProjectArray[r])})),i.addEventListener("click",(e=>{if(e.target.classList.contains("deleteSVG")){const t=e.target.closest(".project-display");C(r),i.removeChild(t),d()}})),i.addEventListener("click",(e=>{e.target.classList.contains("editSVG")&&(p.displayEditForm(r),n=t.querySelector(".project"))})),i.addEventListener("click",(t=>{t.target.classList.contains("project")&&(s.style.display="flex",a.style.display="none",u.textContent=e.title,y.textContent=e.description,m.textContent=e.date,v.textContent=`(${e.priority}`,document.querySelectorAll(".individual-task").forEach((e=>{g.removeChild(e)})),function(){for(let t=0;t<e.tasks.length;t++){w();const n=document.querySelectorAll(".task-input"),r=document.querySelectorAll(".task-checkbox");n[t].value=e.tasks[t].taskName,r[t].checked=e.tasks[t].isCompleted}}())})),g.addEventListener("click",(e=>{if(e.target.classList.contains("task-checkbox")||e.target.classList.contains("task-input")||e.target.classList.contains("deleteSVG")){let t=e.target.closest(".individual-task");c=Array.from(t.parentNode.children).indexOf(t)}})),f.addEventListener("click",(()=>{let e,t;w(),g.addEventListener("change",(n=>{if(n.target.classList.contains("task-checkbox")){t=n.target.checked;const o=b(e,t);p.myProjectArray[r].tasks[c]=o,d()}else if(n.target.classList.contains("task-input")){e=n.target.value;const o=b(e,t);p.myProjectArray[r].tasks[c]=o,d()}}))})),g.addEventListener("click",(e=>{if(e.target.classList.contains("deleteSVG")){const t=e.target.closest(".individual-task");p.myProjectArray[r].tasks.splice(c,1),g.removeChild(t),d()}})),h.addEventListener("click",(()=>{x("isToday")})),k.addEventListener("click",(()=>{x("isThisWeek")})),S.addEventListener("click",(e=>{e.target.classList.contains("priority-low")?E("low"):e.target.classList.contains("priority-med")?E("med"):e.target.classList.contains("priority-high")&&E("high")})),{createProjectDiv:function(){const e=document.createElement("button"),t=document.createElement("button"),n=document.createElement("div"),r=document.createElement("div");n.classList.add("project-display"),i.appendChild(n),r.classList.add("project"),r.textContent=p.myProjectArray[p.myProjectArray.length-1].title,n.appendChild(r),e.classList.add("delete-project-button"),e.innerHTML='<svg class="deleteSVG" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path class="deleteSVG" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',n.appendChild(e),t.classList.add("edit-project-button"),t.innerHTML='<svg class="editSVG" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path class="editSVG" d="M5,3C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19H5V5H12V3H5M17.78,4C17.61,4 17.43,4.07 17.3,4.2L16.08,5.41L18.58,7.91L19.8,6.7C20.06,6.44 20.06,6 19.8,5.75L18.25,4.2C18.12,4.07 17.95,4 17.78,4M15.37,6.12L8,13.5V16H10.5L17.87,8.62L15.37,6.12Z" /></svg>',n.appendChild(t)},editProjectDiv:function(){n.textContent=e.title},deleteProject:C,index:r}}(),y=function(){const e=document.querySelector(".add-project"),t=document.querySelector(".edit-project"),n=document.querySelector(".add-project-form"),r=document.querySelector("#title"),o=document.querySelector("#description"),c=document.querySelector("#date"),i=document.querySelectorAll(".project-priority-button"),s=document.querySelector(".add"),l=document.querySelector(".cancel"),a=document.querySelector("#edit-title"),y=document.querySelector("#edit-description"),p=document.querySelector("#edit-date"),m=document.querySelector(".edit"),v=document.querySelector(".edit-cancel");let f,g=[],h="Low";const k=function(e,t,n,r){return{title:e,description:t,date:n,priority:r,tasks:[]}};return m.addEventListener("click",(e=>{e.preventDefault(),f.title=a.value,f.description=y.value,f.date=p.value,t.style.display="none",d(),u.editProjectDiv(),n.reset()})),{addProject:e,addButton:s,displayForm:function(){n.reset(),e.style.display="flex",s.addEventListener("click",(t=>{if(""!=r.value){t.preventDefault();const i=k(r.value,o.value,c.value,h);g.push(i),d(),u.createProjectDiv(),console.log(g),e.style.display="none",h="Low",n.reset()}})),l.addEventListener("click",(t=>{t.preventDefault(),e.style.display="none",n.reset()})),e.addEventListener("click",(t=>{t.target==e&&(e.style.display="none")})),i.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),h=e.textContent,console.log(h)}))}))},title:r,description:o,date:c,priority:i,myProjectArray:g,createProject:k,displayEditForm:function(e){t.style.display="flex",console.log(e),console.log(u.index),f=g[e],a.value=f.title,y.value=f.description,p.value=f.date,v.addEventListener("click",(e=>{e.preventDefault(),t.style.display="none",n.reset()})),t.addEventListener("click",(e=>{e.target==t&&(t.style.display="none")}))}}}(),p=y;a(),console.log(p.myProjectArray),document.querySelector(".project-button").addEventListener("click",p.displayForm)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFVL0YsR0FFOUIwRSxFQUFZdkQsTUFBTUMsUUFBVSxPQUM1QmpGLFFBQVF1RCxJQUFJTSxHQUNaN0QsUUFBUXVELElBQUksU0FDWkcsRUFBY3dGLEVBQWVyRixHQUU3QmdGLEVBQVVwQixNQUFRL0QsRUFBbUIsTUFDckNvRixFQUFnQnJCLE1BQVEvRCxFQUF5QixZQUNqRHFGLEVBQVN0QixNQUFRL0QsRUFBa0IsS0FFbkN1RixFQUFpQnhDLGlCQUFpQixTQUFVbUIsSUFDeENBLEVBQU0wQixpQkFDTmYsRUFBWXZELE1BQU1DLFFBQVUsT0FDNUJ1RCxFQUFLZSxPQUFNLElBR2ZoQixFQUFZOUIsaUJBQWlCLFNBQVVtQixJQUMvQkEsRUFBTWpCLFFBQVU0QixJQUNoQkEsRUFBWXZELE1BQU1DLFFBQVUsT0FDaEMsR0FHUixFQWdDSCxDQXBIc0IsR0FzSHZCLElDckhBLElBRUFqRixRQUFRdUQsSUFBSUQsRUFBQSxnQkFFT1UsU0FBU0MsY0FBYyxtQkFFL0J3QyxpQkFBaUIsUUFBU25ELEVBQUEsWSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS90b0RhdGUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9zdGFydE9mRGF5L2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNUb2RheS9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzU2FtZURheS9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvZGVmYXVsdE9wdGlvbnMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9zdGFydE9mV2Vlay9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvdG9JbnRlZ2VyL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNUaGlzV2Vlay9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzU2FtZVdlZWsvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3N0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL0RPTS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvYWRkUHJvamVjdC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVxdWlyZWRBcmdzKHJlcXVpcmVkLCBhcmdzKSB7XG4gIGlmIChhcmdzLmxlbmd0aCA8IHJlcXVpcmVkKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihyZXF1aXJlZCArICcgYXJndW1lbnQnICsgKHJlcXVpcmVkID4gMSA/ICdzJyA6ICcnKSArICcgcmVxdWlyZWQsIGJ1dCBvbmx5ICcgKyBhcmdzLmxlbmd0aCArICcgcHJlc2VudCcpO1xuICB9XG59IiwiZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfVxuXG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSB0b0RhdGVcbiAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVyc1xuICogQHN1bW1hcnkgQ29udmVydCB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGFuIGluc3RhbmNlIG9mIERhdGUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIGl0cyBjbG9uZS5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgYSBudW1iZXIsIGl0IGlzIHRyZWF0ZWQgYXMgYSB0aW1lc3RhbXAuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIG5vbmUgb2YgdGhlIGFib3ZlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBJbnZhbGlkIERhdGUuXG4gKlxuICogKipOb3RlKio6ICphbGwqIERhdGUgYXJndW1lbnRzIHBhc3NlZCB0byBhbnkgKmRhdGUtZm5zKiBmdW5jdGlvbiBpcyBwcm9jZXNzZWQgYnkgYHRvRGF0ZWAuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gYXJndW1lbnQgLSB0aGUgdmFsdWUgdG8gY29udmVydFxuICogQHJldHVybnMge0RhdGV9IHRoZSBwYXJzZWQgZGF0ZSBpbiB0aGUgbG9jYWwgdGltZSB6b25lXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ2xvbmUgdGhlIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSB0b0RhdGUobmV3IERhdGUoMjAxNCwgMSwgMTEsIDExLCAzMCwgMzApKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ29udmVydCB0aGUgdGltZXN0YW1wIHRvIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSB0b0RhdGUoMTM5MjA5ODQzMDAwMClcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9EYXRlKGFyZ3VtZW50KSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgYXJnU3RyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZ3VtZW50KTsgLy8gQ2xvbmUgdGhlIGRhdGVcblxuICBpZiAoYXJndW1lbnQgaW5zdGFuY2VvZiBEYXRlIHx8IF90eXBlb2YoYXJndW1lbnQpID09PSAnb2JqZWN0JyAmJiBhcmdTdHIgPT09ICdbb2JqZWN0IERhdGVdJykge1xuICAgIC8vIFByZXZlbnQgdGhlIGRhdGUgdG8gbG9zZSB0aGUgbWlsbGlzZWNvbmRzIHdoZW4gcGFzc2VkIHRvIG5ldyBEYXRlKCkgaW4gSUUxMFxuICAgIHJldHVybiBuZXcgRGF0ZShhcmd1bWVudC5nZXRUaW1lKCkpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBhcmd1bWVudCA9PT0gJ251bWJlcicgfHwgYXJnU3RyID09PSAnW29iamVjdCBOdW1iZXJdJykge1xuICAgIHJldHVybiBuZXcgRGF0ZShhcmd1bWVudCk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCh0eXBlb2YgYXJndW1lbnQgPT09ICdzdHJpbmcnIHx8IGFyZ1N0ciA9PT0gJ1tvYmplY3QgU3RyaW5nXScpICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUud2FybihcIlN0YXJ0aW5nIHdpdGggdjIuMC4wLWJldGEuMSBkYXRlLWZucyBkb2Vzbid0IGFjY2VwdCBzdHJpbmdzIGFzIGRhdGUgYXJndW1lbnRzLiBQbGVhc2UgdXNlIGBwYXJzZUlTT2AgdG8gcGFyc2Ugc3RyaW5ncy4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjc3RyaW5nLWFyZ3VtZW50c1wiKTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcblxuICAgICAgY29uc29sZS53YXJuKG5ldyBFcnJvcigpLnN0YWNrKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgfVxufSIsImltcG9ydCB0b0RhdGUgZnJvbSBcIi4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgc3RhcnRPZkRheVxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgZGF5IGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSBkYXkgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICogVGhlIHJlc3VsdCB3aWxsIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIG9yaWdpbmFsIGRhdGVcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgc3RhcnQgb2YgYSBkYXlcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUaGUgc3RhcnQgb2YgYSBkYXkgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCkpXG4gKiAvLz0+IFR1ZSBTZXAgMDIgMjAxNCAwMDowMDowMFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHN0YXJ0T2ZEYXkoZGlydHlEYXRlKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUpO1xuICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gZGF0ZTtcbn0iLCJpbXBvcnQgaXNTYW1lRGF5IGZyb20gXCIuLi9pc1NhbWVEYXkvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIGlzVG9kYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgSXMgdGhlIGdpdmVuIGRhdGUgdG9kYXk/XG4gKiBAcHVyZSBmYWxzZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSXMgdGhlIGdpdmVuIGRhdGUgdG9kYXk/XG4gKlxuICogPiDimqDvuI8gUGxlYXNlIG5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIGlzIG5vdCBwcmVzZW50IGluIHRoZSBGUCBzdWJtb2R1bGUgYXNcbiAqID4gaXQgdXNlcyBgRGF0ZS5ub3coKWAgaW50ZXJuYWxseSBoZW5jZSBpbXB1cmUgYW5kIGNhbid0IGJlIHNhZmVseSBjdXJyaWVkLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgZGF0ZSB0byBjaGVja1xuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlIGlzIHRvZGF5XG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdG9kYXkgaXMgNiBPY3RvYmVyIDIwMTQsIGlzIDYgT2N0b2JlciAxNDowMDowMCB0b2RheT9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzVG9kYXkobmV3IERhdGUoMjAxNCwgOSwgNiwgMTQsIDApKVxuICogLy89PiB0cnVlXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNUb2RheShkaXJ0eURhdGUpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHJldHVybiBpc1NhbWVEYXkoZGlydHlEYXRlLCBEYXRlLm5vdygpKTtcbn0iLCJpbXBvcnQgc3RhcnRPZkRheSBmcm9tIFwiLi4vc3RhcnRPZkRheS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgaXNTYW1lRGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgZGF5IChhbmQgeWVhciBhbmQgbW9udGgpP1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSBkYXkgKGFuZCB5ZWFyIGFuZCBtb250aCk/XG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZUxlZnQgLSB0aGUgZmlyc3QgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZVJpZ2h0IC0gdGhlIHNlY29uZCBkYXRlIHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGRhdGVzIGFyZSBpbiB0aGUgc2FtZSBkYXkgKGFuZCB5ZWFyIGFuZCBtb250aClcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMiBhcmd1bWVudHMgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDQgU2VwdGVtYmVyIDA2OjAwOjAwIGFuZCA0IFNlcHRlbWJlciAxODowMDowMCBpbiB0aGUgc2FtZSBkYXk/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVEYXkobmV3IERhdGUoMjAxNCwgOCwgNCwgNiwgMCksIG5ldyBEYXRlKDIwMTQsIDgsIDQsIDE4LCAwKSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgNCBTZXB0ZW1iZXIgYW5kIDQgT2N0b2JlciBpbiB0aGUgc2FtZSBkYXk/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVEYXkobmV3IERhdGUoMjAxNCwgOCwgNCksIG5ldyBEYXRlKDIwMTQsIDksIDQpKVxuICogLy89PiBmYWxzZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgNCBTZXB0ZW1iZXIsIDIwMTQgYW5kIDQgU2VwdGVtYmVyLCAyMDE1IGluIHRoZSBzYW1lIGRheT9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZURheShuZXcgRGF0ZSgyMDE0LCA4LCA0KSwgbmV3IERhdGUoMjAxNSwgOCwgNCkpXG4gKiAvLz0+IGZhbHNlXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNTYW1lRGF5KGRpcnR5RGF0ZUxlZnQsIGRpcnR5RGF0ZVJpZ2h0KSB7XG4gIHJlcXVpcmVkQXJncygyLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZUxlZnRTdGFydE9mRGF5ID0gc3RhcnRPZkRheShkaXJ0eURhdGVMZWZ0KTtcbiAgdmFyIGRhdGVSaWdodFN0YXJ0T2ZEYXkgPSBzdGFydE9mRGF5KGRpcnR5RGF0ZVJpZ2h0KTtcbiAgcmV0dXJuIGRhdGVMZWZ0U3RhcnRPZkRheS5nZXRUaW1lKCkgPT09IGRhdGVSaWdodFN0YXJ0T2ZEYXkuZ2V0VGltZSgpO1xufSIsInZhciBkZWZhdWx0T3B0aW9ucyA9IHt9O1xuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRPcHRpb25zKCkge1xuICByZXR1cm4gZGVmYXVsdE9wdGlvbnM7XG59XG5leHBvcnQgZnVuY3Rpb24gc2V0RGVmYXVsdE9wdGlvbnMobmV3T3B0aW9ucykge1xuICBkZWZhdWx0T3B0aW9ucyA9IG5ld09wdGlvbnM7XG59IiwiaW1wb3J0IHRvRGF0ZSBmcm9tIFwiLi4vdG9EYXRlL2luZGV4LmpzXCI7XG5pbXBvcnQgdG9JbnRlZ2VyIGZyb20gXCIuLi9fbGliL3RvSW50ZWdlci9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbmltcG9ydCB7IGdldERlZmF1bHRPcHRpb25zIH0gZnJvbSBcIi4uL19saWIvZGVmYXVsdE9wdGlvbnMvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgc3RhcnRPZldlZWtcbiAqIEBjYXRlZ29yeSBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYSB3ZWVrIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSB3ZWVrIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqIFRoZSByZXN1bHQgd2lsbCBiZSBpbiB0aGUgbG9jYWwgdGltZXpvbmUuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBvcmlnaW5hbCBkYXRlXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucy5cbiAqIEBwYXJhbSB7TG9jYWxlfSBbb3B0aW9ucy5sb2NhbGU9ZGVmYXVsdExvY2FsZV0gLSB0aGUgbG9jYWxlIG9iamVjdC4gU2VlIFtMb2NhbGVde0BsaW5rIGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvTG9jYWxlfVxuICogQHBhcmFtIHswfDF8MnwzfDR8NXw2fSBbb3B0aW9ucy53ZWVrU3RhcnRzT249MF0gLSB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlayAoMCAtIFN1bmRheSlcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgc3RhcnQgb2YgYSB3ZWVrXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLndlZWtTdGFydHNPbmAgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDZcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVGhlIHN0YXJ0IG9mIGEgd2VlayBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCkpXG4gKiAvLz0+IFN1biBBdWcgMzEgMjAxNCAwMDowMDowMFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB0aGUgd2VlayBzdGFydHMgb24gTW9uZGF5LCB0aGUgc3RhcnQgb2YgdGhlIHdlZWsgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApLCB7IHdlZWtTdGFydHNPbjogMSB9KVxuICogLy89PiBNb24gU2VwIDAxIDIwMTQgMDA6MDA6MDBcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzdGFydE9mV2VlayhkaXJ0eURhdGUsIG9wdGlvbnMpIHtcbiAgdmFyIF9yZWYsIF9yZWYyLCBfcmVmMywgX29wdGlvbnMkd2Vla1N0YXJ0c09uLCBfb3B0aW9ucyRsb2NhbGUsIF9vcHRpb25zJGxvY2FsZSRvcHRpbywgX2RlZmF1bHRPcHRpb25zJGxvY2FsLCBfZGVmYXVsdE9wdGlvbnMkbG9jYWwyO1xuXG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgZGVmYXVsdE9wdGlvbnMgPSBnZXREZWZhdWx0T3B0aW9ucygpO1xuICB2YXIgd2Vla1N0YXJ0c09uID0gdG9JbnRlZ2VyKChfcmVmID0gKF9yZWYyID0gKF9yZWYzID0gKF9vcHRpb25zJHdlZWtTdGFydHNPbiA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy53ZWVrU3RhcnRzT24pICE9PSBudWxsICYmIF9vcHRpb25zJHdlZWtTdGFydHNPbiAhPT0gdm9pZCAwID8gX29wdGlvbnMkd2Vla1N0YXJ0c09uIDogb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX29wdGlvbnMkbG9jYWxlID0gb3B0aW9ucy5sb2NhbGUpID09PSBudWxsIHx8IF9vcHRpb25zJGxvY2FsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9vcHRpb25zJGxvY2FsZSRvcHRpbyA9IF9vcHRpb25zJGxvY2FsZS5vcHRpb25zKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRsb2NhbGUkb3B0aW8gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRpb25zJGxvY2FsZSRvcHRpby53ZWVrU3RhcnRzT24pICE9PSBudWxsICYmIF9yZWYzICE9PSB2b2lkIDAgPyBfcmVmMyA6IGRlZmF1bHRPcHRpb25zLndlZWtTdGFydHNPbikgIT09IG51bGwgJiYgX3JlZjIgIT09IHZvaWQgMCA/IF9yZWYyIDogKF9kZWZhdWx0T3B0aW9ucyRsb2NhbCA9IGRlZmF1bHRPcHRpb25zLmxvY2FsZSkgPT09IG51bGwgfHwgX2RlZmF1bHRPcHRpb25zJGxvY2FsID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RlZmF1bHRPcHRpb25zJGxvY2FsMiA9IF9kZWZhdWx0T3B0aW9ucyRsb2NhbC5vcHRpb25zKSA9PT0gbnVsbCB8fCBfZGVmYXVsdE9wdGlvbnMkbG9jYWwyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGVmYXVsdE9wdGlvbnMkbG9jYWwyLndlZWtTdGFydHNPbikgIT09IG51bGwgJiYgX3JlZiAhPT0gdm9pZCAwID8gX3JlZiA6IDApOyAvLyBUZXN0IGlmIHdlZWtTdGFydHNPbiBpcyBiZXR3ZWVuIDAgYW5kIDYgX2FuZF8gaXMgbm90IE5hTlxuXG4gIGlmICghKHdlZWtTdGFydHNPbiA+PSAwICYmIHdlZWtTdGFydHNPbiA8PSA2KSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd3ZWVrU3RhcnRzT24gbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDYgaW5jbHVzaXZlbHknKTtcbiAgfVxuXG4gIHZhciBkYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSk7XG4gIHZhciBkYXkgPSBkYXRlLmdldERheSgpO1xuICB2YXIgZGlmZiA9IChkYXkgPCB3ZWVrU3RhcnRzT24gPyA3IDogMCkgKyBkYXkgLSB3ZWVrU3RhcnRzT247XG4gIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSAtIGRpZmYpO1xuICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gZGF0ZTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b0ludGVnZXIoZGlydHlOdW1iZXIpIHtcbiAgaWYgKGRpcnR5TnVtYmVyID09PSBudWxsIHx8IGRpcnR5TnVtYmVyID09PSB0cnVlIHx8IGRpcnR5TnVtYmVyID09PSBmYWxzZSkge1xuICAgIHJldHVybiBOYU47XG4gIH1cblxuICB2YXIgbnVtYmVyID0gTnVtYmVyKGRpcnR5TnVtYmVyKTtcblxuICBpZiAoaXNOYU4obnVtYmVyKSkge1xuICAgIHJldHVybiBudW1iZXI7XG4gIH1cblxuICByZXR1cm4gbnVtYmVyIDwgMCA/IE1hdGguY2VpbChudW1iZXIpIDogTWF0aC5mbG9vcihudW1iZXIpO1xufSIsImltcG9ydCBpc1NhbWVXZWVrIGZyb20gXCIuLi9pc1NhbWVXZWVrL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuXG4vKipcbiAqIEBuYW1lIGlzVGhpc1dlZWtcbiAqIEBjYXRlZ29yeSBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IElzIHRoZSBnaXZlbiBkYXRlIGluIHRoZSBzYW1lIHdlZWsgYXMgdGhlIGN1cnJlbnQgZGF0ZT9cbiAqIEBwdXJlIGZhbHNlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBJcyB0aGUgZ2l2ZW4gZGF0ZSBpbiB0aGUgc2FtZSB3ZWVrIGFzIHRoZSBjdXJyZW50IGRhdGU/XG4gKlxuICogPiDimqDvuI8gUGxlYXNlIG5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIGlzIG5vdCBwcmVzZW50IGluIHRoZSBGUCBzdWJtb2R1bGUgYXNcbiAqID4gaXQgdXNlcyBgRGF0ZS5ub3coKWAgaW50ZXJuYWxseSBoZW5jZSBpbXB1cmUgYW5kIGNhbid0IGJlIHNhZmVseSBjdXJyaWVkLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIHRoZSBvYmplY3Qgd2l0aCBvcHRpb25zXG4gKiBAcGFyYW0ge0xvY2FsZX0gW29wdGlvbnMubG9jYWxlPWRlZmF1bHRMb2NhbGVdIC0gdGhlIGxvY2FsZSBvYmplY3QuIFNlZSBbTG9jYWxlXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL0xvY2FsZX1cbiAqIEBwYXJhbSB7MHwxfDJ8M3w0fDV8Nn0gW29wdGlvbnMud2Vla1N0YXJ0c09uPTBdIC0gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsgKDAgLSBTdW5kYXkpXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGRhdGUgaXMgaW4gdGhpcyB3ZWVrXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLndlZWtTdGFydHNPbmAgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDZcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdG9kYXkgaXMgMjUgU2VwdGVtYmVyIDIwMTQsIGlzIDIxIFNlcHRlbWJlciAyMDE0IGluIHRoaXMgd2Vlaz9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzVGhpc1dlZWsobmV3IERhdGUoMjAxNCwgOCwgMjEpKVxuICogLy89PiB0cnVlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRvZGF5IGlzIDI1IFNlcHRlbWJlciAyMDE0IGFuZCB3ZWVrIHN0YXJ0cyB3aXRoIE1vbmRheVxuICogLy8gaXMgMjEgU2VwdGVtYmVyIDIwMTQgaW4gdGhpcyB3ZWVrP1xuICogY29uc3QgcmVzdWx0ID0gaXNUaGlzV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyMSksIHsgd2Vla1N0YXJ0c09uOiAxIH0pXG4gKiAvLz0+IGZhbHNlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVGhpc1dlZWsoZGlydHlEYXRlLCBvcHRpb25zKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICByZXR1cm4gaXNTYW1lV2VlayhkaXJ0eURhdGUsIERhdGUubm93KCksIG9wdGlvbnMpO1xufSIsImltcG9ydCBzdGFydE9mV2VlayBmcm9tIFwiLi4vc3RhcnRPZldlZWsvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG5cbi8qKlxuICogQG5hbWUgaXNTYW1lV2Vla1xuICogQGNhdGVnb3J5IFdlZWsgSGVscGVyc1xuICogQHN1bW1hcnkgQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSB3ZWVrIChhbmQgbW9udGggYW5kIHllYXIpP1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSB3ZWVrIChhbmQgbW9udGggYW5kIHllYXIpP1xuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVMZWZ0IC0gdGhlIGZpcnN0IGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVSaWdodCAtIHRoZSBzZWNvbmQgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMuXG4gKiBAcGFyYW0ge0xvY2FsZX0gW29wdGlvbnMubG9jYWxlPWRlZmF1bHRMb2NhbGVdIC0gdGhlIGxvY2FsZSBvYmplY3QuIFNlZSBbTG9jYWxlXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL0xvY2FsZX1cbiAqIEBwYXJhbSB7MHwxfDJ8M3w0fDV8Nn0gW29wdGlvbnMud2Vla1N0YXJ0c09uPTBdIC0gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsgKDAgLSBTdW5kYXkpXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGRhdGVzIGFyZSBpbiB0aGUgc2FtZSB3ZWVrIChhbmQgbW9udGggYW5kIHllYXIpXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDIgYXJndW1lbnRzIHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy53ZWVrU3RhcnRzT25gIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSAzMSBBdWd1c3QgMjAxNCBhbmQgNCBTZXB0ZW1iZXIgMjAxNCBpbiB0aGUgc2FtZSB3ZWVrP1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lV2VlayhuZXcgRGF0ZSgyMDE0LCA3LCAzMSksIG5ldyBEYXRlKDIwMTQsIDgsIDQpKVxuICogLy89PiB0cnVlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHdlZWsgc3RhcnRzIHdpdGggTW9uZGF5LFxuICogLy8gYXJlIDMxIEF1Z3VzdCAyMDE0IGFuZCA0IFNlcHRlbWJlciAyMDE0IGluIHRoZSBzYW1lIHdlZWs/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVXZWVrKG5ldyBEYXRlKDIwMTQsIDcsIDMxKSwgbmV3IERhdGUoMjAxNCwgOCwgNCksIHtcbiAqICAgd2Vla1N0YXJ0c09uOiAxXG4gKiB9KVxuICogLy89PiBmYWxzZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgMSBKYW51YXJ5IDIwMTQgYW5kIDEgSmFudWFyeSAyMDE1IGluIHRoZSBzYW1lIHdlZWs/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVXZWVrKG5ldyBEYXRlKDIwMTQsIDAsIDEpLCBuZXcgRGF0ZSgyMDE1LCAwLCAxKSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNTYW1lV2VlayhkaXJ0eURhdGVMZWZ0LCBkaXJ0eURhdGVSaWdodCwgb3B0aW9ucykge1xuICByZXF1aXJlZEFyZ3MoMiwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGVMZWZ0U3RhcnRPZldlZWsgPSBzdGFydE9mV2VlayhkaXJ0eURhdGVMZWZ0LCBvcHRpb25zKTtcbiAgdmFyIGRhdGVSaWdodFN0YXJ0T2ZXZWVrID0gc3RhcnRPZldlZWsoZGlydHlEYXRlUmlnaHQsIG9wdGlvbnMpO1xuICByZXR1cm4gZGF0ZUxlZnRTdGFydE9mV2Vlay5nZXRUaW1lKCkgPT09IGRhdGVSaWdodFN0YXJ0T2ZXZWVrLmdldFRpbWUoKTtcbn0iLCJpbXBvcnQgYWRkUHJvamVjdExpc3QgZnJvbSAnLi9hZGRQcm9qZWN0J1xuXG5jb25zdCBzdG9yYWdlID0gKGZ1bmN0aW9uICgpIHtcblxuICAgIGZ1bmN0aW9uIHBvcHVsYXRlRGF0YSgpIHtcbiAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9qZWN0JykpIHtcblxuICAgICAgICAgICAgbGV0IHN0b3JhZ2VBcnJheSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byb2plY3QnKSlcblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdG9yYWdlQXJyYXkubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgIGFkZFByb2plY3RMaXN0Lm15UHJvamVjdEFycmF5LnB1c2goc3RvcmFnZUFycmF5W2ldKVxuXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coc3RvcmFnZUFycmF5W2ldKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3RvcmVEYXRhKCkge1xuXG4gICAgICAgIGxldCBzdG9yYWdlQXJyYXkgPSBhZGRQcm9qZWN0TGlzdC5teVByb2plY3RBcnJheVxuXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0JywgSlNPTi5zdHJpbmdpZnkoc3RvcmFnZUFycmF5KSlcblxuICAgICAgICBjb25zb2xlLmxvZyhKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9qZWN0JykpKVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHBvcHVsYXRlRGF0YSxcbiAgICAgICAgc3RvcmVEYXRhXG4gICAgfVxufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgc3RvcmFnZSIsImltcG9ydCB7IGlzVGhpc1dlZWssIGlzVG9kYXkgfSBmcm9tICdkYXRlLWZucyc7XG5pbXBvcnQgYWRkUHJvamVjdExpc3QgZnJvbSAnLi9hZGRQcm9qZWN0J1xuaW1wb3J0IHN0b3JhZ2UgZnJvbSAnLi9zdG9yYWdlJ1xuXG5jb25zdCBkb20gPSAoZnVuY3Rpb24gKCkge1xuICAgIFxuICAgIGxldCBpbmRleCA9IDBcbiAgICBsZXQgdGFza0luZGV4ID0gMFxuICAgIGxldCBvcGVuUHJvamVjdFxuICAgIGxldCB0YXJnZXRQcm9qZWN0IFxuICAgIGxldCB0YXJnZXRQcm9qZWN0VGl0bGVcbiAgICBjb25zdCBwcm9qZWN0c0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdHMtbGlzdHMnKVxuICAgIGNvbnN0IG1haW5Db250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4tY29udGVudCcpXG4gICAgY29uc3QgZHVlQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kdWUtY29udGVudCcpXG4gICAgY29uc3QgcHJvamVjdFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QtdGl0bGUnKVxuICAgIGNvbnN0IHByb2plY3REZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LWRlc2NyaXB0aW9uJylcbiAgICBjb25zdCBwcm9qZWN0RHVlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QtZHVlJylcbiAgICBjb25zdCBwcm9qZWN0UHJpb3JpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJpb3JpdHknKVxuICAgIGNvbnN0IHRhc2tCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFzay1idXR0b24nKVxuICAgIGNvbnN0IGFsbFRhc2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsbC10YXNrcycpXG4gICAgY29uc3QgZHVlVG9kYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHVlLXRvZGF5JylcbiAgICBjb25zdCBkdWVUaGlzV2VlayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kdWUtdGhpcy13ZWVrJylcbiAgICBjb25zdCBkdWVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kdWUtdGl0bGUnKVxuICAgIGNvbnN0IGR1ZVByb2plY3RMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmR1ZS1wcm9qZWN0cy1saXN0cycpXG4gICAgY29uc3QgcHJpb3JpdHlUYWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJpb3JpdHktdGFiJylcblxuICAgIGNvbnN0IGNyZWF0ZVByb2plY3REaXYgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgY29uc3QgZGVsZXRlUHJvamVjdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gICAgICAgIGNvbnN0IGVkaXRQcm9qZWN0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgICAgICAgY29uc3QgcHJvamVjdERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgIGNvbnN0IHByb2plY3RUaXRsZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cbiAgICAgICAgcHJvamVjdERpdi5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LWRpc3BsYXknKVxuICAgICAgICBwcm9qZWN0c0xpc3QuYXBwZW5kQ2hpbGQocHJvamVjdERpdilcblxuICAgICAgICBwcm9qZWN0VGl0bGVEaXYuY2xhc3NMaXN0LmFkZCgncHJvamVjdCcpXG4gICAgICAgIHByb2plY3RUaXRsZURpdi50ZXh0Q29udGVudCA9IGFkZFByb2plY3RMaXN0Lm15UHJvamVjdEFycmF5WyhhZGRQcm9qZWN0TGlzdC5teVByb2plY3RBcnJheSkubGVuZ3RoIC0gMV1bJ3RpdGxlJ11cbiAgICAgICAgcHJvamVjdERpdi5hcHBlbmRDaGlsZChwcm9qZWN0VGl0bGVEaXYpXG5cbiAgICAgICAgZGVsZXRlUHJvamVjdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdkZWxldGUtcHJvamVjdC1idXR0b24nKVxuICAgICAgICBkZWxldGVQcm9qZWN0QnV0dG9uLmlubmVySFRNTCA9ICc8c3ZnIGNsYXNzPVwiZGVsZXRlU1ZHXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj48cGF0aCBjbGFzcz1cImRlbGV0ZVNWR1wiIGQ9XCJNMTksNEgxNS41TDE0LjUsM0g5LjVMOC41LDRINVY2SDE5TTYsMTlBMiwyIDAgMCwwIDgsMjFIMTZBMiwyIDAgMCwwIDE4LDE5VjdINlYxOVpcIiAvPjwvc3ZnPidcbiAgICAgICAgcHJvamVjdERpdi5hcHBlbmRDaGlsZChkZWxldGVQcm9qZWN0QnV0dG9uKVxuXG4gICAgICAgIGVkaXRQcm9qZWN0QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2VkaXQtcHJvamVjdC1idXR0b24nKVxuICAgICAgICBlZGl0UHJvamVjdEJ1dHRvbi5pbm5lckhUTUwgPSAnPHN2ZyBjbGFzcz1cImVkaXRTVkdcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPjxwYXRoIGNsYXNzPVwiZWRpdFNWR1wiIGQ9XCJNNSwzQzMuODksMyAzLDMuODkgMyw1VjE5QTIsMiAwIDAsMCA1LDIxSDE5QTIsMiAwIDAsMCAyMSwxOVYxMkgxOVYxOUg1VjVIMTJWM0g1TTE3Ljc4LDRDMTcuNjEsNCAxNy40Myw0LjA3IDE3LjMsNC4yTDE2LjA4LDUuNDFMMTguNTgsNy45MUwxOS44LDYuN0MyMC4wNiw2LjQ0IDIwLjA2LDYgMTkuOCw1Ljc1TDE4LjI1LDQuMkMxOC4xMiw0LjA3IDE3Ljk1LDQgMTcuNzgsNE0xNS4zNyw2LjEyTDgsMTMuNVYxNkgxMC41TDE3Ljg3LDguNjJMMTUuMzcsNi4xMlpcIiAvPjwvc3ZnPidcbiAgICAgICAgcHJvamVjdERpdi5hcHBlbmRDaGlsZChlZGl0UHJvamVjdEJ1dHRvbilcbiAgICB9XG5cbiAgICBjb25zdCBlZGl0UHJvamVjdERpdiA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB0YXJnZXRQcm9qZWN0VGl0bGUudGV4dENvbnRlbnQgPSBvcGVuUHJvamVjdFsndGl0bGUnXVxuICAgIH1cblxuICAgIGNvbnN0IGRlbGV0ZVByb2plY3QgPSBmdW5jdGlvbiAoaW5kZXgpIHtcblxuICAgICAgICBpZiAoYWRkUHJvamVjdExpc3QubXlQcm9qZWN0QXJyYXlbaW5kZXhdID09PSBvcGVuUHJvamVjdCkge1xuICAgICAgICAgICAgbWFpbkNvbnRlbnQuc3R5bGUuZGlzcGxheT0nbm9uZSdcbiAgICAgICAgfVxuXG4gICAgICAgIGFkZFByb2plY3RMaXN0Lm15UHJvamVjdEFycmF5LnNwbGljZShpbmRleCwgMSlcbiAgICB9XG5cbiAgICBjb25zdCBnZW5lcmF0ZU5ld1Rhc2sgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgY29uc3QgbmV3VGFzayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgIG5ld1Rhc2suY2xhc3NMaXN0LmFkZCgnaW5kaXZpZHVhbC10YXNrJylcbiAgICAgICAgYWxsVGFza3MuYXBwZW5kQ2hpbGQobmV3VGFzaylcblxuICAgICAgICBjb25zdCBuZXdDaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgIG5ld0NoZWNrYm94LmNsYXNzTGlzdC5hZGQoJ3Rhc2stY2hlY2tib3gtZGl2JylcbiAgICAgICAgbmV3VGFzay5hcHBlbmRDaGlsZChuZXdDaGVja2JveClcbiAgICAgICAgbmV3Q2hlY2tib3guaW5uZXJIVE1MID0gJzxsYWJlbCBmb3I9XCJ0YXNrMS1jaGVja2JveFwiPjwvbGFiZWw+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGNsYXNzID0gXCJ0YXNrLWNoZWNrYm94XCIgaWQ9XCJ0YXNrMS1jaGVja2JveFwiIG5hbWU9XCJjaGVja2JveFwiPidcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IG5ld0lucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgbmV3SW5wdXQuY2xhc3NMaXN0LmFkZCgndGFzay1pbnB1dC1kaXYnKVxuICAgICAgICBuZXdUYXNrLmFwcGVuZENoaWxkKG5ld0lucHV0KVxuICAgICAgICBuZXdJbnB1dC5pbm5lckhUTUwgPSAnPGxhYmVsIGZvcj1cInRhc2sxLWlucHV0XCI+PC9sYWJlbD48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cInRhc2staW5wdXRcIiBpZD1cInRhc2sxLWlucHV0XCIgbmFtZT1cInRhc2tcIiByZXF1aXJlZD4nXG4gICAgICAgIFxuICAgICAgICBjb25zdCB0YXNrRGVsZXRlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgdGFza0RlbGV0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCd0YXNrLWRlbGV0ZS1idXR0b24nKVxuICAgICAgICBuZXdUYXNrLmFwcGVuZENoaWxkKHRhc2tEZWxldGVCdXR0b24pXG4gICAgICAgIHRhc2tEZWxldGVCdXR0b24uaW5uZXJIVE1MID0gJzxzdmcgY2xhc3M9XCJkZWxldGVTVkdcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPjxwYXRoIGNsYXNzPVwiZGVsZXRlU1ZHXCIgZD1cIk0xOSw0SDE1LjVMMTQuNSwzSDkuNUw4LjUsNEg1VjZIMTlNNiwxOUEyLDIgMCAwLDAgOCwyMUgxNkEyLDIgMCAwLDAgMTgsMTlWN0g2VjE5WlwiIC8+PC9zdmc+J1xuICAgICAgICAgXG4gICAgfVxuXG4gICAgY29uc3QgZ2VuZXJhdGVUYXNrT2JqZWN0ID0gZnVuY3Rpb24gKHRhc2tOYW1lLCBpc0NvbXBsZXRlZCkge1xuXG4gICAgICAgIGlmIChpc0NvbXBsZXRlZCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlzQ29tcGxldGVkID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgIFxuICAgICAgICByZXR1cm4ge3Rhc2tOYW1lLCBpc0NvbXBsZXRlZH1cbiAgICB9XG5cbiAgICBjb25zdCBnZW5lcmF0ZVRhc2tMaXN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9wZW5Qcm9qZWN0Wyd0YXNrcyddLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIGdlbmVyYXRlTmV3VGFzaygpXG5cbiAgICAgICAgICAgIGNvbnN0IHRhc2tJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXNrLWlucHV0JylcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrQm94ICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXNrLWNoZWNrYm94JylcbiAgICAgICAgICAgIHRhc2tJbnB1dFtpXS52YWx1ZSA9IG9wZW5Qcm9qZWN0Wyd0YXNrcyddW2ldWyd0YXNrTmFtZSddXG4gICAgICAgICAgICBjaGVja0JveFtpXS5jaGVja2VkID0gb3BlblByb2plY3RbJ3Rhc2tzJ11baV1bJ2lzQ29tcGxldGVkJ11cblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY2xlYXJUYXNrTGlzdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBjb25zdCBpbmRpdmlkdWFsVGFzayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbmRpdmlkdWFsLXRhc2snKVxuICAgICAgIFxuICAgICAgICBpbmRpdmlkdWFsVGFzay5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICAgICAgICBhbGxUYXNrcy5yZW1vdmVDaGlsZCh0YXNrKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGNvbnN0IGdlbmVyYXRlRHVlUHJvamVjdHMgPSBmdW5jdGlvbiAoZHVlVHlwZSkge1xuICAgICAgICBcbiAgICAgICAgbWFpbkNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICBkdWVDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnZmxleCdcbiAgICAgICBcbiAgICAgICAgd2hpbGUgKGR1ZVByb2plY3RMaXN0Lmhhc0NoaWxkTm9kZXMoKSl7XG4gICAgICAgICAgICBkdWVQcm9qZWN0TGlzdC5yZW1vdmVDaGlsZChkdWVQcm9qZWN0TGlzdC5maXJzdENoaWxkKVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhZGRQcm9qZWN0TGlzdC5teVByb2plY3RBcnJheS5sZW5ndGg7IGkrKyl7XG5cbiAgICAgICAgICAgIGxldCBkYXRlID0gbmV3IERhdGUoYCR7YWRkUHJvamVjdExpc3QubXlQcm9qZWN0QXJyYXlbaV1bJ2RhdGUnXX1gICsgYENEVGApXG5cbiAgICAgICAgICAgIGlmIChkdWVUeXBlID09ICdpc1RvZGF5Jykge1xuXG4gICAgICAgICAgICAgICAgZHVlVGl0bGUudGV4dENvbnRlbnQgPSAnRHVlIFRvZGF5J1xuXG4gICAgICAgICAgICAgICAgaWYgKGlzVG9kYXkobmV3IERhdGUoZGF0ZSkpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZHVlUHJvamVjdERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgICAgICAgICAgICAgIGR1ZVByb2plY3REaXYuY2xhc3NMaXN0LmFkZCgnZHVlLXByb2plY3QnKVxuICAgICAgICAgICAgICAgICAgICBkdWVQcm9qZWN0TGlzdC5hcHBlbmRDaGlsZChkdWVQcm9qZWN0RGl2KVxuICAgICAgICAgICAgICAgICAgICBkdWVQcm9qZWN0RGl2LnRleHRDb250ZW50ID0gYWRkUHJvamVjdExpc3QubXlQcm9qZWN0QXJyYXlbaV1bJ3RpdGxlJ11cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGR1ZVR5cGUgPT0gJ2lzVGhpc1dlZWsnKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZHVlVGl0bGUudGV4dENvbnRlbnQgPSAnRHVlIFRoaXMgV2VlaydcblxuICAgICAgICAgICAgICAgIGlmIChpc1RoaXNXZWVrKG5ldyBEYXRlKGRhdGUpKSkge1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGR1ZVByb2plY3REaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICAgICAgICAgICAgICBkdWVQcm9qZWN0RGl2LmNsYXNzTGlzdC5hZGQoJ2R1ZS1wcm9qZWN0JylcbiAgICAgICAgICAgICAgICAgICAgZHVlUHJvamVjdExpc3QuYXBwZW5kQ2hpbGQoZHVlUHJvamVjdERpdilcbiAgICAgICAgICAgICAgICAgICAgZHVlUHJvamVjdERpdi50ZXh0Q29udGVudCA9IGFkZFByb2plY3RMaXN0Lm15UHJvamVjdEFycmF5W2ldWyd0aXRsZSddXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSAgXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBnZW5lcmF0ZVByaW9yaXR5UHJvamVjdHMgPSBmdW5jdGlvbiAocHJpb3JpdHkpIHtcblxuICAgICAgICBtYWluQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgIGR1ZUNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdmbGV4J1xuICAgICAgIFxuICAgICAgICB3aGlsZSAoZHVlUHJvamVjdExpc3QuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgICAgICAgICBkdWVQcm9qZWN0TGlzdC5yZW1vdmVDaGlsZChkdWVQcm9qZWN0TGlzdC5maXJzdENoaWxkKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHByaW9yaXR5ID09ICdsb3cnKSB7XG5cbiAgICAgICAgICAgIGR1ZVRpdGxlLnRleHRDb250ZW50ID0gJ0xvdyBQcmlvcml0eSBQcm9qZWN0cydcblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhZGRQcm9qZWN0TGlzdC5teVByb2plY3RBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChhZGRQcm9qZWN0TGlzdC5teVByb2plY3RBcnJheVtpXVsncHJpb3JpdHknXSA9PSAnTG93Jykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkdWVQcm9qZWN0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgICAgICAgICAgICAgZHVlUHJvamVjdERpdi5jbGFzc0xpc3QuYWRkKCdkdWUtcHJvamVjdCcpXG4gICAgICAgICAgICAgICAgICAgIGR1ZVByb2plY3RMaXN0LmFwcGVuZENoaWxkKGR1ZVByb2plY3REaXYpXG4gICAgICAgICAgICAgICAgICAgIGR1ZVByb2plY3REaXYudGV4dENvbnRlbnQgPSBhZGRQcm9qZWN0TGlzdC5teVByb2plY3RBcnJheVtpXVsndGl0bGUnXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChwcmlvcml0eSA9PSAnbWVkJykge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBkdWVUaXRsZS50ZXh0Q29udGVudCA9ICdNZWRpdW0gUHJpb3JpdHkgUHJvamVjdHMnXG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWRkUHJvamVjdExpc3QubXlQcm9qZWN0QXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoYWRkUHJvamVjdExpc3QubXlQcm9qZWN0QXJyYXlbaV1bJ3ByaW9yaXR5J10gPT0gJ01lZGl1bScpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZHVlUHJvamVjdERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgICAgICAgICAgICAgIGR1ZVByb2plY3REaXYuY2xhc3NMaXN0LmFkZCgnZHVlLXByb2plY3QnKVxuICAgICAgICAgICAgICAgICAgICBkdWVQcm9qZWN0TGlzdC5hcHBlbmRDaGlsZChkdWVQcm9qZWN0RGl2KVxuICAgICAgICAgICAgICAgICAgICBkdWVQcm9qZWN0RGl2LnRleHRDb250ZW50ID0gYWRkUHJvamVjdExpc3QubXlQcm9qZWN0QXJyYXlbaV1bJ3RpdGxlJ11cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocHJpb3JpdHkgPT0gJ2hpZ2gnKSB7XG4gICAgICAgICAgICBkdWVUaXRsZS50ZXh0Q29udGVudCA9ICdIaWdoIFByaW9yaXR5IFByb2plY3RzJ1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFkZFByb2plY3RMaXN0Lm15UHJvamVjdEFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGFkZFByb2plY3RMaXN0Lm15UHJvamVjdEFycmF5W2ldWydwcmlvcml0eSddID09ICdIaWdoJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkdWVQcm9qZWN0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgICAgICAgICAgICAgZHVlUHJvamVjdERpdi5jbGFzc0xpc3QuYWRkKCdkdWUtcHJvamVjdCcpXG4gICAgICAgICAgICAgICAgICAgIGR1ZVByb2plY3RMaXN0LmFwcGVuZENoaWxkKGR1ZVByb2plY3REaXYpXG4gICAgICAgICAgICAgICAgICAgIGR1ZVByb2plY3REaXYudGV4dENvbnRlbnQgPSBhZGRQcm9qZWN0TGlzdC5teVByb2plY3RBcnJheVtpXVsndGl0bGUnXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBwcm9qZWN0c0xpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAocHJvamVjdCkgPT4ge1xuICAgICAgICBpZiAoKHByb2plY3QudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncHJvamVjdCcpKSB8fFxuICAgICAgICAgICAgKHByb2plY3QudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZGVsZXRlU1ZHJykpIHx8XG4gICAgICAgICAgICAocHJvamVjdC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlZGl0U1ZHJykpKSB7XG4gICAgICAgIFxuICAgICAgICAgICAgdGFyZ2V0UHJvamVjdCA9IHByb2plY3QudGFyZ2V0LmNsb3Nlc3QoJy5wcm9qZWN0LWRpc3BsYXknKVxuICAgICAgICAgICAgaW5kZXggPSBBcnJheS5mcm9tKHRhcmdldFByb2plY3QucGFyZW50Tm9kZS5jaGlsZHJlbikuaW5kZXhPZih0YXJnZXRQcm9qZWN0KVxuICAgICAgICAgICAgb3BlblByb2plY3QgPSBhZGRQcm9qZWN0TGlzdC5teVByb2plY3RBcnJheVtpbmRleF1cbiAgICAgICAgfVxuICAgIH0pXG4gICAgIFxuICAgIC8vIEV2ZW50IGhhbmRsZXIgd2hlbiBhIHByb2plY3QgaXMgZGVsZXRlZFxuICAgIHByb2plY3RzTGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChwcm9qZWN0KSA9PiB7XG4gICAgICAgIGlmIChwcm9qZWN0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2RlbGV0ZVNWRycpKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0RGl2ID0gcHJvamVjdC50YXJnZXQuY2xvc2VzdCgnLnByb2plY3QtZGlzcGxheScpXG4gICAgICAgICAgICBkZWxldGVQcm9qZWN0KGluZGV4KVxuICAgICAgICAgICAgcHJvamVjdHNMaXN0LnJlbW92ZUNoaWxkKHByb2plY3REaXYpXG4gICAgICAgICAgICBzdG9yYWdlLnN0b3JlRGF0YSgpICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gRXZlbnQgaGFuZGxlciB3aGVuIGEgcHJvamVjdCBlZGl0IGJ1dHRvbiBpcyBjbGlja2VkXG4gICAgcHJvamVjdHNMaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKHByb2plY3QpID0+IHtcblxuICAgICAgICBpZiAocHJvamVjdC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlZGl0U1ZHJykpIHtcblxuICAgICAgICAgICAgYWRkUHJvamVjdExpc3QuZGlzcGxheUVkaXRGb3JtKGluZGV4KVxuXG4gICAgICAgICAgICB0YXJnZXRQcm9qZWN0VGl0bGUgPSB0YXJnZXRQcm9qZWN0LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0JylcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBFdmVudCBoYW5kbGVyIHdoZW4gYSBwcm9qZWN0IGlzIGNsaWNrZWRcbiAgICBwcm9qZWN0c0xpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAocHJvamVjdCkgPT4ge1xuICAgICAgICBpZiAocHJvamVjdC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwcm9qZWN0JykpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbWFpbkNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdmbGV4J1xuICAgICAgICAgICAgZHVlQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG5cbiAgICAgICAgICAgIHByb2plY3RUaXRsZS50ZXh0Q29udGVudCA9IG9wZW5Qcm9qZWN0Wyd0aXRsZSddXG4gICAgICAgICAgICBwcm9qZWN0RGVzY3JpcHRpb24udGV4dENvbnRlbnQgID0gb3BlblByb2plY3RbJ2Rlc2NyaXB0aW9uJ11cbiAgICAgICAgICAgIHByb2plY3REdWUudGV4dENvbnRlbnQgID0gb3BlblByb2plY3RbJ2RhdGUnXVxuICAgICAgICAgICAgcHJvamVjdFByaW9yaXR5LnRleHRDb250ZW50ID0gYChgK2Ake29wZW5Qcm9qZWN0Wydwcmlvcml0eSddfWBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2xlYXJUYXNrTGlzdCgpXG4gICAgICAgICAgICBnZW5lcmF0ZVRhc2tMaXN0KClcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICBhbGxUYXNrcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICBpZiAoKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Rhc2stY2hlY2tib3gnKSkgfHxcbiAgICAgICAgICAgIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXNrLWlucHV0JykpIHx8XG4gICAgICAgICAgICAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZGVsZXRlU1ZHJykpKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCB0YXJnZXRUYXNrID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy5pbmRpdmlkdWFsLXRhc2snKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0YXNrSW5kZXggPSBBcnJheS5mcm9tKHRhcmdldFRhc2sucGFyZW50Tm9kZS5jaGlsZHJlbikuaW5kZXhPZih0YXJnZXRUYXNrKVxuICAgICAgICB9XG4gICAgfSlcblxuICAgIC8vIEV2ZW50IGhhbmRsZXIgZm9yIG5ldyB0YXNrIGNyZWF0aW9uXG4gICAgdGFza0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBcbiAgICAgICAgZ2VuZXJhdGVOZXdUYXNrKClcbiAgICBcbiAgICAgICAgbGV0IHRhc2tOYW1lXG4gICAgICAgIGxldCBpc0NvbXBsZXRlZCBcbiAgICAgICBcbiAgICAgICAgYWxsVGFza3MuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGV2ZW50KSA9PiB7XG5cbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXNrLWNoZWNrYm94JykpIHtcblxuICAgICAgICAgICAgICAgIGlzQ29tcGxldGVkID0gZXZlbnQudGFyZ2V0LmNoZWNrZWRcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gZ2VuZXJhdGVUYXNrT2JqZWN0KHRhc2tOYW1lLCBpc0NvbXBsZXRlZClcbiAgICAgICAgICAgICAgICBhZGRQcm9qZWN0TGlzdC5teVByb2plY3RBcnJheVtpbmRleF1bJ3Rhc2tzJ11bdGFza0luZGV4XSA9IHRhc2tPYmplY3RcbiAgICAgICAgICAgICAgICBzdG9yYWdlLnN0b3JlRGF0YSgpXG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygndGFzay1pbnB1dCcpKSB7XG5cbiAgICAgICAgICAgICAgICB0YXNrTmFtZSA9IGV2ZW50LnRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBnZW5lcmF0ZVRhc2tPYmplY3QodGFza05hbWUsIGlzQ29tcGxldGVkKVxuICAgICAgICAgICAgICAgIGFkZFByb2plY3RMaXN0Lm15UHJvamVjdEFycmF5W2luZGV4XVsndGFza3MnXVt0YXNrSW5kZXhdID0gdGFza09iamVjdFxuICAgICAgICAgICAgICAgIHN0b3JhZ2Uuc3RvcmVEYXRhKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9KVxuXG4gICAgLy8gRXZlbnQgaGFuZGxlciBmb3IgZGVsZXRpbmcgYSB0YXNrXG4gICAgYWxsVGFza3MuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2RlbGV0ZVNWRycpKSB7XG5cbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUYXNrID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy5pbmRpdmlkdWFsLXRhc2snKVxuICAgICAgICAgICAgYWRkUHJvamVjdExpc3QubXlQcm9qZWN0QXJyYXlbaW5kZXhdWyd0YXNrcyddLnNwbGljZSh0YXNrSW5kZXgsMSlcbiAgICAgICAgICAgIGFsbFRhc2tzLnJlbW92ZUNoaWxkKGN1cnJlbnRUYXNrKVxuICAgICAgICAgICAgc3RvcmFnZS5zdG9yZURhdGEoKVxuICAgICAgICB9XG4gICAgfSkgXG5cbiAgICAvLyBFdmVudCBoYW5kbGVyIGZvciBzb3J0aW5nIGJ5IGR1ZSBkYXRlXG4gICAgZHVlVG9kYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGdlbmVyYXRlRHVlUHJvamVjdHMoJ2lzVG9kYXknKVxuICAgIH0pXG5cbiAgICAvLyBFdmVudCBoYW5kbGVyIGZvciBzb3J0aW5nIGJ5IGR1ZSBkYXRlXG4gICAgZHVlVGhpc1dlZWsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICBnZW5lcmF0ZUR1ZVByb2plY3RzKCdpc1RoaXNXZWVrJykgICAgICAgXG4gICAgfSlcblxuICAgIC8vIEV2ZW50IGhhbmRsZXIgZm9yIHNvcnRpbmcgYnkgcHJpb3JpdHkgXG4gICAgcHJpb3JpdHlUYWIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3ByaW9yaXR5LWxvdycpKSB7XG4gICAgICAgICAgICBnZW5lcmF0ZVByaW9yaXR5UHJvamVjdHMoJ2xvdycpXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncHJpb3JpdHktbWVkJykpIHtcbiAgICAgICAgICAgIGdlbmVyYXRlUHJpb3JpdHlQcm9qZWN0cygnbWVkJylcbiAgICAgICAgfSBlbHNlIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwcmlvcml0eS1oaWdoJykpIHtcbiAgICAgICAgICAgIGdlbmVyYXRlUHJpb3JpdHlQcm9qZWN0cygnaGlnaCcpXG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgY3JlYXRlUHJvamVjdERpdixcbiAgICAgICAgZWRpdFByb2plY3REaXYsXG4gICAgICAgIGRlbGV0ZVByb2plY3QsXG4gICAgICAgIGluZGV4XG4gICAgfVxuXG59KSgpO1xuICAgIFxuZXhwb3J0IGRlZmF1bHQgZG9tIiwiaW1wb3J0IGRvbSBmcm9tICcuL0RPTSdcbmltcG9ydCBzdG9yYWdlIGZyb20gJy4vc3RvcmFnZSdcblxuY29uc3QgYWRkUHJvamVjdExpc3QgPSAoZnVuY3Rpb24gKCkge1xuXG4gICAgY29uc3QgYWRkUHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtcHJvamVjdCcpXG4gICAgY29uc3QgZWRpdFByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC1wcm9qZWN0JylcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC1wcm9qZWN0LWZvcm0nKVxuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RpdGxlJylcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkZXNjcmlwdGlvbicpXG4gICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXRlJylcbiAgICBjb25zdCBwcmlvcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcm9qZWN0LXByaW9yaXR5LWJ1dHRvbicpXG4gICAgY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZCcpXG4gICAgY29uc3QgY2FuY2VsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhbmNlbCcpXG4gICAgY29uc3QgZWRpdFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2VkaXQtdGl0bGUnKVxuICAgIGNvbnN0IGVkaXREZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlZGl0LWRlc2NyaXB0aW9uJylcbiAgICBjb25zdCBlZGl0RGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlZGl0LWRhdGUnKVxuICAgIGNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdCcpXG4gICAgY29uc3QgZWRpdENhbmNlbEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0LWNhbmNlbCcpXG5cbiAgICBsZXQgb3BlblByb2plY3RcbiAgICBsZXQgbXlQcm9qZWN0QXJyYXkgPSBbXVxuICAgIGxldCBwcmlvcml0eVZhbHVlID0gJ0xvdydcbiAgIFxuICAgIGNvbnN0IGRpc3BsYXlGb3JtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBcbiAgICAgICAgZm9ybS5yZXNldCgpXG4gICAgICAgIGFkZFByb2plY3Quc3R5bGUuZGlzcGxheSA9ICdmbGV4J1xuXG4gICAgICAgIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRpdGxlLnZhbHVlICE9ICcnKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1Byb2plY3QgPSBjcmVhdGVQcm9qZWN0KHRpdGxlLnZhbHVlLCBkZXNjcmlwdGlvbi52YWx1ZSwgZGF0ZS52YWx1ZSwgcHJpb3JpdHlWYWx1ZSlcbiAgICAgICAgICAgICAgICBteVByb2plY3RBcnJheS5wdXNoKG5ld1Byb2plY3QpXG4gICAgICAgICAgICAgICAgc3RvcmFnZS5zdG9yZURhdGEoKVxuICAgICAgICAgICAgICAgIGRvbS5jcmVhdGVQcm9qZWN0RGl2KClcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhteVByb2plY3RBcnJheSlcbiAgICAgICAgICAgICAgICBhZGRQcm9qZWN0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgICAgICAgICAgICBwcmlvcml0eVZhbHVlID0gJ0xvdydcbiAgICAgICAgICAgICAgICBmb3JtLnJlc2V0KClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBhZGRQcm9qZWN0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgICAgICAgIGZvcm0ucmVzZXQoKVxuICAgICAgICB9KVxuXG4gICAgICAgIGFkZFByb2plY3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQgPT0gYWRkUHJvamVjdCkge1xuICAgICAgICAgICAgICAgIGFkZFByb2plY3Quc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIHByaW9yaXR5LmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBwcmlvcml0eVZhbHVlID0gYnV0dG9uLnRleHRDb250ZW50XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocHJpb3JpdHlWYWx1ZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgY29uc3QgZGlzcGxheUVkaXRGb3JtID0gZnVuY3Rpb24gKGluZGV4KSB7XG5cbiAgICAgICAgZWRpdFByb2plY3Quc3R5bGUuZGlzcGxheSA9ICdmbGV4J1xuICAgICAgICBjb25zb2xlLmxvZyhpbmRleClcbiAgICAgICAgY29uc29sZS5sb2coZG9tLmluZGV4KVxuICAgICAgICBvcGVuUHJvamVjdCA9IG15UHJvamVjdEFycmF5W2luZGV4XVxuXG4gICAgICAgIGVkaXRUaXRsZS52YWx1ZSA9IG9wZW5Qcm9qZWN0Wyd0aXRsZSddXG4gICAgICAgIGVkaXREZXNjcmlwdGlvbi52YWx1ZSA9IG9wZW5Qcm9qZWN0WydkZXNjcmlwdGlvbiddXG4gICAgICAgIGVkaXREYXRlLnZhbHVlID0gb3BlblByb2plY3RbJ2RhdGUnXVxuXG4gICAgICAgIGVkaXRDYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBlZGl0UHJvamVjdC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgICAgICBmb3JtLnJlc2V0KClcbiAgICAgICAgfSlcblxuICAgICAgICBlZGl0UHJvamVjdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PSBlZGl0UHJvamVjdCkge1xuICAgICAgICAgICAgICAgIGVkaXRQcm9qZWN0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgIH1cblxuICAgIGNvbnN0IGNyZWF0ZVByb2plY3QgPSBmdW5jdGlvbiAodGl0bGUsIGRlc2NyaXB0aW9uLCBkYXRlLCBwcmlvcml0eSkge1xuICAgICAgICBsZXQgdGFza3MgPSBbXVxuICAgICAgICByZXR1cm4ge3RpdGxlLGRlc2NyaXB0aW9uLGRhdGUscHJpb3JpdHksdGFza3N9XG4gICAgfVxuXG4gICAgZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBvcGVuUHJvamVjdFsndGl0bGUnXSA9IGVkaXRUaXRsZS52YWx1ZVxuICAgICAgICBvcGVuUHJvamVjdFsnZGVzY3JpcHRpb24nXSA9IGVkaXREZXNjcmlwdGlvbi52YWx1ZSBcbiAgICAgICAgb3BlblByb2plY3RbJ2RhdGUnXSA9IGVkaXREYXRlLnZhbHVlXG5cbiAgICAgICAgZWRpdFByb2plY3Quc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICBzdG9yYWdlLnN0b3JlRGF0YSgpXG4gICAgICAgIGRvbS5lZGl0UHJvamVjdERpdigpXG4gICAgICAgIGZvcm0ucmVzZXQoKVxuICAgIH0pXG5cbiAgICByZXR1cm4ge1xuICAgICAgICBhZGRQcm9qZWN0LFxuICAgICAgICBhZGRCdXR0b24sXG4gICAgICAgIGRpc3BsYXlGb3JtLFxuICAgICAgICB0aXRsZSxcbiAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgIGRhdGUsXG4gICAgICAgIHByaW9yaXR5LFxuICAgICAgICBteVByb2plY3RBcnJheSxcbiAgICAgICAgY3JlYXRlUHJvamVjdCxcbiAgICAgICAgZGlzcGxheUVkaXRGb3JtXG4gICAgfVxuXG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBhZGRQcm9qZWN0TGlzdFxuXG4iLCJpbXBvcnQgYWRkUHJvamVjdExpc3QgZnJvbSAnLi9hZGRQcm9qZWN0J1xuaW1wb3J0IGRvbSBmcm9tICcuL0RPTSdcbmltcG9ydCBzdG9yYWdlIGZyb20gJy4vc3RvcmFnZSdcblxuc3RvcmFnZS5wb3B1bGF0ZURhdGEoKVxuXG5jb25zb2xlLmxvZyhhZGRQcm9qZWN0TGlzdC5teVByb2plY3RBcnJheSlcblxuY29uc3QgbmV3UHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LWJ1dHRvbicpXG5cbm5ld1Byb2plY3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhZGRQcm9qZWN0TGlzdC5kaXNwbGF5Rm9ybSlcblxuZG9tXG5cbiJdLCJuYW1lcyI6WyJyZXF1aXJlZEFyZ3MiLCJyZXF1aXJlZCIsImFyZ3MiLCJsZW5ndGgiLCJUeXBlRXJyb3IiLCJfdHlwZW9mIiwib2JqIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsInRvRGF0ZSIsImFyZ3VtZW50IiwiYXJndW1lbnRzIiwiYXJnU3RyIiwiT2JqZWN0IiwidG9TdHJpbmciLCJjYWxsIiwiRGF0ZSIsImdldFRpbWUiLCJjb25zb2xlIiwid2FybiIsIkVycm9yIiwic3RhY2siLCJOYU4iLCJzdGFydE9mRGF5IiwiZGlydHlEYXRlIiwiZGF0ZSIsInNldEhvdXJzIiwiaXNUb2RheSIsImRpcnR5RGF0ZUxlZnQiLCJkaXJ0eURhdGVSaWdodCIsImRhdGVMZWZ0U3RhcnRPZkRheSIsImRhdGVSaWdodFN0YXJ0T2ZEYXkiLCJpc1NhbWVEYXkiLCJub3ciLCJkZWZhdWx0T3B0aW9ucyIsImdldERlZmF1bHRPcHRpb25zIiwic3RhcnRPZldlZWsiLCJvcHRpb25zIiwiX3JlZiIsIl9yZWYyIiwiX3JlZjMiLCJfb3B0aW9ucyR3ZWVrU3RhcnRzT24iLCJfb3B0aW9ucyRsb2NhbGUiLCJfb3B0aW9ucyRsb2NhbGUkb3B0aW8iLCJfZGVmYXVsdE9wdGlvbnMkbG9jYWwiLCJfZGVmYXVsdE9wdGlvbnMkbG9jYWwyIiwid2Vla1N0YXJ0c09uIiwiZGlydHlOdW1iZXIiLCJudW1iZXIiLCJOdW1iZXIiLCJpc05hTiIsIk1hdGgiLCJjZWlsIiwiZmxvb3IiLCJ0b0ludGVnZXIiLCJsb2NhbGUiLCJSYW5nZUVycm9yIiwiZGF5IiwiZ2V0RGF5IiwiZGlmZiIsInNldERhdGUiLCJnZXREYXRlIiwiaXNUaGlzV2VlayIsImRhdGVMZWZ0U3RhcnRPZldlZWsiLCJkYXRlUmlnaHRTdGFydE9mV2VlayIsImlzU2FtZVdlZWsiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic3RvcmFnZUFycmF5IiwiSlNPTiIsInBhcnNlIiwiaSIsImFkZFByb2plY3QiLCJsb2ciLCJzZXRJdGVtIiwic3RyaW5naWZ5Iiwib3BlblByb2plY3QiLCJ0YXJnZXRQcm9qZWN0IiwidGFyZ2V0UHJvamVjdFRpdGxlIiwiaW5kZXgiLCJ0YXNrSW5kZXgiLCJwcm9qZWN0c0xpc3QiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJtYWluQ29udGVudCIsImR1ZUNvbnRlbnQiLCJwcm9qZWN0VGl0bGUiLCJwcm9qZWN0RGVzY3JpcHRpb24iLCJwcm9qZWN0RHVlIiwicHJvamVjdFByaW9yaXR5IiwidGFza0J1dHRvbiIsImFsbFRhc2tzIiwiZHVlVG9kYXkiLCJkdWVUaGlzV2VlayIsImR1ZVRpdGxlIiwiZHVlUHJvamVjdExpc3QiLCJwcmlvcml0eVRhYiIsImRlbGV0ZVByb2plY3QiLCJzdHlsZSIsImRpc3BsYXkiLCJnZW5lcmF0ZU5ld1Rhc2siLCJuZXdUYXNrIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZENoaWxkIiwibmV3Q2hlY2tib3giLCJpbm5lckhUTUwiLCJuZXdJbnB1dCIsInRhc2tEZWxldGVCdXR0b24iLCJnZW5lcmF0ZVRhc2tPYmplY3QiLCJ0YXNrTmFtZSIsImlzQ29tcGxldGVkIiwidW5kZWZpbmVkIiwiZ2VuZXJhdGVEdWVQcm9qZWN0cyIsImR1ZVR5cGUiLCJoYXNDaGlsZE5vZGVzIiwicmVtb3ZlQ2hpbGQiLCJmaXJzdENoaWxkIiwidGV4dENvbnRlbnQiLCJkdWVQcm9qZWN0RGl2IiwiZ2VuZXJhdGVQcmlvcml0eVByb2plY3RzIiwicHJpb3JpdHkiLCJhZGRFdmVudExpc3RlbmVyIiwicHJvamVjdCIsInRhcmdldCIsImNvbnRhaW5zIiwiY2xvc2VzdCIsIkFycmF5IiwiZnJvbSIsInBhcmVudE5vZGUiLCJjaGlsZHJlbiIsImluZGV4T2YiLCJwcm9qZWN0RGl2IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJ0YXNrIiwidGFza0lucHV0IiwiY2hlY2tCb3giLCJ2YWx1ZSIsImNoZWNrZWQiLCJnZW5lcmF0ZVRhc2tMaXN0IiwiZXZlbnQiLCJ0YXJnZXRUYXNrIiwidGFza09iamVjdCIsImN1cnJlbnRUYXNrIiwic3BsaWNlIiwiY3JlYXRlUHJvamVjdERpdiIsImRlbGV0ZVByb2plY3RCdXR0b24iLCJlZGl0UHJvamVjdEJ1dHRvbiIsInByb2plY3RUaXRsZURpdiIsImVkaXRQcm9qZWN0RGl2IiwiYWRkUHJvamVjdExpc3QiLCJlZGl0UHJvamVjdCIsImZvcm0iLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiYWRkQnV0dG9uIiwiY2FuY2VsQnV0dG9uIiwiZWRpdFRpdGxlIiwiZWRpdERlc2NyaXB0aW9uIiwiZWRpdERhdGUiLCJlZGl0QnV0dG9uIiwiZWRpdENhbmNlbEJ1dHRvbiIsIm15UHJvamVjdEFycmF5IiwicHJpb3JpdHlWYWx1ZSIsImNyZWF0ZVByb2plY3QiLCJ0YXNrcyIsInByZXZlbnREZWZhdWx0IiwicmVzZXQiLCJkaXNwbGF5Rm9ybSIsIm5ld1Byb2plY3QiLCJwdXNoIiwiYnV0dG9uIiwiZGlzcGxheUVkaXRGb3JtIl0sInNvdXJjZVJvb3QiOiIifQ==