(()=>{"use strict";function e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(n){e(1,arguments);var o=Object.prototype.toString.call(n);return n instanceof Date||"object"===t(n)&&"[object Date]"===o?new Date(n.getTime()):"number"==typeof n||"[object Number]"===o?new Date(n):("string"!=typeof n&&"[object String]"!==o||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function o(t){e(1,arguments);var o=n(t);return o.setHours(0,0,0,0),o}function r(t){return e(1,arguments),function(t,n){e(2,arguments);var r=o(t),c=o(n);return r.getTime()===c.getTime()}(t,Date.now())}var c={};function s(){return c}function a(t,o){var r,c,a,l,i,d,u,y;e(1,arguments);var p=s(),m=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}(null!==(r=null!==(c=null!==(a=null!==(l=null==o?void 0:o.weekStartsOn)&&void 0!==l?l:null==o||null===(i=o.locale)||void 0===i||null===(d=i.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==a?a:p.weekStartsOn)&&void 0!==c?c:null===(u=p.locale)||void 0===u||null===(y=u.options)||void 0===y?void 0:y.weekStartsOn)&&void 0!==r?r:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=n(t),f=v.getDay(),g=(f<m?7:0)+f-m;return v.setDate(v.getDate()-g),v.setHours(0,0,0,0),v}function l(t,n){return e(1,arguments),function(t,n,o){e(2,arguments);var r=a(t,o),c=a(n,o);return r.getTime()===c.getTime()}(t,Date.now(),n)}const i=function(){let e,t,n;const o=document.querySelector(".projects-lists"),c=document.querySelector(".main-content"),s=document.querySelector(".due-content"),a=document.querySelector(".project-title"),i=document.querySelector(".project-description"),d=document.querySelector(".project-due"),y=document.querySelector(".priority"),p=document.querySelector(".task-button"),m=document.querySelector(".all-tasks"),v=document.querySelector(".due-today"),f=document.querySelector(".due-this-week"),g=function(e){u.myProjectArray[e]===n&&(c.style.display="none"),u.myProjectArray.splice(e,1)},k=function(){const e=document.createElement("div");e.classList.add("individual-task"),m.appendChild(e);const t=document.createElement("div");t.classList.add("task-checkbox-div"),e.appendChild(t),t.innerHTML='<label for="task1-checkbox"></label><input type="checkbox" class = "task-checkbox" id="task1-checkbox" name="checkbox">';const n=document.createElement("div");n.classList.add("task-input-div"),e.appendChild(n),n.innerHTML='<label for="task1-input"></label><input type="text" class="task-input" id="task1-input" name="task" required>';const o=document.createElement("div");o.classList.add("task-delete-button"),e.appendChild(o),o.innerHTML='<svg class="deleteSVG" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path class="deleteSVG" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>'},S=function(e,t){return null==t&&(t=!1),{taskName:e,isCompleted:t}};return o.addEventListener("click",(t=>{if(t.target.classList.contains("project")||t.target.classList.contains("deleteSVG")||t.target.classList.contains("editSVG")){let n=t.target.closest(".project-display");e=Array.from(n.parentNode.children).indexOf(n)}})),o.addEventListener("click",(t=>{if(t.target.classList.contains("deleteSVG")){const n=t.target.closest(".project-display");g(e),o.removeChild(n)}})),o.addEventListener("click",(t=>{t.target.classList.contains("project")&&(c.style.display="flex",s.style.display="none",n=u.myProjectArray[e],console.log(n),a.textContent=n.title,i.textContent=n.description,d.textContent=n.date,y.textContent=n.priority,document.querySelectorAll(".individual-task").forEach((e=>{m.removeChild(e)})),function(){for(let e=0;e<n.tasks.length;e++){k();const t=document.querySelectorAll(".task-input"),o=document.querySelectorAll(".task-checkbox");t[e].value=n.tasks[e].taskName,o[e].checked=n.tasks[e].isCompleted}}())})),m.addEventListener("click",(e=>{if(e.target.classList.contains("task-checkbox")||e.target.classList.contains("task-input")||e.target.classList.contains("deleteSVG")){let n=e.target.closest(".individual-task");t=Array.from(n.parentNode.children).indexOf(n)}})),p.addEventListener("click",(()=>{let n,o;k(),m.addEventListener("change",(r=>{if(r.target.classList.contains("task-checkbox")){o=r.target.checked;const c=S(n,o);u.myProjectArray[e].tasks[t]=c}else if(r.target.classList.contains("task-input")){n=r.target.value;const c=S(n,o);u.myProjectArray[e].tasks[t]=c}}))})),m.addEventListener("click",(n=>{if(n.target.classList.contains("deleteSVG")){const o=n.target.closest(".individual-task");u.myProjectArray[e].tasks.splice(t,1),m.removeChild(o)}})),v.addEventListener("click",(()=>{const e=document.querySelector(".due-title");let t=[];c.style.display="none",s.style.display="flex",e.textContent="Due Today";for(let e=0;e<u.myProjectArray.length;e++){let n=new Date(`${u.myProjectArray[e].date}CDT`);r(new Date(n))&&t.push(u.myProjectArray[e])}console.log(t)})),f.addEventListener("click",(()=>{const e=document.querySelector(".due-title");let t=[];c.style.display="none",s.style.display="flex",e.textContent="Due Today";for(let e=0;e<u.myProjectArray.length;e++){let n=new Date(`${u.myProjectArray[e].date}CDT`);l(new Date(n))&&t.push(u.myProjectArray[e])}console.log(t)})),{createProjectDiv:function(){const e=document.createElement("button"),t=document.createElement("button"),n=document.createElement("div"),r=document.createElement("div");n.classList.add("project-display"),o.appendChild(n),r.classList.add("project"),r.textContent=u.myProjectArray[u.myProjectArray.length-1].title,n.appendChild(r),e.classList.add("delete-project-button"),e.innerHTML='<svg class="deleteSVG" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path class="deleteSVG" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',n.appendChild(e),t.classList.add("edit-project-button"),t.innerHTML='<svg class="editSVG" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path class="editSVG" d="M5,3C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19H5V5H12V3H5M17.78,4C17.61,4 17.43,4.07 17.3,4.2L16.08,5.41L18.58,7.91L19.8,6.7C20.06,6.44 20.06,6 19.8,5.75L18.25,4.2C18.12,4.07 17.95,4 17.78,4M15.37,6.12L8,13.5V16H10.5L17.87,8.62L15.37,6.12Z" /></svg>',n.appendChild(t)},deleteProject:g}}(),d=function(){const e=document.querySelector(".add-project"),t=document.querySelector(".add-project-form"),n=document.querySelector("#title"),o=document.querySelector("#description"),r=document.querySelector("#date"),c=document.querySelectorAll(".project-priority-button"),s=document.querySelector(".add"),a=document.querySelector(".cancel");let l=[],d="Low";return{addProject:e,displayForm:function(){e.style.display="flex",s.addEventListener("click",(c=>{if(""!=n.value){c.preventDefault();const s=function(e,t,n,o){return{title:e,description:t,date:n,priority:o,tasks:[]}}(n.value,o.value,r.value,d);l.push(s),i.createProjectDiv(),console.log(l),e.style.display="none",d="Low",t.reset()}})),a.addEventListener("click",(n=>{n.preventDefault(),e.style.display="none",t.reset()})),e.addEventListener("click",(t=>{t.target==e&&(e.style.display="none")})),c.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),d=e.textContent,console.log(d)}))}))},myProjectArray:l}}(),u=d,y=document.querySelector(".project-button");document.querySelector(".projects-lists"),y.addEventListener("click",u.displayForm)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SyxFQUFNUixNQUFhLENBQ25CRyxFQUFNcUIsaUJBQ04sTUFBTUMsRUErQkksU0FBVWpCLEVBQU9TLEVBQWFqSCxFQUFNa0gsR0FFdEQsTUFBTyxDQUFDVixRQUFNUyxjQUFZakgsT0FBS2tILFdBQVNRLE1BRDVCLEdBRWhCLENBbEMrQkMsQ0FBY25CLEVBQU1SLE1BQU9pQixFQUFZakIsTUFBT2hHLEVBQUtnRyxNQUFPc0IsR0FDN0VELEVBQWVYLEtBQUtlLEdBQ3BCLHFCQUNBaEksUUFBUStGLElBQUk2QixHQUNaM0QsRUFBV0MsTUFBTUMsUUFBVSxPQUMzQjBELEVBQWdCLE1BQ2hCTixFQUFLWSxPQUNULEtBR0pSLEVBQWF6QyxpQkFBaUIsU0FBVXdCLElBQ3BDQSxFQUFNcUIsaUJBQ045RCxFQUFXQyxNQUFNQyxRQUFVLE9BQzNCb0QsRUFBS1ksT0FBTSxJQUdmbEUsRUFBV2lCLGlCQUFpQixTQUFVd0IsSUFDOUJBLEVBQU10QixRQUFVbkIsSUFDaEJBLEVBQVdDLE1BQU1DLFFBQVUsT0FDL0IsSUFHSnNELEVBQVN2QixTQUFTa0MsSUFDZEEsRUFBT2xELGlCQUFpQixTQUFVd0IsSUFDOUJBLEVBQU1xQixpQkFDTkYsRUFBZ0JPLEVBQU9wQyxZQUN2QmhHLFFBQVErRixJQUFJOEIsRUFBYSxHQUM1QixHQUVULEVBVUlELGlCQUdQLENBL0RzQixHQWlFdkIsSUNoRU1JLEVBQWE1RSxTQUFTQyxjQUFjLG1CQUNwQkQsU0FBU0MsY0FBYyxtQkFJN0MyRSxFQUFXOUMsaUJBQWlCLFFBQVNqQixFQUFBLFkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vdG9EYXRlL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vc3RhcnRPZkRheS9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzVG9kYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9pc1NhbWVEYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL2RlZmF1bHRPcHRpb25zL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vc3RhcnRPZldlZWsvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL3RvSW50ZWdlci9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzVGhpc1dlZWsvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9pc1NhbWVXZWVrL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9ET00uanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2FkZFByb2plY3QuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlcXVpcmVkQXJncyhyZXF1aXJlZCwgYXJncykge1xuICBpZiAoYXJncy5sZW5ndGggPCByZXF1aXJlZCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocmVxdWlyZWQgKyAnIGFyZ3VtZW50JyArIChyZXF1aXJlZCA+IDEgPyAncycgOiAnJykgKyAnIHJlcXVpcmVkLCBidXQgb25seSAnICsgYXJncy5sZW5ndGggKyAnIHByZXNlbnQnKTtcbiAgfVxufSIsImZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgdG9EYXRlXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhbiBpbnN0YW5jZSBvZiBEYXRlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBpdHMgY2xvbmUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGEgbnVtYmVyLCBpdCBpcyB0cmVhdGVkIGFzIGEgdGltZXN0YW1wLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBub25lIG9mIHRoZSBhYm92ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgSW52YWxpZCBEYXRlLlxuICpcbiAqICoqTm90ZSoqOiAqYWxsKiBEYXRlIGFyZ3VtZW50cyBwYXNzZWQgdG8gYW55ICpkYXRlLWZucyogZnVuY3Rpb24gaXMgcHJvY2Vzc2VkIGJ5IGB0b0RhdGVgLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGFyZ3VtZW50IC0gdGhlIHZhbHVlIHRvIGNvbnZlcnRcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgcGFyc2VkIGRhdGUgaW4gdGhlIGxvY2FsIHRpbWUgem9uZVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENsb25lIHRoZSBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gdG9EYXRlKG5ldyBEYXRlKDIwMTQsIDEsIDExLCAxMSwgMzAsIDMwKSlcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENvbnZlcnQgdGhlIHRpbWVzdGFtcCB0byBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gdG9EYXRlKDEzOTIwOTg0MzAwMDApXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvRGF0ZShhcmd1bWVudCkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGFyZ1N0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudCk7IC8vIENsb25lIHRoZSBkYXRlXG5cbiAgaWYgKGFyZ3VtZW50IGluc3RhbmNlb2YgRGF0ZSB8fCBfdHlwZW9mKGFyZ3VtZW50KSA9PT0gJ29iamVjdCcgJiYgYXJnU3RyID09PSAnW29iamVjdCBEYXRlXScpIHtcbiAgICAvLyBQcmV2ZW50IHRoZSBkYXRlIHRvIGxvc2UgdGhlIG1pbGxpc2Vjb25kcyB3aGVuIHBhc3NlZCB0byBuZXcgRGF0ZSgpIGluIElFMTBcbiAgICByZXR1cm4gbmV3IERhdGUoYXJndW1lbnQuZ2V0VGltZSgpKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgYXJndW1lbnQgPT09ICdudW1iZXInIHx8IGFyZ1N0ciA9PT0gJ1tvYmplY3QgTnVtYmVyXScpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoYXJndW1lbnQpO1xuICB9IGVsc2Uge1xuICAgIGlmICgodHlwZW9mIGFyZ3VtZW50ID09PSAnc3RyaW5nJyB8fCBhcmdTdHIgPT09ICdbb2JqZWN0IFN0cmluZ10nKSAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBjb25zb2xlLndhcm4oXCJTdGFydGluZyB3aXRoIHYyLjAuMC1iZXRhLjEgZGF0ZS1mbnMgZG9lc24ndCBhY2NlcHQgc3RyaW5ncyBhcyBkYXRlIGFyZ3VtZW50cy4gUGxlYXNlIHVzZSBgcGFyc2VJU09gIHRvIHBhcnNlIHN0cmluZ3MuIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdXBncmFkZUd1aWRlLm1kI3N0cmluZy1hcmd1bWVudHNcIik7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG5cbiAgICAgIGNvbnNvbGUud2FybihuZXcgRXJyb3IoKS5zdGFjayk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIH1cbn0iLCJpbXBvcnQgdG9EYXRlIGZyb20gXCIuLi90b0RhdGUvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIHN0YXJ0T2ZEYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgUmV0dXJuIHRoZSBzdGFydCBvZiBhIGRheSBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgZGF5IGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqIFRoZSByZXN1bHQgd2lsbCBiZSBpbiB0aGUgbG9jYWwgdGltZXpvbmUuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBvcmlnaW5hbCBkYXRlXG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHN0YXJ0IG9mIGEgZGF5XG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVGhlIHN0YXJ0IG9mIGEgZGF5IGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZkRheShuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApKVxuICogLy89PiBUdWUgU2VwIDAyIDIwMTQgMDA6MDA6MDBcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzdGFydE9mRGF5KGRpcnR5RGF0ZSkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGUgPSB0b0RhdGUoZGlydHlEYXRlKTtcbiAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIGRhdGU7XG59IiwiaW1wb3J0IGlzU2FtZURheSBmcm9tIFwiLi4vaXNTYW1lRGF5L2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBpc1RvZGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IElzIHRoZSBnaXZlbiBkYXRlIHRvZGF5P1xuICogQHB1cmUgZmFsc2VcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIElzIHRoZSBnaXZlbiBkYXRlIHRvZGF5P1xuICpcbiAqID4g4pqg77iPIFBsZWFzZSBub3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBpcyBub3QgcHJlc2VudCBpbiB0aGUgRlAgc3VibW9kdWxlIGFzXG4gKiA+IGl0IHVzZXMgYERhdGUubm93KClgIGludGVybmFsbHkgaGVuY2UgaW1wdXJlIGFuZCBjYW4ndCBiZSBzYWZlbHkgY3VycmllZC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIGRhdGUgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZSBpcyB0b2RheVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRvZGF5IGlzIDYgT2N0b2JlciAyMDE0LCBpcyA2IE9jdG9iZXIgMTQ6MDA6MDAgdG9kYXk/XG4gKiBjb25zdCByZXN1bHQgPSBpc1RvZGF5KG5ldyBEYXRlKDIwMTQsIDksIDYsIDE0LCAwKSlcbiAqIC8vPT4gdHJ1ZVxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVG9kYXkoZGlydHlEYXRlKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICByZXR1cm4gaXNTYW1lRGF5KGRpcnR5RGF0ZSwgRGF0ZS5ub3coKSk7XG59IiwiaW1wb3J0IHN0YXJ0T2ZEYXkgZnJvbSBcIi4uL3N0YXJ0T2ZEYXkvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIGlzU2FtZURheVxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIGRheSAoYW5kIHllYXIgYW5kIG1vbnRoKT9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgZGF5IChhbmQgeWVhciBhbmQgbW9udGgpP1xuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVMZWZ0IC0gdGhlIGZpcnN0IGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVSaWdodCAtIHRoZSBzZWNvbmQgZGF0ZSB0byBjaGVja1xuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlcyBhcmUgaW4gdGhlIHNhbWUgZGF5IChhbmQgeWVhciBhbmQgbW9udGgpXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDIgYXJndW1lbnRzIHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSA0IFNlcHRlbWJlciAwNjowMDowMCBhbmQgNCBTZXB0ZW1iZXIgMTg6MDA6MDAgaW4gdGhlIHNhbWUgZGF5P1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQsIDYsIDApLCBuZXcgRGF0ZSgyMDE0LCA4LCA0LCAxOCwgMCkpXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDQgU2VwdGVtYmVyIGFuZCA0IE9jdG9iZXIgaW4gdGhlIHNhbWUgZGF5P1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQpLCBuZXcgRGF0ZSgyMDE0LCA5LCA0KSlcbiAqIC8vPT4gZmFsc2VcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDQgU2VwdGVtYmVyLCAyMDE0IGFuZCA0IFNlcHRlbWJlciwgMjAxNSBpbiB0aGUgc2FtZSBkYXk/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVEYXkobmV3IERhdGUoMjAxNCwgOCwgNCksIG5ldyBEYXRlKDIwMTUsIDgsIDQpKVxuICogLy89PiBmYWxzZVxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzU2FtZURheShkaXJ0eURhdGVMZWZ0LCBkaXJ0eURhdGVSaWdodCkge1xuICByZXF1aXJlZEFyZ3MoMiwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGVMZWZ0U3RhcnRPZkRheSA9IHN0YXJ0T2ZEYXkoZGlydHlEYXRlTGVmdCk7XG4gIHZhciBkYXRlUmlnaHRTdGFydE9mRGF5ID0gc3RhcnRPZkRheShkaXJ0eURhdGVSaWdodCk7XG4gIHJldHVybiBkYXRlTGVmdFN0YXJ0T2ZEYXkuZ2V0VGltZSgpID09PSBkYXRlUmlnaHRTdGFydE9mRGF5LmdldFRpbWUoKTtcbn0iLCJ2YXIgZGVmYXVsdE9wdGlvbnMgPSB7fTtcbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0T3B0aW9ucygpIHtcbiAgcmV0dXJuIGRlZmF1bHRPcHRpb25zO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNldERlZmF1bHRPcHRpb25zKG5ld09wdGlvbnMpIHtcbiAgZGVmYXVsdE9wdGlvbnMgPSBuZXdPcHRpb25zO1xufSIsImltcG9ydCB0b0RhdGUgZnJvbSBcIi4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHRvSW50ZWdlciBmcm9tIFwiLi4vX2xpYi90b0ludGVnZXIvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBnZXREZWZhdWx0T3B0aW9ucyB9IGZyb20gXCIuLi9fbGliL2RlZmF1bHRPcHRpb25zL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIHN0YXJ0T2ZXZWVrXG4gKiBAY2F0ZWdvcnkgV2VlayBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgd2VlayBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgd2VlayBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgb3JpZ2luYWwgZGF0ZVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMuXG4gKiBAcGFyYW0ge0xvY2FsZX0gW29wdGlvbnMubG9jYWxlPWRlZmF1bHRMb2NhbGVdIC0gdGhlIGxvY2FsZSBvYmplY3QuIFNlZSBbTG9jYWxlXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL0xvY2FsZX1cbiAqIEBwYXJhbSB7MHwxfDJ8M3w0fDV8Nn0gW29wdGlvbnMud2Vla1N0YXJ0c09uPTBdIC0gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsgKDAgLSBTdW5kYXkpXG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHN0YXJ0IG9mIGEgd2Vla1xuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy53ZWVrU3RhcnRzT25gIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApKVxuICogLy89PiBTdW4gQXVnIDMxIDIwMTQgMDA6MDA6MDBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdGhlIHdlZWsgc3RhcnRzIG9uIE1vbmRheSwgdGhlIHN0YXJ0IG9mIHRoZSB3ZWVrIGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZldlZWsobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSwgeyB3ZWVrU3RhcnRzT246IDEgfSlcbiAqIC8vPT4gTW9uIFNlcCAwMSAyMDE0IDAwOjAwOjAwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3RhcnRPZldlZWsoZGlydHlEYXRlLCBvcHRpb25zKSB7XG4gIHZhciBfcmVmLCBfcmVmMiwgX3JlZjMsIF9vcHRpb25zJHdlZWtTdGFydHNPbiwgX29wdGlvbnMkbG9jYWxlLCBfb3B0aW9ucyRsb2NhbGUkb3B0aW8sIF9kZWZhdWx0T3B0aW9ucyRsb2NhbCwgX2RlZmF1bHRPcHRpb25zJGxvY2FsMjtcblxuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGRlZmF1bHRPcHRpb25zID0gZ2V0RGVmYXVsdE9wdGlvbnMoKTtcbiAgdmFyIHdlZWtTdGFydHNPbiA9IHRvSW50ZWdlcigoX3JlZiA9IChfcmVmMiA9IChfcmVmMyA9IChfb3B0aW9ucyR3ZWVrU3RhcnRzT24gPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMud2Vla1N0YXJ0c09uKSAhPT0gbnVsbCAmJiBfb3B0aW9ucyR3ZWVrU3RhcnRzT24gIT09IHZvaWQgMCA/IF9vcHRpb25zJHdlZWtTdGFydHNPbiA6IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9vcHRpb25zJGxvY2FsZSA9IG9wdGlvbnMubG9jYWxlKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRsb2NhbGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfb3B0aW9ucyRsb2NhbGUkb3B0aW8gPSBfb3B0aW9ucyRsb2NhbGUub3B0aW9ucykgPT09IG51bGwgfHwgX29wdGlvbnMkbG9jYWxlJG9wdGlvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3B0aW9ucyRsb2NhbGUkb3B0aW8ud2Vla1N0YXJ0c09uKSAhPT0gbnVsbCAmJiBfcmVmMyAhPT0gdm9pZCAwID8gX3JlZjMgOiBkZWZhdWx0T3B0aW9ucy53ZWVrU3RhcnRzT24pICE9PSBudWxsICYmIF9yZWYyICE9PSB2b2lkIDAgPyBfcmVmMiA6IChfZGVmYXVsdE9wdGlvbnMkbG9jYWwgPSBkZWZhdWx0T3B0aW9ucy5sb2NhbGUpID09PSBudWxsIHx8IF9kZWZhdWx0T3B0aW9ucyRsb2NhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kZWZhdWx0T3B0aW9ucyRsb2NhbDIgPSBfZGVmYXVsdE9wdGlvbnMkbG9jYWwub3B0aW9ucykgPT09IG51bGwgfHwgX2RlZmF1bHRPcHRpb25zJGxvY2FsMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RlZmF1bHRPcHRpb25zJGxvY2FsMi53ZWVrU3RhcnRzT24pICE9PSBudWxsICYmIF9yZWYgIT09IHZvaWQgMCA/IF9yZWYgOiAwKTsgLy8gVGVzdCBpZiB3ZWVrU3RhcnRzT24gaXMgYmV0d2VlbiAwIGFuZCA2IF9hbmRfIGlzIG5vdCBOYU5cblxuICBpZiAoISh3ZWVrU3RhcnRzT24gPj0gMCAmJiB3ZWVrU3RhcnRzT24gPD0gNikpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignd2Vla1N0YXJ0c09uIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2IGluY2x1c2l2ZWx5Jyk7XG4gIH1cblxuICB2YXIgZGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUpO1xuICB2YXIgZGF5ID0gZGF0ZS5nZXREYXkoKTtcbiAgdmFyIGRpZmYgPSAoZGF5IDwgd2Vla1N0YXJ0c09uID8gNyA6IDApICsgZGF5IC0gd2Vla1N0YXJ0c09uO1xuICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgLSBkaWZmKTtcbiAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIGRhdGU7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9JbnRlZ2VyKGRpcnR5TnVtYmVyKSB7XG4gIGlmIChkaXJ0eU51bWJlciA9PT0gbnVsbCB8fCBkaXJ0eU51bWJlciA9PT0gdHJ1ZSB8fCBkaXJ0eU51bWJlciA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG5cbiAgdmFyIG51bWJlciA9IE51bWJlcihkaXJ0eU51bWJlcik7XG5cbiAgaWYgKGlzTmFOKG51bWJlcikpIHtcbiAgICByZXR1cm4gbnVtYmVyO1xuICB9XG5cbiAgcmV0dXJuIG51bWJlciA8IDAgPyBNYXRoLmNlaWwobnVtYmVyKSA6IE1hdGguZmxvb3IobnVtYmVyKTtcbn0iLCJpbXBvcnQgaXNTYW1lV2VlayBmcm9tIFwiLi4vaXNTYW1lV2Vlay9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcblxuLyoqXG4gKiBAbmFtZSBpc1RoaXNXZWVrXG4gKiBAY2F0ZWdvcnkgV2VlayBIZWxwZXJzXG4gKiBAc3VtbWFyeSBJcyB0aGUgZ2l2ZW4gZGF0ZSBpbiB0aGUgc2FtZSB3ZWVrIGFzIHRoZSBjdXJyZW50IGRhdGU/XG4gKiBAcHVyZSBmYWxzZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSXMgdGhlIGdpdmVuIGRhdGUgaW4gdGhlIHNhbWUgd2VlayBhcyB0aGUgY3VycmVudCBkYXRlP1xuICpcbiAqID4g4pqg77iPIFBsZWFzZSBub3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBpcyBub3QgcHJlc2VudCBpbiB0aGUgRlAgc3VibW9kdWxlIGFzXG4gKiA+IGl0IHVzZXMgYERhdGUubm93KClgIGludGVybmFsbHkgaGVuY2UgaW1wdXJlIGFuZCBjYW4ndCBiZSBzYWZlbHkgY3VycmllZC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSB0aGUgb2JqZWN0IHdpdGggb3B0aW9uc1xuICogQHBhcmFtIHtMb2NhbGV9IFtvcHRpb25zLmxvY2FsZT1kZWZhdWx0TG9jYWxlXSAtIHRoZSBsb2NhbGUgb2JqZWN0LiBTZWUgW0xvY2FsZV17QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9Mb2NhbGV9XG4gKiBAcGFyYW0gezB8MXwyfDN8NHw1fDZ9IFtvcHRpb25zLndlZWtTdGFydHNPbj0wXSAtIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrICgwIC0gU3VuZGF5KVxuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlIGlzIGluIHRoaXMgd2Vla1xuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy53ZWVrU3RhcnRzT25gIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRvZGF5IGlzIDI1IFNlcHRlbWJlciAyMDE0LCBpcyAyMSBTZXB0ZW1iZXIgMjAxNCBpbiB0aGlzIHdlZWs/XG4gKiBjb25zdCByZXN1bHQgPSBpc1RoaXNXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIxKSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB0b2RheSBpcyAyNSBTZXB0ZW1iZXIgMjAxNCBhbmQgd2VlayBzdGFydHMgd2l0aCBNb25kYXlcbiAqIC8vIGlzIDIxIFNlcHRlbWJlciAyMDE0IGluIHRoaXMgd2Vlaz9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzVGhpc1dlZWsobmV3IERhdGUoMjAxNCwgOCwgMjEpLCB7IHdlZWtTdGFydHNPbjogMSB9KVxuICogLy89PiBmYWxzZVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1RoaXNXZWVrKGRpcnR5RGF0ZSwgb3B0aW9ucykge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgcmV0dXJuIGlzU2FtZVdlZWsoZGlydHlEYXRlLCBEYXRlLm5vdygpLCBvcHRpb25zKTtcbn0iLCJpbXBvcnQgc3RhcnRPZldlZWsgZnJvbSBcIi4uL3N0YXJ0T2ZXZWVrL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuXG4vKipcbiAqIEBuYW1lIGlzU2FtZVdlZWtcbiAqIEBjYXRlZ29yeSBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgd2VlayAoYW5kIG1vbnRoIGFuZCB5ZWFyKT9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgd2VlayAoYW5kIG1vbnRoIGFuZCB5ZWFyKT9cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlTGVmdCAtIHRoZSBmaXJzdCBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlUmlnaHQgLSB0aGUgc2Vjb25kIGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zLlxuICogQHBhcmFtIHtMb2NhbGV9IFtvcHRpb25zLmxvY2FsZT1kZWZhdWx0TG9jYWxlXSAtIHRoZSBsb2NhbGUgb2JqZWN0LiBTZWUgW0xvY2FsZV17QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9Mb2NhbGV9XG4gKiBAcGFyYW0gezB8MXwyfDN8NHw1fDZ9IFtvcHRpb25zLndlZWtTdGFydHNPbj0wXSAtIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrICgwIC0gU3VuZGF5KVxuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlcyBhcmUgaW4gdGhlIHNhbWUgd2VlayAoYW5kIG1vbnRoIGFuZCB5ZWFyKVxuICogQHRocm93cyB7VHlwZUVycm9yfSAyIGFyZ3VtZW50cyByZXF1aXJlZFxuICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMud2Vla1N0YXJ0c09uYCBtdXN0IGJlIGJldHdlZW4gMCBhbmQgNlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgMzEgQXVndXN0IDIwMTQgYW5kIDQgU2VwdGVtYmVyIDIwMTQgaW4gdGhlIHNhbWUgd2Vlaz9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZVdlZWsobmV3IERhdGUoMjAxNCwgNywgMzEpLCBuZXcgRGF0ZSgyMDE0LCA4LCA0KSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB3ZWVrIHN0YXJ0cyB3aXRoIE1vbmRheSxcbiAqIC8vIGFyZSAzMSBBdWd1c3QgMjAxNCBhbmQgNCBTZXB0ZW1iZXIgMjAxNCBpbiB0aGUgc2FtZSB3ZWVrP1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lV2VlayhuZXcgRGF0ZSgyMDE0LCA3LCAzMSksIG5ldyBEYXRlKDIwMTQsIDgsIDQpLCB7XG4gKiAgIHdlZWtTdGFydHNPbjogMVxuICogfSlcbiAqIC8vPT4gZmFsc2VcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDEgSmFudWFyeSAyMDE0IGFuZCAxIEphbnVhcnkgMjAxNSBpbiB0aGUgc2FtZSB3ZWVrP1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lV2VlayhuZXcgRGF0ZSgyMDE0LCAwLCAxKSwgbmV3IERhdGUoMjAxNSwgMCwgMSkpXG4gKiAvLz0+IGZhbHNlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzU2FtZVdlZWsoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQsIG9wdGlvbnMpIHtcbiAgcmVxdWlyZWRBcmdzKDIsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlTGVmdFN0YXJ0T2ZXZWVrID0gc3RhcnRPZldlZWsoZGlydHlEYXRlTGVmdCwgb3B0aW9ucyk7XG4gIHZhciBkYXRlUmlnaHRTdGFydE9mV2VlayA9IHN0YXJ0T2ZXZWVrKGRpcnR5RGF0ZVJpZ2h0LCBvcHRpb25zKTtcbiAgcmV0dXJuIGRhdGVMZWZ0U3RhcnRPZldlZWsuZ2V0VGltZSgpID09PSBkYXRlUmlnaHRTdGFydE9mV2Vlay5nZXRUaW1lKCk7XG59IiwiaW1wb3J0IHsgaXNUaGlzV2VlaywgaXNUb2RheSB9IGZyb20gJ2RhdGUtZm5zJztcbmltcG9ydCBhZGRQcm9qZWN0TGlzdCBmcm9tICcuL2FkZFByb2plY3QnXG5cbmNvbnN0IGRvbSA9IChmdW5jdGlvbiAoKSB7XG4gICAgXG4gICAgbGV0IGluZGV4XG4gICAgbGV0IHRhc2tJbmRleFxuICAgIGxldCBvcGVuUHJvamVjdFxuICAgIGNvbnN0IHByb2plY3RzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0cy1saXN0cycpXG4gICAgY29uc3QgbWFpbkNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbi1jb250ZW50JylcbiAgICBjb25zdCBkdWVDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmR1ZS1jb250ZW50JylcbiAgICBjb25zdCBwcm9qZWN0VGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC10aXRsZScpXG4gICAgY29uc3QgcHJvamVjdERlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QtZGVzY3JpcHRpb24nKVxuICAgIGNvbnN0IHByb2plY3REdWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC1kdWUnKVxuICAgIGNvbnN0IHByb2plY3RQcmlvcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmlvcml0eScpXG4gICAgY29uc3QgdGFza0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWJ1dHRvbicpXG4gICAgY29uc3QgYWxsVGFza3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxsLXRhc2tzJylcbiAgICBjb25zdCBkdWVUb2RheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kdWUtdG9kYXknKVxuICAgIGNvbnN0IGR1ZVRoaXNXZWVrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmR1ZS10aGlzLXdlZWsnKVxuXG4gICAgY29uc3QgY3JlYXRlUHJvamVjdERpdiA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBjb25zdCBkZWxldGVQcm9qZWN0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgICAgICAgY29uc3QgZWRpdFByb2plY3RCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgICAgICBjb25zdCBwcm9qZWN0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgY29uc3QgcHJvamVjdFRpdGxlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcblxuICAgICAgICBwcm9qZWN0RGl2LmNsYXNzTGlzdC5hZGQoJ3Byb2plY3QtZGlzcGxheScpXG4gICAgICAgIHByb2plY3RzTGlzdC5hcHBlbmRDaGlsZChwcm9qZWN0RGl2KVxuXG4gICAgICAgIHByb2plY3RUaXRsZURpdi5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0JylcbiAgICAgICAgcHJvamVjdFRpdGxlRGl2LnRleHRDb250ZW50ID0gYWRkUHJvamVjdExpc3QubXlQcm9qZWN0QXJyYXlbKGFkZFByb2plY3RMaXN0Lm15UHJvamVjdEFycmF5KS5sZW5ndGggLSAxXVsndGl0bGUnXVxuICAgICAgICBwcm9qZWN0RGl2LmFwcGVuZENoaWxkKHByb2plY3RUaXRsZURpdilcblxuICAgICAgICBkZWxldGVQcm9qZWN0QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2RlbGV0ZS1wcm9qZWN0LWJ1dHRvbicpXG4gICAgICAgIGRlbGV0ZVByb2plY3RCdXR0b24uaW5uZXJIVE1MID0gJzxzdmcgY2xhc3M9XCJkZWxldGVTVkdcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPjxwYXRoIGNsYXNzPVwiZGVsZXRlU1ZHXCIgZD1cIk0xOSw0SDE1LjVMMTQuNSwzSDkuNUw4LjUsNEg1VjZIMTlNNiwxOUEyLDIgMCAwLDAgOCwyMUgxNkEyLDIgMCAwLDAgMTgsMTlWN0g2VjE5WlwiIC8+PC9zdmc+J1xuICAgICAgICBwcm9qZWN0RGl2LmFwcGVuZENoaWxkKGRlbGV0ZVByb2plY3RCdXR0b24pXG5cbiAgICAgICAgZWRpdFByb2plY3RCdXR0b24uY2xhc3NMaXN0LmFkZCgnZWRpdC1wcm9qZWN0LWJ1dHRvbicpXG4gICAgICAgIGVkaXRQcm9qZWN0QnV0dG9uLmlubmVySFRNTCA9ICc8c3ZnIGNsYXNzPVwiZWRpdFNWR1wiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+PHBhdGggY2xhc3M9XCJlZGl0U1ZHXCIgZD1cIk01LDNDMy44OSwzIDMsMy44OSAzLDVWMTlBMiwyIDAgMCwwIDUsMjFIMTlBMiwyIDAgMCwwIDIxLDE5VjEySDE5VjE5SDVWNUgxMlYzSDVNMTcuNzgsNEMxNy42MSw0IDE3LjQzLDQuMDcgMTcuMyw0LjJMMTYuMDgsNS40MUwxOC41OCw3LjkxTDE5LjgsNi43QzIwLjA2LDYuNDQgMjAuMDYsNiAxOS44LDUuNzVMMTguMjUsNC4yQzE4LjEyLDQuMDcgMTcuOTUsNCAxNy43OCw0TTE1LjM3LDYuMTJMOCwxMy41VjE2SDEwLjVMMTcuODcsOC42MkwxNS4zNyw2LjEyWlwiIC8+PC9zdmc+J1xuICAgICAgICBwcm9qZWN0RGl2LmFwcGVuZENoaWxkKGVkaXRQcm9qZWN0QnV0dG9uKVxuICAgIH1cblxuICAgIGNvbnN0IGRlbGV0ZVByb2plY3QgPSBmdW5jdGlvbiAoaW5kZXgpIHtcblxuICAgICAgICBpZiAoYWRkUHJvamVjdExpc3QubXlQcm9qZWN0QXJyYXlbaW5kZXhdID09PSBvcGVuUHJvamVjdCkge1xuICAgICAgICAgICAgbWFpbkNvbnRlbnQuc3R5bGUuZGlzcGxheT0nbm9uZSdcbiAgICAgICAgfVxuXG4gICAgICAgIGFkZFByb2plY3RMaXN0Lm15UHJvamVjdEFycmF5LnNwbGljZShpbmRleCAsIDEpXG4gICAgfVxuXG4gICAgY29uc3QgZ2VuZXJhdGVOZXdUYXNrID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIGNvbnN0IG5ld1Rhc2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICBuZXdUYXNrLmNsYXNzTGlzdC5hZGQoJ2luZGl2aWR1YWwtdGFzaycpXG4gICAgICAgIGFsbFRhc2tzLmFwcGVuZENoaWxkKG5ld1Rhc2spXG5cbiAgICAgICAgY29uc3QgbmV3Q2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICBuZXdDaGVja2JveC5jbGFzc0xpc3QuYWRkKCd0YXNrLWNoZWNrYm94LWRpdicpXG4gICAgICAgIG5ld1Rhc2suYXBwZW5kQ2hpbGQobmV3Q2hlY2tib3gpXG4gICAgICAgIG5ld0NoZWNrYm94LmlubmVySFRNTCA9ICc8bGFiZWwgZm9yPVwidGFzazEtY2hlY2tib3hcIj48L2xhYmVsPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjbGFzcyA9IFwidGFzay1jaGVja2JveFwiIGlkPVwidGFzazEtY2hlY2tib3hcIiBuYW1lPVwiY2hlY2tib3hcIj4nXG4gICAgICAgIFxuICAgICAgICBjb25zdCBuZXdJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgIG5ld0lucHV0LmNsYXNzTGlzdC5hZGQoJ3Rhc2staW5wdXQtZGl2JylcbiAgICAgICAgbmV3VGFzay5hcHBlbmRDaGlsZChuZXdJbnB1dClcbiAgICAgICAgbmV3SW5wdXQuaW5uZXJIVE1MID0gJzxsYWJlbCBmb3I9XCJ0YXNrMS1pbnB1dFwiPjwvbGFiZWw+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJ0YXNrLWlucHV0XCIgaWQ9XCJ0YXNrMS1pbnB1dFwiIG5hbWU9XCJ0YXNrXCIgcmVxdWlyZWQ+J1xuICAgICAgICBcbiAgICAgICAgY29uc3QgdGFza0RlbGV0ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgIHRhc2tEZWxldGVCdXR0b24uY2xhc3NMaXN0LmFkZCgndGFzay1kZWxldGUtYnV0dG9uJylcbiAgICAgICAgbmV3VGFzay5hcHBlbmRDaGlsZCh0YXNrRGVsZXRlQnV0dG9uKVxuICAgICAgICB0YXNrRGVsZXRlQnV0dG9uLmlubmVySFRNTCA9ICc8c3ZnIGNsYXNzPVwiZGVsZXRlU1ZHXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj48cGF0aCBjbGFzcz1cImRlbGV0ZVNWR1wiIGQ9XCJNMTksNEgxNS41TDE0LjUsM0g5LjVMOC41LDRINVY2SDE5TTYsMTlBMiwyIDAgMCwwIDgsMjFIMTZBMiwyIDAgMCwwIDE4LDE5VjdINlYxOVpcIiAvPjwvc3ZnPidcbiAgICAgICAgIFxuICAgIH1cblxuICAgIGNvbnN0IGdlbmVyYXRlVGFza09iamVjdCA9IGZ1bmN0aW9uICh0YXNrTmFtZSwgaXNDb21wbGV0ZWQpIHtcblxuICAgICAgICBpZiAoaXNDb21wbGV0ZWQgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpc0NvbXBsZXRlZCA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgICBcbiAgICAgICAgcmV0dXJuIHt0YXNrTmFtZSwgaXNDb21wbGV0ZWR9XG4gICAgfVxuXG4gICAgY29uc3QgZ2VuZXJhdGVUYXNrTGlzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcGVuUHJvamVjdFsndGFza3MnXS5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBnZW5lcmF0ZU5ld1Rhc2soKVxuXG4gICAgICAgICAgICBjb25zdCB0YXNrSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFzay1pbnB1dCcpXG4gICAgICAgICAgICBjb25zdCBjaGVja0JveCAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFzay1jaGVja2JveCcpXG4gICAgICAgICAgICB0YXNrSW5wdXRbaV0udmFsdWUgPSBvcGVuUHJvamVjdFsndGFza3MnXVtpXVsndGFza05hbWUnXVxuICAgICAgICAgICAgY2hlY2tCb3hbaV0uY2hlY2tlZCA9IG9wZW5Qcm9qZWN0Wyd0YXNrcyddW2ldWydpc0NvbXBsZXRlZCddXG5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGNsZWFyVGFza0xpc3QgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgY29uc3QgaW5kaXZpZHVhbFRhc2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaW5kaXZpZHVhbC10YXNrJylcbiAgICAgICBcbiAgICAgICAgaW5kaXZpZHVhbFRhc2suZm9yRWFjaCgodGFzaykgPT4ge1xuICAgICAgICAgICAgYWxsVGFza3MucmVtb3ZlQ2hpbGQodGFzaylcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBwcm9qZWN0c0xpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAocHJvamVjdCkgPT4ge1xuICAgICAgICBpZiAoKHByb2plY3QudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncHJvamVjdCcpKSB8fFxuICAgICAgICAgICAgKHByb2plY3QudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZGVsZXRlU1ZHJykpIHx8XG4gICAgICAgICAgICAocHJvamVjdC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlZGl0U1ZHJykpKSB7XG4gICAgICAgIFxuICAgICAgICAgICAgbGV0IHRhcmdldFByb2plY3QgPSBwcm9qZWN0LnRhcmdldC5jbG9zZXN0KCcucHJvamVjdC1kaXNwbGF5JylcbiAgICAgICAgICAgIGluZGV4ID0gQXJyYXkuZnJvbSh0YXJnZXRQcm9qZWN0LnBhcmVudE5vZGUuY2hpbGRyZW4pLmluZGV4T2YodGFyZ2V0UHJvamVjdClcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBFdmVudCBoYW5kbGVyIHdoZW4gYSBwcm9qZWN0IGlzIGRlbGV0ZWRcbiAgICBwcm9qZWN0c0xpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAocHJvamVjdCkgPT4ge1xuICAgICAgICBpZiAocHJvamVjdC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkZWxldGVTVkcnKSkge1xuICAgICAgICAgICAgY29uc3QgcHJvamVjdERpdiA9IHByb2plY3QudGFyZ2V0LmNsb3Nlc3QoJy5wcm9qZWN0LWRpc3BsYXknKVxuICAgICAgICAgICAgZGVsZXRlUHJvamVjdChpbmRleClcbiAgICAgICAgICAgIHByb2plY3RzTGlzdC5yZW1vdmVDaGlsZChwcm9qZWN0RGl2KVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gRXZlbnQgaGFuZGxlciB3aGVuIGEgcHJvamVjdCBpcyBjbGlja2VkXG4gICAgcHJvamVjdHNMaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKHByb2plY3QpID0+IHtcbiAgICAgICAgaWYgKHByb2plY3QudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncHJvamVjdCcpKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG1haW5Db250ZW50LnN0eWxlLmRpc3BsYXkgPSAnZmxleCdcbiAgICAgICAgICAgIGR1ZUNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICAgICAgb3BlblByb2plY3QgPSBhZGRQcm9qZWN0TGlzdC5teVByb2plY3RBcnJheVtpbmRleF1cblxuICAgICAgICAgICAgY29uc29sZS5sb2cob3BlblByb2plY3QpXG5cbiAgICAgICAgICAgIHByb2plY3RUaXRsZS50ZXh0Q29udGVudCA9IG9wZW5Qcm9qZWN0Wyd0aXRsZSddXG4gICAgICAgICAgICBwcm9qZWN0RGVzY3JpcHRpb24udGV4dENvbnRlbnQgID0gb3BlblByb2plY3RbJ2Rlc2NyaXB0aW9uJ11cbiAgICAgICAgICAgIHByb2plY3REdWUudGV4dENvbnRlbnQgID0gb3BlblByb2plY3RbJ2RhdGUnXVxuICAgICAgICAgICAgcHJvamVjdFByaW9yaXR5LnRleHRDb250ZW50ID0gb3BlblByb2plY3RbJ3ByaW9yaXR5J11cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2xlYXJUYXNrTGlzdCgpXG4gICAgICAgICAgICBnZW5lcmF0ZVRhc2tMaXN0KClcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICBhbGxUYXNrcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICBpZiAoKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Rhc2stY2hlY2tib3gnKSkgfHxcbiAgICAgICAgICAgIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXNrLWlucHV0JykpIHx8XG4gICAgICAgICAgICAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZGVsZXRlU1ZHJykpKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCB0YXJnZXRUYXNrID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy5pbmRpdmlkdWFsLXRhc2snKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0YXNrSW5kZXggPSBBcnJheS5mcm9tKHRhcmdldFRhc2sucGFyZW50Tm9kZS5jaGlsZHJlbikuaW5kZXhPZih0YXJnZXRUYXNrKVxuICAgICAgICB9XG4gICAgfSlcblxuICAgIC8vIEV2ZW50IGhhbmRsZXIgZm9yIG5ldyB0YXNrIGNyZWF0aW9uXG4gICAgdGFza0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBcbiAgICAgICAgZ2VuZXJhdGVOZXdUYXNrKClcbiAgICBcbiAgICAgICAgbGV0IHRhc2tOYW1lXG4gICAgICAgIGxldCBpc0NvbXBsZXRlZCBcbiAgICAgICBcbiAgICAgICAgYWxsVGFza3MuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGV2ZW50KSA9PiB7XG5cbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXNrLWNoZWNrYm94JykpIHtcblxuICAgICAgICAgICAgICAgIGlzQ29tcGxldGVkID0gZXZlbnQudGFyZ2V0LmNoZWNrZWRcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gZ2VuZXJhdGVUYXNrT2JqZWN0KHRhc2tOYW1lLCBpc0NvbXBsZXRlZClcbiAgICAgICAgICAgICAgICBhZGRQcm9qZWN0TGlzdC5teVByb2plY3RBcnJheVtpbmRleF1bJ3Rhc2tzJ11bdGFza0luZGV4XSA9IHRhc2tPYmplY3RcblxuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXNrLWlucHV0JykpIHtcblxuICAgICAgICAgICAgICAgIHRhc2tOYW1lID0gZXZlbnQudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGdlbmVyYXRlVGFza09iamVjdCh0YXNrTmFtZSwgaXNDb21wbGV0ZWQpXG4gICAgICAgICAgICAgICAgYWRkUHJvamVjdExpc3QubXlQcm9qZWN0QXJyYXlbaW5kZXhdWyd0YXNrcyddW3Rhc2tJbmRleF0gPSB0YXNrT2JqZWN0XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9KVxuXG4gICAgLy8gRXZlbnQgaGFuZGxlciBmb3IgZGVsZXRpbmcgYSB0YXNrXG4gICAgYWxsVGFza3MuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2RlbGV0ZVNWRycpKSB7XG5cbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUYXNrID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy5pbmRpdmlkdWFsLXRhc2snKVxuICAgICAgICAgICAgYWRkUHJvamVjdExpc3QubXlQcm9qZWN0QXJyYXlbaW5kZXhdWyd0YXNrcyddLnNwbGljZSh0YXNrSW5kZXgsMSlcbiAgICAgICAgICAgIGFsbFRhc2tzLnJlbW92ZUNoaWxkKGN1cnJlbnRUYXNrKVxuICAgICAgICB9XG4gICAgfSkgXG5cbiAgICAvLyBFdmVudCBoYW5kbGVyIGZvciBzb3J0aW5nIGJ5IGR1ZSBkYXRlXG4gICAgZHVlVG9kYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cbiAgICAgICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHVlLXRpdGxlJylcbiAgICAgICAgbGV0IGR1ZVByb2plY3RzID0gW11cblxuICAgICAgICBtYWluQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgIGR1ZUNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdmbGV4J1xuXG4gICAgICAgIHRpdGxlLnRleHRDb250ZW50ID0gJ0R1ZSBUb2RheSdcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFkZFByb2plY3RMaXN0Lm15UHJvamVjdEFycmF5Lmxlbmd0aDsgaSsrKXtcblxuICAgICAgICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZShgJHthZGRQcm9qZWN0TGlzdC5teVByb2plY3RBcnJheVtpXVsnZGF0ZSddfWAgKyBgQ0RUYClcblxuICAgICAgICAgICAgaWYgKGlzVG9kYXkobmV3IERhdGUoZGF0ZSkpKSB7XG4gICAgICAgICAgICAgICAgZHVlUHJvamVjdHMucHVzaChhZGRQcm9qZWN0TGlzdC5teVByb2plY3RBcnJheVtpXSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhkdWVQcm9qZWN0cylcbiAgICB9KVxuXG4gICAgLy8gRXZlbnQgaGFuZGxlciBmb3Igc29ydGluZyBieSBkdWUgZGF0ZVxuICAgIGR1ZVRoaXNXZWVrLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXG4gICAgICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmR1ZS10aXRsZScpXG4gICAgICAgIGxldCBkdWVQcm9qZWN0cyA9IFtdXG5cbiAgICAgICAgbWFpbkNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICBkdWVDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnZmxleCdcblxuICAgICAgICB0aXRsZS50ZXh0Q29udGVudCA9ICdEdWUgVG9kYXknXG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhZGRQcm9qZWN0TGlzdC5teVByb2plY3RBcnJheS5sZW5ndGg7IGkrKyl7XG5cbiAgICAgICAgICAgIGxldCBkYXRlID0gbmV3IERhdGUoYCR7YWRkUHJvamVjdExpc3QubXlQcm9qZWN0QXJyYXlbaV1bJ2RhdGUnXX1gICsgYENEVGApXG5cbiAgICAgICAgICAgIGlmIChpc1RoaXNXZWVrKG5ldyBEYXRlKGRhdGUpKSkge1xuICAgICAgICAgICAgICAgIGR1ZVByb2plY3RzLnB1c2goYWRkUHJvamVjdExpc3QubXlQcm9qZWN0QXJyYXlbaV0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coZHVlUHJvamVjdHMpXG4gICAgfSlcblxuXG4gICAgLypcbiAgICBlZGl0UHJvamVjdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgYWRkUHJvamVjdExpc3QuYWRkUHJvamVjdC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnXG5cbiAgICB9KSovXG5cbiAgICByZXR1cm4ge1xuICAgICAgICBjcmVhdGVQcm9qZWN0RGl2LFxuICAgICAgICBkZWxldGVQcm9qZWN0XG4gICAgfVxuXG59KSgpO1xuICAgIFxuZXhwb3J0IGRlZmF1bHQgZG9tIiwiaW1wb3J0IGRvbSBmcm9tICcuL0RPTSdcblxuY29uc3QgYWRkUHJvamVjdExpc3QgPSAoZnVuY3Rpb24gKCkge1xuXG4gICAgY29uc3QgYWRkUHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtcHJvamVjdCcpXG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtcHJvamVjdC1mb3JtJylcbiAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0aXRsZScpXG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGVzY3JpcHRpb24nKVxuICAgIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGF0ZScpXG4gICAgY29uc3QgcHJpb3JpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvamVjdC1wcmlvcml0eS1idXR0b24nKVxuICAgIGNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQnKVxuICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYW5jZWwnKVxuXG4gICAgbGV0IG15UHJvamVjdEFycmF5ID0gW11cbiAgICBsZXQgcHJpb3JpdHlWYWx1ZSA9ICdMb3cnXG4gICBcbiAgICBjb25zdCBkaXNwbGF5Rm9ybSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgXG4gICAgICAgIGFkZFByb2plY3Quc3R5bGUuZGlzcGxheSA9ICdmbGV4J1xuXG4gICAgICAgIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRpdGxlLnZhbHVlICE9ICcnKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1Byb2plY3QgPSBjcmVhdGVQcm9qZWN0KHRpdGxlLnZhbHVlLCBkZXNjcmlwdGlvbi52YWx1ZSwgZGF0ZS52YWx1ZSwgcHJpb3JpdHlWYWx1ZSlcbiAgICAgICAgICAgICAgICBteVByb2plY3RBcnJheS5wdXNoKG5ld1Byb2plY3QpXG4gICAgICAgICAgICAgICAgZG9tLmNyZWF0ZVByb2plY3REaXYoKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG15UHJvamVjdEFycmF5KVxuICAgICAgICAgICAgICAgIGFkZFByb2plY3Quc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICAgICAgICAgIHByaW9yaXR5VmFsdWUgPSAnTG93J1xuICAgICAgICAgICAgICAgIGZvcm0ucmVzZXQoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGFkZFByb2plY3Quc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICAgICAgZm9ybS5yZXNldCgpXG4gICAgICAgIH0pXG5cbiAgICAgICAgYWRkUHJvamVjdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PSBhZGRQcm9qZWN0KSB7XG4gICAgICAgICAgICAgICAgYWRkUHJvamVjdC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgcHJpb3JpdHkuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHByaW9yaXR5VmFsdWUgPSBidXR0b24udGV4dENvbnRlbnRcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwcmlvcml0eVZhbHVlKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBjb25zdCBjcmVhdGVQcm9qZWN0ID0gZnVuY3Rpb24gKHRpdGxlLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHkpIHtcbiAgICAgICAgbGV0IHRhc2tzID0gW11cbiAgICAgICAgcmV0dXJuIHt0aXRsZSxkZXNjcmlwdGlvbixkYXRlLHByaW9yaXR5LHRhc2tzfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGFkZFByb2plY3QsXG4gICAgICAgIGRpc3BsYXlGb3JtLFxuICAgICAgICBteVByb2plY3RBcnJheVxuICAgIH1cblxufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgYWRkUHJvamVjdExpc3RcblxuIiwiaW1wb3J0IGFkZFByb2plY3RMaXN0IGZyb20gJy4vYWRkUHJvamVjdCdcbmltcG9ydCBkb20gZnJvbSAnLi9ET00nXG5cbmNvbnN0IG5ld1Byb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC1idXR0b24nKVxuY29uc3QgcHJvamVjdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0cy1saXN0cycpXG5cblxuXG5uZXdQcm9qZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkUHJvamVjdExpc3QuZGlzcGxheUZvcm0pXG5cbmRvbVxuIl0sIm5hbWVzIjpbInJlcXVpcmVkQXJncyIsInJlcXVpcmVkIiwiYXJncyIsImxlbmd0aCIsIlR5cGVFcnJvciIsIl90eXBlb2YiLCJvYmoiLCJTeW1ib2wiLCJpdGVyYXRvciIsImNvbnN0cnVjdG9yIiwicHJvdG90eXBlIiwidG9EYXRlIiwiYXJndW1lbnQiLCJhcmd1bWVudHMiLCJhcmdTdHIiLCJPYmplY3QiLCJ0b1N0cmluZyIsImNhbGwiLCJEYXRlIiwiZ2V0VGltZSIsImNvbnNvbGUiLCJ3YXJuIiwiRXJyb3IiLCJzdGFjayIsIk5hTiIsInN0YXJ0T2ZEYXkiLCJkaXJ0eURhdGUiLCJkYXRlIiwic2V0SG91cnMiLCJpc1RvZGF5IiwiZGlydHlEYXRlTGVmdCIsImRpcnR5RGF0ZVJpZ2h0IiwiZGF0ZUxlZnRTdGFydE9mRGF5IiwiZGF0ZVJpZ2h0U3RhcnRPZkRheSIsImlzU2FtZURheSIsIm5vdyIsImRlZmF1bHRPcHRpb25zIiwiZ2V0RGVmYXVsdE9wdGlvbnMiLCJzdGFydE9mV2VlayIsIm9wdGlvbnMiLCJfcmVmIiwiX3JlZjIiLCJfcmVmMyIsIl9vcHRpb25zJHdlZWtTdGFydHNPbiIsIl9vcHRpb25zJGxvY2FsZSIsIl9vcHRpb25zJGxvY2FsZSRvcHRpbyIsIl9kZWZhdWx0T3B0aW9ucyRsb2NhbCIsIl9kZWZhdWx0T3B0aW9ucyRsb2NhbDIiLCJ3ZWVrU3RhcnRzT24iLCJkaXJ0eU51bWJlciIsIm51bWJlciIsIk51bWJlciIsImlzTmFOIiwiTWF0aCIsImNlaWwiLCJmbG9vciIsInRvSW50ZWdlciIsImxvY2FsZSIsIlJhbmdlRXJyb3IiLCJkYXkiLCJnZXREYXkiLCJkaWZmIiwic2V0RGF0ZSIsImdldERhdGUiLCJpc1RoaXNXZWVrIiwiZGF0ZUxlZnRTdGFydE9mV2VlayIsImRhdGVSaWdodFN0YXJ0T2ZXZWVrIiwiaXNTYW1lV2VlayIsImluZGV4IiwidGFza0luZGV4Iiwib3BlblByb2plY3QiLCJwcm9qZWN0c0xpc3QiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJtYWluQ29udGVudCIsImR1ZUNvbnRlbnQiLCJwcm9qZWN0VGl0bGUiLCJwcm9qZWN0RGVzY3JpcHRpb24iLCJwcm9qZWN0RHVlIiwicHJvamVjdFByaW9yaXR5IiwidGFza0J1dHRvbiIsImFsbFRhc2tzIiwiZHVlVG9kYXkiLCJkdWVUaGlzV2VlayIsImRlbGV0ZVByb2plY3QiLCJhZGRQcm9qZWN0Iiwic3R5bGUiLCJkaXNwbGF5IiwiZ2VuZXJhdGVOZXdUYXNrIiwibmV3VGFzayIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmRDaGlsZCIsIm5ld0NoZWNrYm94IiwiaW5uZXJIVE1MIiwibmV3SW5wdXQiLCJ0YXNrRGVsZXRlQnV0dG9uIiwiZ2VuZXJhdGVUYXNrT2JqZWN0IiwidGFza05hbWUiLCJpc0NvbXBsZXRlZCIsInVuZGVmaW5lZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJwcm9qZWN0IiwidGFyZ2V0IiwiY29udGFpbnMiLCJ0YXJnZXRQcm9qZWN0IiwiY2xvc2VzdCIsIkFycmF5IiwiZnJvbSIsInBhcmVudE5vZGUiLCJjaGlsZHJlbiIsImluZGV4T2YiLCJwcm9qZWN0RGl2IiwicmVtb3ZlQ2hpbGQiLCJsb2ciLCJ0ZXh0Q29udGVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwidGFzayIsImkiLCJ0YXNrSW5wdXQiLCJjaGVja0JveCIsInZhbHVlIiwiY2hlY2tlZCIsImdlbmVyYXRlVGFza0xpc3QiLCJldmVudCIsInRhcmdldFRhc2siLCJ0YXNrT2JqZWN0IiwiY3VycmVudFRhc2siLCJzcGxpY2UiLCJ0aXRsZSIsImR1ZVByb2plY3RzIiwicHVzaCIsImNyZWF0ZVByb2plY3REaXYiLCJkZWxldGVQcm9qZWN0QnV0dG9uIiwiZWRpdFByb2plY3RCdXR0b24iLCJwcm9qZWN0VGl0bGVEaXYiLCJhZGRQcm9qZWN0TGlzdCIsImZvcm0iLCJkZXNjcmlwdGlvbiIsInByaW9yaXR5IiwiYWRkQnV0dG9uIiwiY2FuY2VsQnV0dG9uIiwibXlQcm9qZWN0QXJyYXkiLCJwcmlvcml0eVZhbHVlIiwiZGlzcGxheUZvcm0iLCJwcmV2ZW50RGVmYXVsdCIsIm5ld1Byb2plY3QiLCJ0YXNrcyIsImNyZWF0ZVByb2plY3QiLCJyZXNldCIsImJ1dHRvbiJdLCJzb3VyY2VSb290IjoiIn0=