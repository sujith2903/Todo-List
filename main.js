(()=>{"use strict";function e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(n){e(1,arguments);var r=Object.prototype.toString.call(n);return n instanceof Date||"object"===t(n)&&"[object Date]"===r?new Date(n.getTime()):"number"==typeof n||"[object Number]"===r?new Date(n):("string"!=typeof n&&"[object String]"!==r||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function r(t){e(1,arguments);var r=n(t);return r.setHours(0,0,0,0),r}function o(t){return e(1,arguments),function(t,n){e(2,arguments);var o=r(t),i=r(n);return o.getTime()===i.getTime()}(t,Date.now())}var i={};function c(){return i}function s(t,r){var o,i,s,a,l,d,u,y;e(1,arguments);var p=c(),m=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}(null!==(o=null!==(i=null!==(s=null!==(a=null==r?void 0:r.weekStartsOn)&&void 0!==a?a:null==r||null===(l=r.locale)||void 0===l||null===(d=l.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==s?s:p.weekStartsOn)&&void 0!==i?i:null===(u=p.locale)||void 0===u||null===(y=u.options)||void 0===y?void 0:y.weekStartsOn)&&void 0!==o?o:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=n(t),f=v.getDay(),h=(f<m?7:0)+f-m;return v.setDate(v.getDate()-h),v.setHours(0,0,0,0),v}function a(t,n){return e(1,arguments),function(t,n,r){e(2,arguments);var o=s(t,r),i=s(n,r);return o.getTime()===i.getTime()}(t,Date.now(),n)}const l=function(){let e,t,n,r,i=0;const c=document.querySelector(".projects-lists"),s=document.querySelector(".main-content"),l=document.querySelector(".due-content"),d=document.querySelector(".project-title"),y=document.querySelector(".project-description"),p=document.querySelector(".project-due"),m=document.querySelector(".priority"),v=document.querySelector(".task-button"),f=document.querySelector(".all-tasks"),h=document.querySelector(".due-today"),g=document.querySelector(".due-this-week"),k=document.querySelector(".due-title"),L=document.querySelector(".due-projects-lists"),j=document.querySelector(".priority-tab"),S=function(e){u.myProjectArray[e]===t&&(s.style.display="none"),u.myProjectArray.splice(e,1)},C=function(){const e=document.createElement("div");e.classList.add("individual-task"),f.appendChild(e);const t=document.createElement("div");t.classList.add("task-checkbox-div"),e.appendChild(t),t.innerHTML='<label for="task1-checkbox"></label><input type="checkbox" class = "task-checkbox" id="task1-checkbox" name="checkbox">';const n=document.createElement("div");n.classList.add("task-input-div"),e.appendChild(n),n.innerHTML='<label for="task1-input"></label><input type="text" class="task-input" id="task1-input" name="task" required>';const r=document.createElement("div");r.classList.add("task-delete-button"),e.appendChild(r),r.innerHTML='<svg class="deleteSVG" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path class="deleteSVG" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>'},w=function(e,t){return null==t&&(t=!1),{taskName:e,isCompleted:t}},b=function(e){for(s.style.display="none",l.style.display="flex";L.hasChildNodes();)L.removeChild(L.firstChild);for(let t=0;t<u.myProjectArray.length;t++){let n=new Date(`${u.myProjectArray[t].date}CDT`);if("isToday"==e){if(k.textContent="Due Today",o(new Date(n))){const e=document.createElement("div");e.classList.add("due-project"),L.appendChild(e),e.textContent=u.myProjectArray[t].title}}else if("isThisWeek"==e&&(k.textContent="Due This Week",a(new Date(n)))){const e=document.createElement("div");e.classList.add("due-project"),L.appendChild(e),e.textContent=u.myProjectArray[t].title}}},x=function(e){for(s.style.display="none",l.style.display="flex";L.hasChildNodes();)L.removeChild(L.firstChild);if("low"==e){k.textContent="Low Priority Projects";for(let e=0;e<u.myProjectArray.length;e++)if("Low"==u.myProjectArray[e].priority){const t=document.createElement("div");t.classList.add("due-project"),L.appendChild(t),t.textContent=u.myProjectArray[e].title}}else if("med"==e){k.textContent="Medium Priority Projects";for(let e=0;e<u.myProjectArray.length;e++)if("Medium"==u.myProjectArray[e].priority){const t=document.createElement("div");t.classList.add("due-project"),L.appendChild(t),t.textContent=u.myProjectArray[e].title}}else if("high"==e){k.textContent="High Priority Projects";for(let e=0;e<u.myProjectArray.length;e++)if("High"==u.myProjectArray[e].priority){const t=document.createElement("div");t.classList.add("due-project"),L.appendChild(t),t.textContent=u.myProjectArray[e].title}}};return c.addEventListener("click",(r=>{(r.target.classList.contains("project")||r.target.classList.contains("deleteSVG")||r.target.classList.contains("editSVG"))&&(n=r.target.closest(".project-display"),e=Array.from(n.parentNode.children).indexOf(n),t=u.myProjectArray[e])})),c.addEventListener("click",(t=>{if(t.target.classList.contains("deleteSVG")){const n=t.target.closest(".project-display");S(e),c.removeChild(n)}})),c.addEventListener("click",(t=>{t.target.classList.contains("editSVG")&&(u.displayEditForm(e),r=n.querySelector(".project"))})),c.addEventListener("click",(e=>{e.target.classList.contains("project")&&(s.style.display="flex",l.style.display="none",d.textContent=t.title,y.textContent=t.description,p.textContent=t.date,m.textContent=`(${t.priority}`,document.querySelectorAll(".individual-task").forEach((e=>{f.removeChild(e)})),function(){for(let e=0;e<t.tasks.length;e++){C();const n=document.querySelectorAll(".task-input"),r=document.querySelectorAll(".task-checkbox");n[e].value=t.tasks[e].taskName,r[e].checked=t.tasks[e].isCompleted}}())})),f.addEventListener("click",(e=>{if(e.target.classList.contains("task-checkbox")||e.target.classList.contains("task-input")||e.target.classList.contains("deleteSVG")){let t=e.target.closest(".individual-task");i=Array.from(t.parentNode.children).indexOf(t)}})),v.addEventListener("click",(()=>{let t,n;C(),f.addEventListener("change",(r=>{if(r.target.classList.contains("task-checkbox")){n=r.target.checked;const o=w(t,n);u.myProjectArray[e].tasks[i]=o}else if(r.target.classList.contains("task-input")){t=r.target.value;const o=w(t,n);u.myProjectArray[e].tasks[i]=o}}))})),f.addEventListener("click",(t=>{if(t.target.classList.contains("deleteSVG")){const n=t.target.closest(".individual-task");u.myProjectArray[e].tasks.splice(i,1),f.removeChild(n)}})),h.addEventListener("click",(()=>{b("isToday")})),g.addEventListener("click",(()=>{b("isThisWeek")})),j.addEventListener("click",(e=>{e.target.classList.contains("priority-low")?x("low"):e.target.classList.contains("priority-med")?x("med"):e.target.classList.contains("priority-high")&&x("high")})),{createProjectDiv:function(){const e=document.createElement("button"),t=document.createElement("button"),n=document.createElement("div"),r=document.createElement("div");n.classList.add("project-display"),c.appendChild(n),r.classList.add("project"),r.textContent=u.myProjectArray[u.myProjectArray.length-1].title,n.appendChild(r),e.classList.add("delete-project-button"),e.innerHTML='<svg class="deleteSVG" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path class="deleteSVG" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',n.appendChild(e),t.classList.add("edit-project-button"),t.innerHTML='<svg class="editSVG" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path class="editSVG" d="M5,3C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19H5V5H12V3H5M17.78,4C17.61,4 17.43,4.07 17.3,4.2L16.08,5.41L18.58,7.91L19.8,6.7C20.06,6.44 20.06,6 19.8,5.75L18.25,4.2C18.12,4.07 17.95,4 17.78,4M15.37,6.12L8,13.5V16H10.5L17.87,8.62L15.37,6.12Z" /></svg>',n.appendChild(t)},editProjectDiv:function(){r.textContent=t.title},deleteProject:S,index:e}}(),d=function(){const e=document.querySelector(".add-project"),t=document.querySelector(".edit-project"),n=document.querySelector(".add-project-form"),r=document.querySelector("#title"),o=document.querySelector("#description"),i=document.querySelector("#date"),c=document.querySelectorAll(".project-priority-button"),s=document.querySelector(".add"),a=document.querySelector(".cancel"),d=document.querySelector("#edit-title"),u=document.querySelector("#edit-description"),y=document.querySelector("#edit-date"),p=document.querySelector(".edit"),m=document.querySelector(".edit-cancel");let v,f=[],h="Low";const g=function(e,t,n,r){return{title:e,description:t,date:n,priority:r,tasks:[]}};return p.addEventListener("click",(e=>{e.preventDefault(),v.title=d.value,v.description=u.value,v.date=y.value,t.style.display="none",l.editProjectDiv(),n.reset()})),{addProject:e,addButton:s,displayForm:function(){n.reset(),e.style.display="flex",s.addEventListener("click",(t=>{if(""!=r.value){t.preventDefault();const c=g(r.value,o.value,i.value,h);f.push(c),l.createProjectDiv(),console.log(f),e.style.display="none",h="Low",n.reset()}})),a.addEventListener("click",(t=>{t.preventDefault(),e.style.display="none",n.reset()})),e.addEventListener("click",(t=>{t.target==e&&(e.style.display="none")})),c.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),h=e.textContent,console.log(h)}))}))},title:r,description:o,date:i,priority:c,myProjectArray:f,createProject:g,displayEditForm:function(e){t.style.display="flex",console.log(e),v=f[e],d.value=v.title,u.value=v.description,y.value=v.date,m.addEventListener("click",(e=>{e.preventDefault(),t.style.display="none",n.reset()})),t.addEventListener("click",(e=>{e.target==t&&(t.style.display="none")}))}}}(),u=d;document.querySelector(".project-button").addEventListener("click",u.displayForm)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FHUixFQStCSCxDQWpIc0IsR0FtSHZCLElDbEhtQmxCLFNBQVNDLGNBQWMsbUJBRS9CMEMsaUJBQWlCLFFBQVMzQixFQUFBLFkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vdG9EYXRlL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vc3RhcnRPZkRheS9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzVG9kYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9pc1NhbWVEYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL2RlZmF1bHRPcHRpb25zL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vc3RhcnRPZldlZWsvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL3RvSW50ZWdlci9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzVGhpc1dlZWsvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9pc1NhbWVXZWVrL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9ET00uanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2FkZFByb2plY3QuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlcXVpcmVkQXJncyhyZXF1aXJlZCwgYXJncykge1xuICBpZiAoYXJncy5sZW5ndGggPCByZXF1aXJlZCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocmVxdWlyZWQgKyAnIGFyZ3VtZW50JyArIChyZXF1aXJlZCA+IDEgPyAncycgOiAnJykgKyAnIHJlcXVpcmVkLCBidXQgb25seSAnICsgYXJncy5sZW5ndGggKyAnIHByZXNlbnQnKTtcbiAgfVxufSIsImZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgdG9EYXRlXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhbiBpbnN0YW5jZSBvZiBEYXRlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBpdHMgY2xvbmUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGEgbnVtYmVyLCBpdCBpcyB0cmVhdGVkIGFzIGEgdGltZXN0YW1wLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBub25lIG9mIHRoZSBhYm92ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgSW52YWxpZCBEYXRlLlxuICpcbiAqICoqTm90ZSoqOiAqYWxsKiBEYXRlIGFyZ3VtZW50cyBwYXNzZWQgdG8gYW55ICpkYXRlLWZucyogZnVuY3Rpb24gaXMgcHJvY2Vzc2VkIGJ5IGB0b0RhdGVgLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGFyZ3VtZW50IC0gdGhlIHZhbHVlIHRvIGNvbnZlcnRcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgcGFyc2VkIGRhdGUgaW4gdGhlIGxvY2FsIHRpbWUgem9uZVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENsb25lIHRoZSBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gdG9EYXRlKG5ldyBEYXRlKDIwMTQsIDEsIDExLCAxMSwgMzAsIDMwKSlcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENvbnZlcnQgdGhlIHRpbWVzdGFtcCB0byBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gdG9EYXRlKDEzOTIwOTg0MzAwMDApXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvRGF0ZShhcmd1bWVudCkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGFyZ1N0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudCk7IC8vIENsb25lIHRoZSBkYXRlXG5cbiAgaWYgKGFyZ3VtZW50IGluc3RhbmNlb2YgRGF0ZSB8fCBfdHlwZW9mKGFyZ3VtZW50KSA9PT0gJ29iamVjdCcgJiYgYXJnU3RyID09PSAnW29iamVjdCBEYXRlXScpIHtcbiAgICAvLyBQcmV2ZW50IHRoZSBkYXRlIHRvIGxvc2UgdGhlIG1pbGxpc2Vjb25kcyB3aGVuIHBhc3NlZCB0byBuZXcgRGF0ZSgpIGluIElFMTBcbiAgICByZXR1cm4gbmV3IERhdGUoYXJndW1lbnQuZ2V0VGltZSgpKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgYXJndW1lbnQgPT09ICdudW1iZXInIHx8IGFyZ1N0ciA9PT0gJ1tvYmplY3QgTnVtYmVyXScpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoYXJndW1lbnQpO1xuICB9IGVsc2Uge1xuICAgIGlmICgodHlwZW9mIGFyZ3VtZW50ID09PSAnc3RyaW5nJyB8fCBhcmdTdHIgPT09ICdbb2JqZWN0IFN0cmluZ10nKSAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBjb25zb2xlLndhcm4oXCJTdGFydGluZyB3aXRoIHYyLjAuMC1iZXRhLjEgZGF0ZS1mbnMgZG9lc24ndCBhY2NlcHQgc3RyaW5ncyBhcyBkYXRlIGFyZ3VtZW50cy4gUGxlYXNlIHVzZSBgcGFyc2VJU09gIHRvIHBhcnNlIHN0cmluZ3MuIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdXBncmFkZUd1aWRlLm1kI3N0cmluZy1hcmd1bWVudHNcIik7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG5cbiAgICAgIGNvbnNvbGUud2FybihuZXcgRXJyb3IoKS5zdGFjayk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIH1cbn0iLCJpbXBvcnQgdG9EYXRlIGZyb20gXCIuLi90b0RhdGUvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIHN0YXJ0T2ZEYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgUmV0dXJuIHRoZSBzdGFydCBvZiBhIGRheSBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgZGF5IGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqIFRoZSByZXN1bHQgd2lsbCBiZSBpbiB0aGUgbG9jYWwgdGltZXpvbmUuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBvcmlnaW5hbCBkYXRlXG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHN0YXJ0IG9mIGEgZGF5XG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVGhlIHN0YXJ0IG9mIGEgZGF5IGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZkRheShuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApKVxuICogLy89PiBUdWUgU2VwIDAyIDIwMTQgMDA6MDA6MDBcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzdGFydE9mRGF5KGRpcnR5RGF0ZSkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGUgPSB0b0RhdGUoZGlydHlEYXRlKTtcbiAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIGRhdGU7XG59IiwiaW1wb3J0IGlzU2FtZURheSBmcm9tIFwiLi4vaXNTYW1lRGF5L2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBpc1RvZGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IElzIHRoZSBnaXZlbiBkYXRlIHRvZGF5P1xuICogQHB1cmUgZmFsc2VcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIElzIHRoZSBnaXZlbiBkYXRlIHRvZGF5P1xuICpcbiAqID4g4pqg77iPIFBsZWFzZSBub3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBpcyBub3QgcHJlc2VudCBpbiB0aGUgRlAgc3VibW9kdWxlIGFzXG4gKiA+IGl0IHVzZXMgYERhdGUubm93KClgIGludGVybmFsbHkgaGVuY2UgaW1wdXJlIGFuZCBjYW4ndCBiZSBzYWZlbHkgY3VycmllZC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIGRhdGUgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZSBpcyB0b2RheVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRvZGF5IGlzIDYgT2N0b2JlciAyMDE0LCBpcyA2IE9jdG9iZXIgMTQ6MDA6MDAgdG9kYXk/XG4gKiBjb25zdCByZXN1bHQgPSBpc1RvZGF5KG5ldyBEYXRlKDIwMTQsIDksIDYsIDE0LCAwKSlcbiAqIC8vPT4gdHJ1ZVxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVG9kYXkoZGlydHlEYXRlKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICByZXR1cm4gaXNTYW1lRGF5KGRpcnR5RGF0ZSwgRGF0ZS5ub3coKSk7XG59IiwiaW1wb3J0IHN0YXJ0T2ZEYXkgZnJvbSBcIi4uL3N0YXJ0T2ZEYXkvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIGlzU2FtZURheVxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIGRheSAoYW5kIHllYXIgYW5kIG1vbnRoKT9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgZGF5IChhbmQgeWVhciBhbmQgbW9udGgpP1xuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVMZWZ0IC0gdGhlIGZpcnN0IGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVSaWdodCAtIHRoZSBzZWNvbmQgZGF0ZSB0byBjaGVja1xuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlcyBhcmUgaW4gdGhlIHNhbWUgZGF5IChhbmQgeWVhciBhbmQgbW9udGgpXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDIgYXJndW1lbnRzIHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSA0IFNlcHRlbWJlciAwNjowMDowMCBhbmQgNCBTZXB0ZW1iZXIgMTg6MDA6MDAgaW4gdGhlIHNhbWUgZGF5P1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQsIDYsIDApLCBuZXcgRGF0ZSgyMDE0LCA4LCA0LCAxOCwgMCkpXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDQgU2VwdGVtYmVyIGFuZCA0IE9jdG9iZXIgaW4gdGhlIHNhbWUgZGF5P1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQpLCBuZXcgRGF0ZSgyMDE0LCA5LCA0KSlcbiAqIC8vPT4gZmFsc2VcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDQgU2VwdGVtYmVyLCAyMDE0IGFuZCA0IFNlcHRlbWJlciwgMjAxNSBpbiB0aGUgc2FtZSBkYXk/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVEYXkobmV3IERhdGUoMjAxNCwgOCwgNCksIG5ldyBEYXRlKDIwMTUsIDgsIDQpKVxuICogLy89PiBmYWxzZVxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzU2FtZURheShkaXJ0eURhdGVMZWZ0LCBkaXJ0eURhdGVSaWdodCkge1xuICByZXF1aXJlZEFyZ3MoMiwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGVMZWZ0U3RhcnRPZkRheSA9IHN0YXJ0T2ZEYXkoZGlydHlEYXRlTGVmdCk7XG4gIHZhciBkYXRlUmlnaHRTdGFydE9mRGF5ID0gc3RhcnRPZkRheShkaXJ0eURhdGVSaWdodCk7XG4gIHJldHVybiBkYXRlTGVmdFN0YXJ0T2ZEYXkuZ2V0VGltZSgpID09PSBkYXRlUmlnaHRTdGFydE9mRGF5LmdldFRpbWUoKTtcbn0iLCJ2YXIgZGVmYXVsdE9wdGlvbnMgPSB7fTtcbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0T3B0aW9ucygpIHtcbiAgcmV0dXJuIGRlZmF1bHRPcHRpb25zO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNldERlZmF1bHRPcHRpb25zKG5ld09wdGlvbnMpIHtcbiAgZGVmYXVsdE9wdGlvbnMgPSBuZXdPcHRpb25zO1xufSIsImltcG9ydCB0b0RhdGUgZnJvbSBcIi4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHRvSW50ZWdlciBmcm9tIFwiLi4vX2xpYi90b0ludGVnZXIvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBnZXREZWZhdWx0T3B0aW9ucyB9IGZyb20gXCIuLi9fbGliL2RlZmF1bHRPcHRpb25zL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIHN0YXJ0T2ZXZWVrXG4gKiBAY2F0ZWdvcnkgV2VlayBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgd2VlayBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgd2VlayBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgb3JpZ2luYWwgZGF0ZVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMuXG4gKiBAcGFyYW0ge0xvY2FsZX0gW29wdGlvbnMubG9jYWxlPWRlZmF1bHRMb2NhbGVdIC0gdGhlIGxvY2FsZSBvYmplY3QuIFNlZSBbTG9jYWxlXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL0xvY2FsZX1cbiAqIEBwYXJhbSB7MHwxfDJ8M3w0fDV8Nn0gW29wdGlvbnMud2Vla1N0YXJ0c09uPTBdIC0gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsgKDAgLSBTdW5kYXkpXG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHN0YXJ0IG9mIGEgd2Vla1xuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy53ZWVrU3RhcnRzT25gIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApKVxuICogLy89PiBTdW4gQXVnIDMxIDIwMTQgMDA6MDA6MDBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdGhlIHdlZWsgc3RhcnRzIG9uIE1vbmRheSwgdGhlIHN0YXJ0IG9mIHRoZSB3ZWVrIGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZldlZWsobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSwgeyB3ZWVrU3RhcnRzT246IDEgfSlcbiAqIC8vPT4gTW9uIFNlcCAwMSAyMDE0IDAwOjAwOjAwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3RhcnRPZldlZWsoZGlydHlEYXRlLCBvcHRpb25zKSB7XG4gIHZhciBfcmVmLCBfcmVmMiwgX3JlZjMsIF9vcHRpb25zJHdlZWtTdGFydHNPbiwgX29wdGlvbnMkbG9jYWxlLCBfb3B0aW9ucyRsb2NhbGUkb3B0aW8sIF9kZWZhdWx0T3B0aW9ucyRsb2NhbCwgX2RlZmF1bHRPcHRpb25zJGxvY2FsMjtcblxuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGRlZmF1bHRPcHRpb25zID0gZ2V0RGVmYXVsdE9wdGlvbnMoKTtcbiAgdmFyIHdlZWtTdGFydHNPbiA9IHRvSW50ZWdlcigoX3JlZiA9IChfcmVmMiA9IChfcmVmMyA9IChfb3B0aW9ucyR3ZWVrU3RhcnRzT24gPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMud2Vla1N0YXJ0c09uKSAhPT0gbnVsbCAmJiBfb3B0aW9ucyR3ZWVrU3RhcnRzT24gIT09IHZvaWQgMCA/IF9vcHRpb25zJHdlZWtTdGFydHNPbiA6IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9vcHRpb25zJGxvY2FsZSA9IG9wdGlvbnMubG9jYWxlKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRsb2NhbGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfb3B0aW9ucyRsb2NhbGUkb3B0aW8gPSBfb3B0aW9ucyRsb2NhbGUub3B0aW9ucykgPT09IG51bGwgfHwgX29wdGlvbnMkbG9jYWxlJG9wdGlvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3B0aW9ucyRsb2NhbGUkb3B0aW8ud2Vla1N0YXJ0c09uKSAhPT0gbnVsbCAmJiBfcmVmMyAhPT0gdm9pZCAwID8gX3JlZjMgOiBkZWZhdWx0T3B0aW9ucy53ZWVrU3RhcnRzT24pICE9PSBudWxsICYmIF9yZWYyICE9PSB2b2lkIDAgPyBfcmVmMiA6IChfZGVmYXVsdE9wdGlvbnMkbG9jYWwgPSBkZWZhdWx0T3B0aW9ucy5sb2NhbGUpID09PSBudWxsIHx8IF9kZWZhdWx0T3B0aW9ucyRsb2NhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kZWZhdWx0T3B0aW9ucyRsb2NhbDIgPSBfZGVmYXVsdE9wdGlvbnMkbG9jYWwub3B0aW9ucykgPT09IG51bGwgfHwgX2RlZmF1bHRPcHRpb25zJGxvY2FsMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RlZmF1bHRPcHRpb25zJGxvY2FsMi53ZWVrU3RhcnRzT24pICE9PSBudWxsICYmIF9yZWYgIT09IHZvaWQgMCA/IF9yZWYgOiAwKTsgLy8gVGVzdCBpZiB3ZWVrU3RhcnRzT24gaXMgYmV0d2VlbiAwIGFuZCA2IF9hbmRfIGlzIG5vdCBOYU5cblxuICBpZiAoISh3ZWVrU3RhcnRzT24gPj0gMCAmJiB3ZWVrU3RhcnRzT24gPD0gNikpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignd2Vla1N0YXJ0c09uIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2IGluY2x1c2l2ZWx5Jyk7XG4gIH1cblxuICB2YXIgZGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUpO1xuICB2YXIgZGF5ID0gZGF0ZS5nZXREYXkoKTtcbiAgdmFyIGRpZmYgPSAoZGF5IDwgd2Vla1N0YXJ0c09uID8gNyA6IDApICsgZGF5IC0gd2Vla1N0YXJ0c09uO1xuICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgLSBkaWZmKTtcbiAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIGRhdGU7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9JbnRlZ2VyKGRpcnR5TnVtYmVyKSB7XG4gIGlmIChkaXJ0eU51bWJlciA9PT0gbnVsbCB8fCBkaXJ0eU51bWJlciA9PT0gdHJ1ZSB8fCBkaXJ0eU51bWJlciA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG5cbiAgdmFyIG51bWJlciA9IE51bWJlcihkaXJ0eU51bWJlcik7XG5cbiAgaWYgKGlzTmFOKG51bWJlcikpIHtcbiAgICByZXR1cm4gbnVtYmVyO1xuICB9XG5cbiAgcmV0dXJuIG51bWJlciA8IDAgPyBNYXRoLmNlaWwobnVtYmVyKSA6IE1hdGguZmxvb3IobnVtYmVyKTtcbn0iLCJpbXBvcnQgaXNTYW1lV2VlayBmcm9tIFwiLi4vaXNTYW1lV2Vlay9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcblxuLyoqXG4gKiBAbmFtZSBpc1RoaXNXZWVrXG4gKiBAY2F0ZWdvcnkgV2VlayBIZWxwZXJzXG4gKiBAc3VtbWFyeSBJcyB0aGUgZ2l2ZW4gZGF0ZSBpbiB0aGUgc2FtZSB3ZWVrIGFzIHRoZSBjdXJyZW50IGRhdGU/XG4gKiBAcHVyZSBmYWxzZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSXMgdGhlIGdpdmVuIGRhdGUgaW4gdGhlIHNhbWUgd2VlayBhcyB0aGUgY3VycmVudCBkYXRlP1xuICpcbiAqID4g4pqg77iPIFBsZWFzZSBub3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBpcyBub3QgcHJlc2VudCBpbiB0aGUgRlAgc3VibW9kdWxlIGFzXG4gKiA+IGl0IHVzZXMgYERhdGUubm93KClgIGludGVybmFsbHkgaGVuY2UgaW1wdXJlIGFuZCBjYW4ndCBiZSBzYWZlbHkgY3VycmllZC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSB0aGUgb2JqZWN0IHdpdGggb3B0aW9uc1xuICogQHBhcmFtIHtMb2NhbGV9IFtvcHRpb25zLmxvY2FsZT1kZWZhdWx0TG9jYWxlXSAtIHRoZSBsb2NhbGUgb2JqZWN0LiBTZWUgW0xvY2FsZV17QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9Mb2NhbGV9XG4gKiBAcGFyYW0gezB8MXwyfDN8NHw1fDZ9IFtvcHRpb25zLndlZWtTdGFydHNPbj0wXSAtIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrICgwIC0gU3VuZGF5KVxuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlIGlzIGluIHRoaXMgd2Vla1xuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy53ZWVrU3RhcnRzT25gIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRvZGF5IGlzIDI1IFNlcHRlbWJlciAyMDE0LCBpcyAyMSBTZXB0ZW1iZXIgMjAxNCBpbiB0aGlzIHdlZWs/XG4gKiBjb25zdCByZXN1bHQgPSBpc1RoaXNXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIxKSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB0b2RheSBpcyAyNSBTZXB0ZW1iZXIgMjAxNCBhbmQgd2VlayBzdGFydHMgd2l0aCBNb25kYXlcbiAqIC8vIGlzIDIxIFNlcHRlbWJlciAyMDE0IGluIHRoaXMgd2Vlaz9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzVGhpc1dlZWsobmV3IERhdGUoMjAxNCwgOCwgMjEpLCB7IHdlZWtTdGFydHNPbjogMSB9KVxuICogLy89PiBmYWxzZVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1RoaXNXZWVrKGRpcnR5RGF0ZSwgb3B0aW9ucykge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgcmV0dXJuIGlzU2FtZVdlZWsoZGlydHlEYXRlLCBEYXRlLm5vdygpLCBvcHRpb25zKTtcbn0iLCJpbXBvcnQgc3RhcnRPZldlZWsgZnJvbSBcIi4uL3N0YXJ0T2ZXZWVrL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuXG4vKipcbiAqIEBuYW1lIGlzU2FtZVdlZWtcbiAqIEBjYXRlZ29yeSBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgd2VlayAoYW5kIG1vbnRoIGFuZCB5ZWFyKT9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgd2VlayAoYW5kIG1vbnRoIGFuZCB5ZWFyKT9cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlTGVmdCAtIHRoZSBmaXJzdCBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlUmlnaHQgLSB0aGUgc2Vjb25kIGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zLlxuICogQHBhcmFtIHtMb2NhbGV9IFtvcHRpb25zLmxvY2FsZT1kZWZhdWx0TG9jYWxlXSAtIHRoZSBsb2NhbGUgb2JqZWN0LiBTZWUgW0xvY2FsZV17QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9Mb2NhbGV9XG4gKiBAcGFyYW0gezB8MXwyfDN8NHw1fDZ9IFtvcHRpb25zLndlZWtTdGFydHNPbj0wXSAtIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrICgwIC0gU3VuZGF5KVxuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlcyBhcmUgaW4gdGhlIHNhbWUgd2VlayAoYW5kIG1vbnRoIGFuZCB5ZWFyKVxuICogQHRocm93cyB7VHlwZUVycm9yfSAyIGFyZ3VtZW50cyByZXF1aXJlZFxuICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMud2Vla1N0YXJ0c09uYCBtdXN0IGJlIGJldHdlZW4gMCBhbmQgNlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgMzEgQXVndXN0IDIwMTQgYW5kIDQgU2VwdGVtYmVyIDIwMTQgaW4gdGhlIHNhbWUgd2Vlaz9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZVdlZWsobmV3IERhdGUoMjAxNCwgNywgMzEpLCBuZXcgRGF0ZSgyMDE0LCA4LCA0KSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB3ZWVrIHN0YXJ0cyB3aXRoIE1vbmRheSxcbiAqIC8vIGFyZSAzMSBBdWd1c3QgMjAxNCBhbmQgNCBTZXB0ZW1iZXIgMjAxNCBpbiB0aGUgc2FtZSB3ZWVrP1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lV2VlayhuZXcgRGF0ZSgyMDE0LCA3LCAzMSksIG5ldyBEYXRlKDIwMTQsIDgsIDQpLCB7XG4gKiAgIHdlZWtTdGFydHNPbjogMVxuICogfSlcbiAqIC8vPT4gZmFsc2VcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDEgSmFudWFyeSAyMDE0IGFuZCAxIEphbnVhcnkgMjAxNSBpbiB0aGUgc2FtZSB3ZWVrP1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lV2VlayhuZXcgRGF0ZSgyMDE0LCAwLCAxKSwgbmV3IERhdGUoMjAxNSwgMCwgMSkpXG4gKiAvLz0+IGZhbHNlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzU2FtZVdlZWsoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQsIG9wdGlvbnMpIHtcbiAgcmVxdWlyZWRBcmdzKDIsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlTGVmdFN0YXJ0T2ZXZWVrID0gc3RhcnRPZldlZWsoZGlydHlEYXRlTGVmdCwgb3B0aW9ucyk7XG4gIHZhciBkYXRlUmlnaHRTdGFydE9mV2VlayA9IHN0YXJ0T2ZXZWVrKGRpcnR5RGF0ZVJpZ2h0LCBvcHRpb25zKTtcbiAgcmV0dXJuIGRhdGVMZWZ0U3RhcnRPZldlZWsuZ2V0VGltZSgpID09PSBkYXRlUmlnaHRTdGFydE9mV2Vlay5nZXRUaW1lKCk7XG59IiwiaW1wb3J0IHsgaXNUaGlzV2VlaywgaXNUb2RheSB9IGZyb20gJ2RhdGUtZm5zJztcbmltcG9ydCBhZGRQcm9qZWN0TGlzdCBmcm9tICcuL2FkZFByb2plY3QnXG5cbmNvbnN0IGRvbSA9IChmdW5jdGlvbiAoKSB7XG4gICAgXG4gICAgbGV0IGluZGV4XG4gICAgbGV0IHRhc2tJbmRleCA9IDBcbiAgICBsZXQgb3BlblByb2plY3RcbiAgICBsZXQgdGFyZ2V0UHJvamVjdCBcbiAgICBsZXQgdGFyZ2V0UHJvamVjdFRpdGxlXG4gICAgY29uc3QgcHJvamVjdHNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3RzLWxpc3RzJylcbiAgICBjb25zdCBtYWluQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLWNvbnRlbnQnKVxuICAgIGNvbnN0IGR1ZUNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHVlLWNvbnRlbnQnKVxuICAgIGNvbnN0IHByb2plY3RUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LXRpdGxlJylcbiAgICBjb25zdCBwcm9qZWN0RGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC1kZXNjcmlwdGlvbicpXG4gICAgY29uc3QgcHJvamVjdER1ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LWR1ZScpXG4gICAgY29uc3QgcHJvamVjdFByaW9yaXR5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByaW9yaXR5JylcbiAgICBjb25zdCB0YXNrQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2stYnV0dG9uJylcbiAgICBjb25zdCBhbGxUYXNrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGwtdGFza3MnKVxuICAgIGNvbnN0IGR1ZVRvZGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmR1ZS10b2RheScpXG4gICAgY29uc3QgZHVlVGhpc1dlZWsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHVlLXRoaXMtd2VlaycpXG4gICAgY29uc3QgZHVlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHVlLXRpdGxlJylcbiAgICBjb25zdCBkdWVQcm9qZWN0TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kdWUtcHJvamVjdHMtbGlzdHMnKVxuICAgIGNvbnN0IHByaW9yaXR5VGFiID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByaW9yaXR5LXRhYicpXG5cbiAgICBjb25zdCBjcmVhdGVQcm9qZWN0RGl2ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIGNvbnN0IGRlbGV0ZVByb2plY3RCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgICAgICBjb25zdCBlZGl0UHJvamVjdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gICAgICAgIGNvbnN0IHByb2plY3REaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICBjb25zdCBwcm9qZWN0VGl0bGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuXG4gICAgICAgIHByb2plY3REaXYuY2xhc3NMaXN0LmFkZCgncHJvamVjdC1kaXNwbGF5JylcbiAgICAgICAgcHJvamVjdHNMaXN0LmFwcGVuZENoaWxkKHByb2plY3REaXYpXG5cbiAgICAgICAgcHJvamVjdFRpdGxlRGl2LmNsYXNzTGlzdC5hZGQoJ3Byb2plY3QnKVxuICAgICAgICBwcm9qZWN0VGl0bGVEaXYudGV4dENvbnRlbnQgPSBhZGRQcm9qZWN0TGlzdC5teVByb2plY3RBcnJheVsoYWRkUHJvamVjdExpc3QubXlQcm9qZWN0QXJyYXkpLmxlbmd0aCAtIDFdWyd0aXRsZSddXG4gICAgICAgIHByb2plY3REaXYuYXBwZW5kQ2hpbGQocHJvamVjdFRpdGxlRGl2KVxuXG4gICAgICAgIGRlbGV0ZVByb2plY3RCdXR0b24uY2xhc3NMaXN0LmFkZCgnZGVsZXRlLXByb2plY3QtYnV0dG9uJylcbiAgICAgICAgZGVsZXRlUHJvamVjdEJ1dHRvbi5pbm5lckhUTUwgPSAnPHN2ZyBjbGFzcz1cImRlbGV0ZVNWR1wiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+PHBhdGggY2xhc3M9XCJkZWxldGVTVkdcIiBkPVwiTTE5LDRIMTUuNUwxNC41LDNIOS41TDguNSw0SDVWNkgxOU02LDE5QTIsMiAwIDAsMCA4LDIxSDE2QTIsMiAwIDAsMCAxOCwxOVY3SDZWMTlaXCIgLz48L3N2Zz4nXG4gICAgICAgIHByb2plY3REaXYuYXBwZW5kQ2hpbGQoZGVsZXRlUHJvamVjdEJ1dHRvbilcblxuICAgICAgICBlZGl0UHJvamVjdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdlZGl0LXByb2plY3QtYnV0dG9uJylcbiAgICAgICAgZWRpdFByb2plY3RCdXR0b24uaW5uZXJIVE1MID0gJzxzdmcgY2xhc3M9XCJlZGl0U1ZHXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj48cGF0aCBjbGFzcz1cImVkaXRTVkdcIiBkPVwiTTUsM0MzLjg5LDMgMywzLjg5IDMsNVYxOUEyLDIgMCAwLDAgNSwyMUgxOUEyLDIgMCAwLDAgMjEsMTlWMTJIMTlWMTlINVY1SDEyVjNINU0xNy43OCw0QzE3LjYxLDQgMTcuNDMsNC4wNyAxNy4zLDQuMkwxNi4wOCw1LjQxTDE4LjU4LDcuOTFMMTkuOCw2LjdDMjAuMDYsNi40NCAyMC4wNiw2IDE5LjgsNS43NUwxOC4yNSw0LjJDMTguMTIsNC4wNyAxNy45NSw0IDE3Ljc4LDRNMTUuMzcsNi4xMkw4LDEzLjVWMTZIMTAuNUwxNy44Nyw4LjYyTDE1LjM3LDYuMTJaXCIgLz48L3N2Zz4nXG4gICAgICAgIHByb2plY3REaXYuYXBwZW5kQ2hpbGQoZWRpdFByb2plY3RCdXR0b24pXG4gICAgfVxuXG4gICAgY29uc3QgZWRpdFByb2plY3REaXYgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgdGFyZ2V0UHJvamVjdFRpdGxlLnRleHRDb250ZW50ID0gb3BlblByb2plY3RbJ3RpdGxlJ11cbiAgICB9XG5cbiAgICBjb25zdCBkZWxldGVQcm9qZWN0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG5cbiAgICAgICAgaWYgKGFkZFByb2plY3RMaXN0Lm15UHJvamVjdEFycmF5W2luZGV4XSA9PT0gb3BlblByb2plY3QpIHtcbiAgICAgICAgICAgIG1haW5Db250ZW50LnN0eWxlLmRpc3BsYXk9J25vbmUnXG4gICAgICAgIH1cblxuICAgICAgICBhZGRQcm9qZWN0TGlzdC5teVByb2plY3RBcnJheS5zcGxpY2UoaW5kZXggLCAxKVxuICAgIH1cblxuICAgIGNvbnN0IGdlbmVyYXRlTmV3VGFzayA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBjb25zdCBuZXdUYXNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgbmV3VGFzay5jbGFzc0xpc3QuYWRkKCdpbmRpdmlkdWFsLXRhc2snKVxuICAgICAgICBhbGxUYXNrcy5hcHBlbmRDaGlsZChuZXdUYXNrKVxuXG4gICAgICAgIGNvbnN0IG5ld0NoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgbmV3Q2hlY2tib3guY2xhc3NMaXN0LmFkZCgndGFzay1jaGVja2JveC1kaXYnKVxuICAgICAgICBuZXdUYXNrLmFwcGVuZENoaWxkKG5ld0NoZWNrYm94KVxuICAgICAgICBuZXdDaGVja2JveC5pbm5lckhUTUwgPSAnPGxhYmVsIGZvcj1cInRhc2sxLWNoZWNrYm94XCI+PC9sYWJlbD48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2xhc3MgPSBcInRhc2stY2hlY2tib3hcIiBpZD1cInRhc2sxLWNoZWNrYm94XCIgbmFtZT1cImNoZWNrYm94XCI+J1xuICAgICAgICBcbiAgICAgICAgY29uc3QgbmV3SW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICBuZXdJbnB1dC5jbGFzc0xpc3QuYWRkKCd0YXNrLWlucHV0LWRpdicpXG4gICAgICAgIG5ld1Rhc2suYXBwZW5kQ2hpbGQobmV3SW5wdXQpXG4gICAgICAgIG5ld0lucHV0LmlubmVySFRNTCA9ICc8bGFiZWwgZm9yPVwidGFzazEtaW5wdXRcIj48L2xhYmVsPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwidGFzay1pbnB1dFwiIGlkPVwidGFzazEtaW5wdXRcIiBuYW1lPVwidGFza1wiIHJlcXVpcmVkPidcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRhc2tEZWxldGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICB0YXNrRGVsZXRlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3Rhc2stZGVsZXRlLWJ1dHRvbicpXG4gICAgICAgIG5ld1Rhc2suYXBwZW5kQ2hpbGQodGFza0RlbGV0ZUJ1dHRvbilcbiAgICAgICAgdGFza0RlbGV0ZUJ1dHRvbi5pbm5lckhUTUwgPSAnPHN2ZyBjbGFzcz1cImRlbGV0ZVNWR1wiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+PHBhdGggY2xhc3M9XCJkZWxldGVTVkdcIiBkPVwiTTE5LDRIMTUuNUwxNC41LDNIOS41TDguNSw0SDVWNkgxOU02LDE5QTIsMiAwIDAsMCA4LDIxSDE2QTIsMiAwIDAsMCAxOCwxOVY3SDZWMTlaXCIgLz48L3N2Zz4nXG4gICAgICAgICBcbiAgICB9XG5cbiAgICBjb25zdCBnZW5lcmF0ZVRhc2tPYmplY3QgPSBmdW5jdGlvbiAodGFza05hbWUsIGlzQ29tcGxldGVkKSB7XG5cbiAgICAgICAgaWYgKGlzQ29tcGxldGVkID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaXNDb21wbGV0ZWQgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICAgXG4gICAgICAgIHJldHVybiB7dGFza05hbWUsIGlzQ29tcGxldGVkfVxuICAgIH1cblxuICAgIGNvbnN0IGdlbmVyYXRlVGFza0xpc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3BlblByb2plY3RbJ3Rhc2tzJ10ubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgZ2VuZXJhdGVOZXdUYXNrKClcblxuICAgICAgICAgICAgY29uc3QgdGFza0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhc2staW5wdXQnKVxuICAgICAgICAgICAgY29uc3QgY2hlY2tCb3ggID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhc2stY2hlY2tib3gnKVxuICAgICAgICAgICAgdGFza0lucHV0W2ldLnZhbHVlID0gb3BlblByb2plY3RbJ3Rhc2tzJ11baV1bJ3Rhc2tOYW1lJ11cbiAgICAgICAgICAgIGNoZWNrQm94W2ldLmNoZWNrZWQgPSBvcGVuUHJvamVjdFsndGFza3MnXVtpXVsnaXNDb21wbGV0ZWQnXVxuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBjbGVhclRhc2tMaXN0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIGNvbnN0IGluZGl2aWR1YWxUYXNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmluZGl2aWR1YWwtdGFzaycpXG4gICAgICAgXG4gICAgICAgIGluZGl2aWR1YWxUYXNrLmZvckVhY2goKHRhc2spID0+IHtcbiAgICAgICAgICAgIGFsbFRhc2tzLnJlbW92ZUNoaWxkKHRhc2spXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgY29uc3QgZ2VuZXJhdGVEdWVQcm9qZWN0cyA9IGZ1bmN0aW9uIChkdWVUeXBlKSB7XG4gICAgICAgIFxuICAgICAgICBtYWluQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgIGR1ZUNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdmbGV4J1xuICAgICAgIFxuICAgICAgICB3aGlsZSAoZHVlUHJvamVjdExpc3QuaGFzQ2hpbGROb2RlcygpKXtcbiAgICAgICAgICAgIGR1ZVByb2plY3RMaXN0LnJlbW92ZUNoaWxkKGR1ZVByb2plY3RMaXN0LmZpcnN0Q2hpbGQpXG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFkZFByb2plY3RMaXN0Lm15UHJvamVjdEFycmF5Lmxlbmd0aDsgaSsrKXtcblxuICAgICAgICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZShgJHthZGRQcm9qZWN0TGlzdC5teVByb2plY3RBcnJheVtpXVsnZGF0ZSddfWAgKyBgQ0RUYClcblxuICAgICAgICAgICAgaWYgKGR1ZVR5cGUgPT0gJ2lzVG9kYXknKSB7XG5cbiAgICAgICAgICAgICAgICBkdWVUaXRsZS50ZXh0Q29udGVudCA9ICdEdWUgVG9kYXknXG5cbiAgICAgICAgICAgICAgICBpZiAoaXNUb2RheShuZXcgRGF0ZShkYXRlKSkpIHtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkdWVQcm9qZWN0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgICAgICAgICAgICAgZHVlUHJvamVjdERpdi5jbGFzc0xpc3QuYWRkKCdkdWUtcHJvamVjdCcpXG4gICAgICAgICAgICAgICAgICAgIGR1ZVByb2plY3RMaXN0LmFwcGVuZENoaWxkKGR1ZVByb2plY3REaXYpXG4gICAgICAgICAgICAgICAgICAgIGR1ZVByb2plY3REaXYudGV4dENvbnRlbnQgPSBhZGRQcm9qZWN0TGlzdC5teVByb2plY3RBcnJheVtpXVsndGl0bGUnXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZHVlVHlwZSA9PSAnaXNUaGlzV2VlaycpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBkdWVUaXRsZS50ZXh0Q29udGVudCA9ICdEdWUgVGhpcyBXZWVrJ1xuXG4gICAgICAgICAgICAgICAgaWYgKGlzVGhpc1dlZWsobmV3IERhdGUoZGF0ZSkpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZHVlUHJvamVjdERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgICAgICAgICAgICAgIGR1ZVByb2plY3REaXYuY2xhc3NMaXN0LmFkZCgnZHVlLXByb2plY3QnKVxuICAgICAgICAgICAgICAgICAgICBkdWVQcm9qZWN0TGlzdC5hcHBlbmRDaGlsZChkdWVQcm9qZWN0RGl2KVxuICAgICAgICAgICAgICAgICAgICBkdWVQcm9qZWN0RGl2LnRleHRDb250ZW50ID0gYWRkUHJvamVjdExpc3QubXlQcm9qZWN0QXJyYXlbaV1bJ3RpdGxlJ11cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ICBcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGdlbmVyYXRlUHJpb3JpdHlQcm9qZWN0cyA9IGZ1bmN0aW9uIChwcmlvcml0eSkge1xuXG4gICAgICAgIG1haW5Db250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgICAgZHVlQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnXG4gICAgICAgXG4gICAgICAgIHdoaWxlIChkdWVQcm9qZWN0TGlzdC5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgICAgICAgIGR1ZVByb2plY3RMaXN0LnJlbW92ZUNoaWxkKGR1ZVByb2plY3RMaXN0LmZpcnN0Q2hpbGQpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAocHJpb3JpdHkgPT0gJ2xvdycpIHtcblxuICAgICAgICAgICAgZHVlVGl0bGUudGV4dENvbnRlbnQgPSAnTG93IFByaW9yaXR5IFByb2plY3RzJ1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFkZFByb2plY3RMaXN0Lm15UHJvamVjdEFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGFkZFByb2plY3RMaXN0Lm15UHJvamVjdEFycmF5W2ldWydwcmlvcml0eSddID09ICdMb3cnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGR1ZVByb2plY3REaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICAgICAgICAgICAgICBkdWVQcm9qZWN0RGl2LmNsYXNzTGlzdC5hZGQoJ2R1ZS1wcm9qZWN0JylcbiAgICAgICAgICAgICAgICAgICAgZHVlUHJvamVjdExpc3QuYXBwZW5kQ2hpbGQoZHVlUHJvamVjdERpdilcbiAgICAgICAgICAgICAgICAgICAgZHVlUHJvamVjdERpdi50ZXh0Q29udGVudCA9IGFkZFByb2plY3RMaXN0Lm15UHJvamVjdEFycmF5W2ldWyd0aXRsZSddXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHByaW9yaXR5ID09ICdtZWQnKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGR1ZVRpdGxlLnRleHRDb250ZW50ID0gJ01lZGl1bSBQcmlvcml0eSBQcm9qZWN0cydcblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhZGRQcm9qZWN0TGlzdC5teVByb2plY3RBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChhZGRQcm9qZWN0TGlzdC5teVByb2plY3RBcnJheVtpXVsncHJpb3JpdHknXSA9PSAnTWVkaXVtJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkdWVQcm9qZWN0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgICAgICAgICAgICAgZHVlUHJvamVjdERpdi5jbGFzc0xpc3QuYWRkKCdkdWUtcHJvamVjdCcpXG4gICAgICAgICAgICAgICAgICAgIGR1ZVByb2plY3RMaXN0LmFwcGVuZENoaWxkKGR1ZVByb2plY3REaXYpXG4gICAgICAgICAgICAgICAgICAgIGR1ZVByb2plY3REaXYudGV4dENvbnRlbnQgPSBhZGRQcm9qZWN0TGlzdC5teVByb2plY3RBcnJheVtpXVsndGl0bGUnXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChwcmlvcml0eSA9PSAnaGlnaCcpIHtcbiAgICAgICAgICAgIGR1ZVRpdGxlLnRleHRDb250ZW50ID0gJ0hpZ2ggUHJpb3JpdHkgUHJvamVjdHMnXG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWRkUHJvamVjdExpc3QubXlQcm9qZWN0QXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoYWRkUHJvamVjdExpc3QubXlQcm9qZWN0QXJyYXlbaV1bJ3ByaW9yaXR5J10gPT0gJ0hpZ2gnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGR1ZVByb2plY3REaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICAgICAgICAgICAgICBkdWVQcm9qZWN0RGl2LmNsYXNzTGlzdC5hZGQoJ2R1ZS1wcm9qZWN0JylcbiAgICAgICAgICAgICAgICAgICAgZHVlUHJvamVjdExpc3QuYXBwZW5kQ2hpbGQoZHVlUHJvamVjdERpdilcbiAgICAgICAgICAgICAgICAgICAgZHVlUHJvamVjdERpdi50ZXh0Q29udGVudCA9IGFkZFByb2plY3RMaXN0Lm15UHJvamVjdEFycmF5W2ldWyd0aXRsZSddXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHByb2plY3RzTGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChwcm9qZWN0KSA9PiB7XG4gICAgICAgIGlmICgocHJvamVjdC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwcm9qZWN0JykpIHx8XG4gICAgICAgICAgICAocHJvamVjdC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkZWxldGVTVkcnKSkgfHxcbiAgICAgICAgICAgIChwcm9qZWN0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2VkaXRTVkcnKSkpIHtcbiAgICAgICAgXG4gICAgICAgICAgICB0YXJnZXRQcm9qZWN0ID0gcHJvamVjdC50YXJnZXQuY2xvc2VzdCgnLnByb2plY3QtZGlzcGxheScpXG4gICAgICAgICAgICBpbmRleCA9IEFycmF5LmZyb20odGFyZ2V0UHJvamVjdC5wYXJlbnROb2RlLmNoaWxkcmVuKS5pbmRleE9mKHRhcmdldFByb2plY3QpXG4gICAgICAgICAgICBvcGVuUHJvamVjdCA9IGFkZFByb2plY3RMaXN0Lm15UHJvamVjdEFycmF5W2luZGV4XVxuICAgICAgICB9XG4gICAgfSlcbiAgICAgXG4gICAgLy8gRXZlbnQgaGFuZGxlciB3aGVuIGEgcHJvamVjdCBpcyBkZWxldGVkXG4gICAgcHJvamVjdHNMaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKHByb2plY3QpID0+IHtcbiAgICAgICAgaWYgKHByb2plY3QudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZGVsZXRlU1ZHJykpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb2plY3REaXYgPSBwcm9qZWN0LnRhcmdldC5jbG9zZXN0KCcucHJvamVjdC1kaXNwbGF5JylcbiAgICAgICAgICAgIGRlbGV0ZVByb2plY3QoaW5kZXgpXG4gICAgICAgICAgICBwcm9qZWN0c0xpc3QucmVtb3ZlQ2hpbGQocHJvamVjdERpdilcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgfSlcblxuICAgIC8vIEV2ZW50IGhhbmRsZXIgd2hlbiBhIHByb2plY3QgZWRpdCBidXR0b24gaXMgY2xpY2tlZFxuICAgIHByb2plY3RzTGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChwcm9qZWN0KSA9PiB7XG5cbiAgICAgICAgaWYgKHByb2plY3QudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZWRpdFNWRycpKSB7XG5cbiAgICAgICAgICAgIGFkZFByb2plY3RMaXN0LmRpc3BsYXlFZGl0Rm9ybShpbmRleClcblxuICAgICAgICAgICAgdGFyZ2V0UHJvamVjdFRpdGxlID0gdGFyZ2V0UHJvamVjdC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdCcpXG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gRXZlbnQgaGFuZGxlciB3aGVuIGEgcHJvamVjdCBpcyBjbGlja2VkXG4gICAgcHJvamVjdHNMaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKHByb2plY3QpID0+IHtcbiAgICAgICAgaWYgKHByb2plY3QudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncHJvamVjdCcpKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG1haW5Db250ZW50LnN0eWxlLmRpc3BsYXkgPSAnZmxleCdcbiAgICAgICAgICAgIGR1ZUNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuXG4gICAgICAgICAgICBwcm9qZWN0VGl0bGUudGV4dENvbnRlbnQgPSBvcGVuUHJvamVjdFsndGl0bGUnXVxuICAgICAgICAgICAgcHJvamVjdERlc2NyaXB0aW9uLnRleHRDb250ZW50ICA9IG9wZW5Qcm9qZWN0WydkZXNjcmlwdGlvbiddXG4gICAgICAgICAgICBwcm9qZWN0RHVlLnRleHRDb250ZW50ICA9IG9wZW5Qcm9qZWN0WydkYXRlJ11cbiAgICAgICAgICAgIHByb2plY3RQcmlvcml0eS50ZXh0Q29udGVudCA9IGAoYCtgJHtvcGVuUHJvamVjdFsncHJpb3JpdHknXX1gXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNsZWFyVGFza0xpc3QoKVxuICAgICAgICAgICAgZ2VuZXJhdGVUYXNrTGlzdCgpXG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgYWxsVGFza3MuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXNrLWNoZWNrYm94JykpIHx8XG4gICAgICAgICAgICAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygndGFzay1pbnB1dCcpKSB8fFxuICAgICAgICAgICAgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2RlbGV0ZVNWRycpKSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsZXQgdGFyZ2V0VGFzayA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcuaW5kaXZpZHVhbC10YXNrJylcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGFza0luZGV4ID0gQXJyYXkuZnJvbSh0YXJnZXRUYXNrLnBhcmVudE5vZGUuY2hpbGRyZW4pLmluZGV4T2YodGFyZ2V0VGFzaylcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBFdmVudCBoYW5kbGVyIGZvciBuZXcgdGFzayBjcmVhdGlvblxuICAgIHRhc2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgXG4gICAgICAgIGdlbmVyYXRlTmV3VGFzaygpXG4gICAgXG4gICAgICAgIGxldCB0YXNrTmFtZVxuICAgICAgICBsZXQgaXNDb21wbGV0ZWQgXG4gICAgICAgXG4gICAgICAgIGFsbFRhc2tzLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChldmVudCkgPT4ge1xuXG4gICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygndGFzay1jaGVja2JveCcpKSB7XG5cbiAgICAgICAgICAgICAgICBpc0NvbXBsZXRlZCA9IGV2ZW50LnRhcmdldC5jaGVja2VkXG4gICAgICAgICAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGdlbmVyYXRlVGFza09iamVjdCh0YXNrTmFtZSwgaXNDb21wbGV0ZWQpXG4gICAgICAgICAgICAgICAgYWRkUHJvamVjdExpc3QubXlQcm9qZWN0QXJyYXlbaW5kZXhdWyd0YXNrcyddW3Rhc2tJbmRleF0gPSB0YXNrT2JqZWN0XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygndGFzay1pbnB1dCcpKSB7XG5cbiAgICAgICAgICAgICAgICB0YXNrTmFtZSA9IGV2ZW50LnRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBnZW5lcmF0ZVRhc2tPYmplY3QodGFza05hbWUsIGlzQ29tcGxldGVkKVxuICAgICAgICAgICAgICAgIGFkZFByb2plY3RMaXN0Lm15UHJvamVjdEFycmF5W2luZGV4XVsndGFza3MnXVt0YXNrSW5kZXhdID0gdGFza09iamVjdFxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICAvLyBFdmVudCBoYW5kbGVyIGZvciBkZWxldGluZyBhIHRhc2tcbiAgICBhbGxUYXNrcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZGVsZXRlU1ZHJykpIHtcblxuICAgICAgICAgICAgY29uc3QgY3VycmVudFRhc2sgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnLmluZGl2aWR1YWwtdGFzaycpXG4gICAgICAgICAgICBhZGRQcm9qZWN0TGlzdC5teVByb2plY3RBcnJheVtpbmRleF1bJ3Rhc2tzJ10uc3BsaWNlKHRhc2tJbmRleCwxKVxuICAgICAgICAgICAgYWxsVGFza3MucmVtb3ZlQ2hpbGQoY3VycmVudFRhc2spXG4gICAgICAgIH1cbiAgICB9KSBcblxuICAgIC8vIEV2ZW50IGhhbmRsZXIgZm9yIHNvcnRpbmcgYnkgZHVlIGRhdGVcbiAgICBkdWVUb2RheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgZ2VuZXJhdGVEdWVQcm9qZWN0cygnaXNUb2RheScpXG4gICAgfSlcblxuICAgIC8vIEV2ZW50IGhhbmRsZXIgZm9yIHNvcnRpbmcgYnkgZHVlIGRhdGVcbiAgICBkdWVUaGlzV2Vlay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgIGdlbmVyYXRlRHVlUHJvamVjdHMoJ2lzVGhpc1dlZWsnKSAgICAgICBcbiAgICB9KVxuXG4gICAgLy8gRXZlbnQgaGFuZGxlciBmb3Igc29ydGluZyBieSBwcmlvcml0eSBcbiAgICBwcmlvcml0eVRhYi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncHJpb3JpdHktbG93JykpIHtcbiAgICAgICAgICAgIGdlbmVyYXRlUHJpb3JpdHlQcm9qZWN0cygnbG93JylcbiAgICAgICAgfSBlbHNlIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwcmlvcml0eS1tZWQnKSkge1xuICAgICAgICAgICAgZ2VuZXJhdGVQcmlvcml0eVByb2plY3RzKCdtZWQnKVxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3ByaW9yaXR5LWhpZ2gnKSkge1xuICAgICAgICAgICAgZ2VuZXJhdGVQcmlvcml0eVByb2plY3RzKCdoaWdoJylcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4ge1xuICAgICAgICBjcmVhdGVQcm9qZWN0RGl2LFxuICAgICAgICBlZGl0UHJvamVjdERpdixcbiAgICAgICAgZGVsZXRlUHJvamVjdCxcbiAgICAgICAgaW5kZXhcbiAgICB9XG5cbn0pKCk7XG4gICAgXG5leHBvcnQgZGVmYXVsdCBkb20iLCJpbXBvcnQgZG9tIGZyb20gJy4vRE9NJ1xuXG5jb25zdCBhZGRQcm9qZWN0TGlzdCA9IChmdW5jdGlvbiAoKSB7XG5cbiAgICBjb25zdCBhZGRQcm9qZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC1wcm9qZWN0JylcbiAgICBjb25zdCBlZGl0UHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0LXByb2plY3QnKVxuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXByb2plY3QtZm9ybScpXG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGl0bGUnKVxuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Rlc2NyaXB0aW9uJylcbiAgICBjb25zdCBkYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RhdGUnKVxuICAgIGNvbnN0IHByaW9yaXR5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2plY3QtcHJpb3JpdHktYnV0dG9uJylcbiAgICBjb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkJylcbiAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FuY2VsJylcbiAgICBjb25zdCBlZGl0VGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZWRpdC10aXRsZScpXG4gICAgY29uc3QgZWRpdERlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2VkaXQtZGVzY3JpcHRpb24nKVxuICAgIGNvbnN0IGVkaXREYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2VkaXQtZGF0ZScpXG4gICAgY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0JylcbiAgICBjb25zdCBlZGl0Q2FuY2VsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXQtY2FuY2VsJylcblxuICAgIGxldCBvcGVuUHJvamVjdFxuICAgIGxldCBteVByb2plY3RBcnJheSA9IFtdXG4gICAgbGV0IHByaW9yaXR5VmFsdWUgPSAnTG93J1xuICAgXG4gICAgY29uc3QgZGlzcGxheUZvcm0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIFxuICAgICAgICBmb3JtLnJlc2V0KClcbiAgICAgICAgYWRkUHJvamVjdC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnXG5cbiAgICAgICAgYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAodGl0bGUudmFsdWUgIT0gJycpIHtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3UHJvamVjdCA9IGNyZWF0ZVByb2plY3QodGl0bGUudmFsdWUsIGRlc2NyaXB0aW9uLnZhbHVlLCBkYXRlLnZhbHVlLCBwcmlvcml0eVZhbHVlKVxuICAgICAgICAgICAgICAgIG15UHJvamVjdEFycmF5LnB1c2gobmV3UHJvamVjdClcbiAgICAgICAgICAgICAgICBkb20uY3JlYXRlUHJvamVjdERpdigpXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobXlQcm9qZWN0QXJyYXkpXG4gICAgICAgICAgICAgICAgYWRkUHJvamVjdC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgICAgICAgICAgcHJpb3JpdHlWYWx1ZSA9ICdMb3cnXG4gICAgICAgICAgICAgICAgZm9ybS5yZXNldCgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgYWRkUHJvamVjdC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgICAgICBmb3JtLnJlc2V0KClcbiAgICAgICAgfSlcblxuICAgICAgICBhZGRQcm9qZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ID09IGFkZFByb2plY3QpIHtcbiAgICAgICAgICAgICAgICBhZGRQcm9qZWN0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBwcmlvcml0eS5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgcHJpb3JpdHlWYWx1ZSA9IGJ1dHRvbi50ZXh0Q29udGVudFxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHByaW9yaXR5VmFsdWUpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGNvbnN0IGRpc3BsYXlFZGl0Rm9ybSA9IGZ1bmN0aW9uIChpbmRleCkge1xuXG4gICAgICAgIGVkaXRQcm9qZWN0LnN0eWxlLmRpc3BsYXkgPSAnZmxleCdcbiAgICAgICAgY29uc29sZS5sb2coaW5kZXgpXG4gICAgICAgIG9wZW5Qcm9qZWN0ID0gbXlQcm9qZWN0QXJyYXlbaW5kZXhdXG5cbiAgICAgICAgZWRpdFRpdGxlLnZhbHVlID0gb3BlblByb2plY3RbJ3RpdGxlJ11cbiAgICAgICAgZWRpdERlc2NyaXB0aW9uLnZhbHVlID0gb3BlblByb2plY3RbJ2Rlc2NyaXB0aW9uJ11cbiAgICAgICAgZWRpdERhdGUudmFsdWUgPSBvcGVuUHJvamVjdFsnZGF0ZSddXG5cbiAgICAgICAgZWRpdENhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGVkaXRQcm9qZWN0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgICAgICAgIGZvcm0ucmVzZXQoKVxuICAgICAgICB9KVxuXG4gICAgICAgIGVkaXRQcm9qZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ID09IGVkaXRQcm9qZWN0KSB7XG4gICAgICAgICAgICAgICAgZWRpdFByb2plY3Quc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgfVxuXG4gICAgY29uc3QgY3JlYXRlUHJvamVjdCA9IGZ1bmN0aW9uICh0aXRsZSwgZGVzY3JpcHRpb24sIGRhdGUsIHByaW9yaXR5KSB7XG4gICAgICAgIGxldCB0YXNrcyA9IFtdXG4gICAgICAgIHJldHVybiB7dGl0bGUsZGVzY3JpcHRpb24sZGF0ZSxwcmlvcml0eSx0YXNrc31cbiAgICB9XG5cbiAgICBlZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIG9wZW5Qcm9qZWN0Wyd0aXRsZSddID0gZWRpdFRpdGxlLnZhbHVlXG4gICAgICAgIG9wZW5Qcm9qZWN0WydkZXNjcmlwdGlvbiddID0gZWRpdERlc2NyaXB0aW9uLnZhbHVlIFxuICAgICAgICBvcGVuUHJvamVjdFsnZGF0ZSddID0gZWRpdERhdGUudmFsdWVcblxuICAgICAgICBlZGl0UHJvamVjdC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgIGRvbS5lZGl0UHJvamVjdERpdigpXG4gICAgICAgIGZvcm0ucmVzZXQoKVxuICAgIH0pXG5cbiAgICByZXR1cm4ge1xuICAgICAgICBhZGRQcm9qZWN0LFxuICAgICAgICBhZGRCdXR0b24sXG4gICAgICAgIGRpc3BsYXlGb3JtLFxuICAgICAgICB0aXRsZSxcbiAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgIGRhdGUsXG4gICAgICAgIHByaW9yaXR5LFxuICAgICAgICBteVByb2plY3RBcnJheSxcbiAgICAgICAgY3JlYXRlUHJvamVjdCxcbiAgICAgICAgZGlzcGxheUVkaXRGb3JtXG4gICAgfVxuXG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBhZGRQcm9qZWN0TGlzdFxuXG4iLCJpbXBvcnQgYWRkUHJvamVjdExpc3QgZnJvbSAnLi9hZGRQcm9qZWN0J1xuaW1wb3J0IGRvbSBmcm9tICcuL0RPTSdcblxuY29uc3QgbmV3UHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LWJ1dHRvbicpXG5cbm5ld1Byb2plY3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhZGRQcm9qZWN0TGlzdC5kaXNwbGF5Rm9ybSlcblxuZG9tXG5cbiBcbiJdLCJuYW1lcyI6WyJyZXF1aXJlZEFyZ3MiLCJyZXF1aXJlZCIsImFyZ3MiLCJsZW5ndGgiLCJUeXBlRXJyb3IiLCJfdHlwZW9mIiwib2JqIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsInRvRGF0ZSIsImFyZ3VtZW50IiwiYXJndW1lbnRzIiwiYXJnU3RyIiwiT2JqZWN0IiwidG9TdHJpbmciLCJjYWxsIiwiRGF0ZSIsImdldFRpbWUiLCJjb25zb2xlIiwid2FybiIsIkVycm9yIiwic3RhY2siLCJOYU4iLCJzdGFydE9mRGF5IiwiZGlydHlEYXRlIiwiZGF0ZSIsInNldEhvdXJzIiwiaXNUb2RheSIsImRpcnR5RGF0ZUxlZnQiLCJkaXJ0eURhdGVSaWdodCIsImRhdGVMZWZ0U3RhcnRPZkRheSIsImRhdGVSaWdodFN0YXJ0T2ZEYXkiLCJpc1NhbWVEYXkiLCJub3ciLCJkZWZhdWx0T3B0aW9ucyIsImdldERlZmF1bHRPcHRpb25zIiwic3RhcnRPZldlZWsiLCJvcHRpb25zIiwiX3JlZiIsIl9yZWYyIiwiX3JlZjMiLCJfb3B0aW9ucyR3ZWVrU3RhcnRzT24iLCJfb3B0aW9ucyRsb2NhbGUiLCJfb3B0aW9ucyRsb2NhbGUkb3B0aW8iLCJfZGVmYXVsdE9wdGlvbnMkbG9jYWwiLCJfZGVmYXVsdE9wdGlvbnMkbG9jYWwyIiwid2Vla1N0YXJ0c09uIiwiZGlydHlOdW1iZXIiLCJudW1iZXIiLCJOdW1iZXIiLCJpc05hTiIsIk1hdGgiLCJjZWlsIiwiZmxvb3IiLCJ0b0ludGVnZXIiLCJsb2NhbGUiLCJSYW5nZUVycm9yIiwiZGF5IiwiZ2V0RGF5IiwiZGlmZiIsInNldERhdGUiLCJnZXREYXRlIiwiaXNUaGlzV2VlayIsImRhdGVMZWZ0U3RhcnRPZldlZWsiLCJkYXRlUmlnaHRTdGFydE9mV2VlayIsImlzU2FtZVdlZWsiLCJpbmRleCIsIm9wZW5Qcm9qZWN0IiwidGFyZ2V0UHJvamVjdCIsInRhcmdldFByb2plY3RUaXRsZSIsInRhc2tJbmRleCIsInByb2plY3RzTGlzdCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm1haW5Db250ZW50IiwiZHVlQ29udGVudCIsInByb2plY3RUaXRsZSIsInByb2plY3REZXNjcmlwdGlvbiIsInByb2plY3REdWUiLCJwcm9qZWN0UHJpb3JpdHkiLCJ0YXNrQnV0dG9uIiwiYWxsVGFza3MiLCJkdWVUb2RheSIsImR1ZVRoaXNXZWVrIiwiZHVlVGl0bGUiLCJkdWVQcm9qZWN0TGlzdCIsInByaW9yaXR5VGFiIiwiZGVsZXRlUHJvamVjdCIsImFkZFByb2plY3QiLCJzdHlsZSIsImRpc3BsYXkiLCJnZW5lcmF0ZU5ld1Rhc2siLCJuZXdUYXNrIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZENoaWxkIiwibmV3Q2hlY2tib3giLCJpbm5lckhUTUwiLCJuZXdJbnB1dCIsInRhc2tEZWxldGVCdXR0b24iLCJnZW5lcmF0ZVRhc2tPYmplY3QiLCJ0YXNrTmFtZSIsImlzQ29tcGxldGVkIiwidW5kZWZpbmVkIiwiZ2VuZXJhdGVEdWVQcm9qZWN0cyIsImR1ZVR5cGUiLCJoYXNDaGlsZE5vZGVzIiwicmVtb3ZlQ2hpbGQiLCJmaXJzdENoaWxkIiwiaSIsInRleHRDb250ZW50IiwiZHVlUHJvamVjdERpdiIsImdlbmVyYXRlUHJpb3JpdHlQcm9qZWN0cyIsInByaW9yaXR5IiwiYWRkRXZlbnRMaXN0ZW5lciIsInByb2plY3QiLCJ0YXJnZXQiLCJjb250YWlucyIsImNsb3Nlc3QiLCJBcnJheSIsImZyb20iLCJwYXJlbnROb2RlIiwiY2hpbGRyZW4iLCJpbmRleE9mIiwicHJvamVjdERpdiIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwidGFzayIsInRhc2tJbnB1dCIsImNoZWNrQm94IiwidmFsdWUiLCJjaGVja2VkIiwiZ2VuZXJhdGVUYXNrTGlzdCIsImV2ZW50IiwidGFyZ2V0VGFzayIsInRhc2tPYmplY3QiLCJjdXJyZW50VGFzayIsInNwbGljZSIsImNyZWF0ZVByb2plY3REaXYiLCJkZWxldGVQcm9qZWN0QnV0dG9uIiwiZWRpdFByb2plY3RCdXR0b24iLCJwcm9qZWN0VGl0bGVEaXYiLCJlZGl0UHJvamVjdERpdiIsImFkZFByb2plY3RMaXN0IiwiZWRpdFByb2plY3QiLCJmb3JtIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImFkZEJ1dHRvbiIsImNhbmNlbEJ1dHRvbiIsImVkaXRUaXRsZSIsImVkaXREZXNjcmlwdGlvbiIsImVkaXREYXRlIiwiZWRpdEJ1dHRvbiIsImVkaXRDYW5jZWxCdXR0b24iLCJteVByb2plY3RBcnJheSIsInByaW9yaXR5VmFsdWUiLCJjcmVhdGVQcm9qZWN0IiwidGFza3MiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0IiwiZGlzcGxheUZvcm0iLCJuZXdQcm9qZWN0IiwicHVzaCIsImxvZyIsImJ1dHRvbiIsImRpc3BsYXlFZGl0Rm9ybSJdLCJzb3VyY2VSb290IjoiIn0=